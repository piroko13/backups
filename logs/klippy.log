===== Config file =====
[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]
default_type = echo

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% if printer.pause_resume.is_paused|lower == 'false' and park|lower == 'true'%}
	_TOOLHEAD_PARK_PAUSE_CANCEL
	{% endif %}
	TURN_OFF_HEATERS
	CANCEL_PRINT_BASE
variable_park = True

[gcode_macro PAUSE]
description = Pause actual running print
rename_existing = PAUSE_BASE
gcode = 
	PAUSE_BASE
	STATUS_BUSY
	_TOOLHEAD_PARK_PAUSE_CANCEL

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set extrude = printer['gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL'].extrude %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY) %}
	{%else %}
	{% set get_params = " " %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E{extrude} F2100
	{% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	{% set z_park_delta = 10.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - z_park_delta) %}
	{% set z_safe = z_park_delta %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E-{extrude} F2100
	{% if printer.gcode_move.absolute_extrude|lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G91
	G1 Z{z_safe} F900
	G90
	G1 X{x_park} Y{y_park} F6000
	{% if printer.gcode_move.absolute_coordinates|lower == 'false' %} G91 {% endif %}
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}
variable_extrude = 1.0

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro GET_TIMELAPSE_SETUP]
description = Print the Timelapse setup
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set output_txt = ["Timelapse Setup:"] %}
	{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}
	{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}
	{% if tl.park.enable %}
	{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}
	{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}
	{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}
	{% endif %}
	{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}
	{% if not tl.extruder.fw_retract %}
	{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}
	{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}
	{% endif %}
	{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}
	{action_respond_info(output_txt|join("\n"))}

[gcode_macro _SET_TIMELAPSE_SETUP]
description = Set user parameters for timelapse
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	{% set park = {'min'   : {'x': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),
	'y': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},
	'max'   : {'x': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),
	'y': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},
	'center': {'x': (max.x-(max.x-min.x)/2)|round(3),
	'y': (max.y-(max.y-min.y)/2)|round(3)}} %}
	
	{% if params.ENABLE %}
	{% if params.ENABLE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == 'true' else False}
	{% else %}
	{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.VERBOSE %}
	{% if params.VERBOSE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == 'true' else False}
	{% else %}
	{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_X %}
	{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}
	{% set _dummy = tl.park.custom.update({'x':params.CUSTOM_POS_X|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_Y %}
	{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}
	{% set _dummy = tl.park.custom.update({'y':params.CUSTOM_POS_Y|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_DZ %}
	{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}
	{% set _dummy = tl.park.custom.update({'dz':params.CUSTOM_POS_DZ|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}
	{% endif %}
	{% endif %}
	{% if params.PARK_ENABLE %}
	{% if params.PARK_ENABLE|lower is in ['true', 'false'] %}
	{% set _dummy = tl.park.update({'enable':True if params.PARK_ENABLE|lower == 'true' else False}) %}
	{% else %}
	{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.PARK_POS %}
	{% if params.PARK_POS|lower is in ['center','front_left','front_right','back_left','back_right','custom','x_only','y_only'] %}
	{% set dic = {'center'      : {'x': park.center.x   , 'y': park.center.y   , 'dz': 1                },
	'front_left'  : {'x': park.min.x      , 'y': park.min.y      , 'dz': 0                },
	'front_right' : {'x': park.max.x      , 'y': park.min.y      , 'dz': 0                },
	'back_left'   : {'x': park.min.x      , 'y': park.max.y      , 'dz': 0                },
	'back_right'  : {'x': park.max.x      , 'y': park.max.y      , 'dz': 0                },
	'custom'      : {'x': tl.park.custom.x, 'y': tl.park.custom.y, 'dz': tl.park.custom.dz},
	'x_only'      : {'x': tl.park.custom.x, 'y': 'none'          , 'dz': tl.park.custom.dz},
	'y_only'      : {'x': 'none'          , 'y': tl.park.custom.y, 'dz': tl.park.custom.dz}} %}
	{% set _dummy = tl.park.update({'pos':params.PARK_POS|lower}) %}
	{% set _dummy = tl.park.update({'coord':dic[tl.park.pos]}) %}
	{% else %}
	{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"
	% params.PARK_POS|upper)}
	{% endif %}
	{% endif %}
	{% if params.PARK_TIME %}
	{% if params.PARK_TIME|float >= 0.0 %}
	{% set _dummy = tl.park.update({'time':params.PARK_TIME|float|round(3)}) %}
	{% else %}
	{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"
	{% if params.TRAVEL_SPEED %}
	{% if params.TRAVEL_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'travel':params.TRAVEL_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_SPEED %}
	{% if params.RETRACT_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'retract':params.RETRACT_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.EXTRUDE_SPEED %}
	{% if params.EXTRUDE_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'extrude':params.EXTRUDE_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"
	{% if params.EXTRUDE_DISTANCE %}
	{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'extrude':params.EXTRUDE_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_DISTANCE %}
	{% if params.RETRACT_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'retract':params.RETRACT_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.FW_RETRACT %}
	{% if params.FW_RETRACT|lower is in ['true', 'false'] %}
	{% if 'firmware_retraction' in printer.configfile.settings %}
	{% set _dummy = tl.extruder.update({'fw_retract': True if params.FW_RETRACT|lower == 'true' else False}) %}
	{% else %}
	{% set _dummy = tl.extruder.update({'fw_retract':False}) %}
	{% if params.FW_RETRACT|capitalize == 'True' %}
	{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}
	{% endif %}
	{% endif %}
	{% else %}
	{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"
	{% if printer.configfile.settings['gcode_macro pause'] is defined %}
	{% set _dummy = tl.macro.update({'pause': printer.configfile.settings['gcode_macro pause'].rename_existing}) %}
	{% endif %}
	{% if printer.configfile.settings['gcode_macro resume'] is defined %}
	{% set _dummy = tl.macro.update({'resume': printer.configfile.settings['gcode_macro resume'].rename_existing}) %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"

[gcode_macro TIMELAPSE_TAKE_FRAME]
description = Take Timelapse shoot
variable_enable = False
variable_takingframe = False
variable_park = {'enable': False,
	'pos'   : 'center',
	'time'  : 0.1,
	'custom': {'x': 0, 'y': 0, 'dz': 0},
	'coord' : {'x': 0, 'y': 0, 'dz': 0}}
variable_extruder = {'fw_retract': False,
	'retract': 1.0,
	'extrude': 1.0}
variable_speed = {'travel': 100,
	'retract': 15,
	'extrude': 15}
variable_verbose = True
variable_check_time = 0.5
variable_restore = {'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}
variable_macro = {'pause': 'PAUSE', 'resume': 'RESUME'}
variable_is_paused = False
gcode = 
	{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower =='true' else False %}
	{% if enable %}
	{% if (hyperlapse and printer['gcode_macro HYPERLAPSE'].run) or
	(not hyperlapse and not printer['gcode_macro HYPERLAPSE'].run) %}
	{% if park.enable %}
	{% set pos = {'x': 'X' + park.coord.x|string if park.pos != 'y_only' else '',
	'y': 'Y' + park.coord.y|string if park.pos != 'x_only' else '',
	'z': 'Z'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}
	{% set restore = {'absolute': {'coordinates': printer.gcode_move.absolute_coordinates,
	'extrude'    : printer.gcode_move.absolute_extrude},
	'speed'   : printer.gcode_move.speed,
	'e'       : printer.gcode_move.gcode_position.e,
	'factor'  : {'speed'  : printer.gcode_move.speed_factor,
	'extrude': printer.gcode_move.extrude_factor}} %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}
	{% else %}
	{% if extruder.fw_retract %}
	G10
	{% else %}
	M83
	G0 E-{extruder.retract} F{speed.retract * 60}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True
	{macro.pause}
	SET_GCODE_OFFSET X=0 Y=0
	G90
	{% if "xyz" not in printer.toolhead.homed_axes %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}
	{% else %}
	G0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION={check_time}
	M400
	{% endif %}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}
	{% endif %}
	{% else %}
	{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}
	{% endif %}

[gcode_macro _TIMELAPSE_NEW_FRAME]
description = action call for timelapse shoot. must be a seperate macro
gcode = 
	{action_call_remote_method("timelapse_newframe",
	macropark=printer['gcode_macro TIMELAPSE_TAKE_FRAME'].park,
	hyperlapse=params.HYPERLAPSE)}

[delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME]
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set factor = {'speed': printer.gcode_move.speed_factor, 'extrude': printer.gcode_move.extrude_factor} %}
	{% if tl.takingframe %}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION={tl.check_time}
	{% else %}
	{tl.macro.resume} VELOCITY={tl.speed.travel}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}
	{% else %}
	{% if tl.extruder.fw_retract %}
	G11
	{% else %}
	G0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}
	G0 F{tl.restore.speed}
	{% if tl.restore.absolute.extrude %}
	M82
	G92 E{tl.restore.e}
	{% endif %}
	{% endif %}
	{% endif %}
	{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}
	{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}
	{% if not tl.restore.absolute.coordinates %} G91 {% endif %}
	{% endif %}

[gcode_macro HYPERLAPSE]
description = Start/Stop a hyperlapse recording
variable_cycle = 0
variable_run = False
gcode = 
	{% set cycle = params.CYCLE|default(30)|int %}
	{% if params.ACTION and params.ACTION|lower == 'start' %}
	{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True
	{% elif params.ACTION and params.ACTION|lower == 'stop' %}
	{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0
	{% else %}
	{action_raise_error("Hyperlapse: No valid input parameter
	Use:
	- HYPERLAPSE ACTION=START [CYCLE=time]
	- HYPERLAPSE ACTION=STOP")}
	{% endif %}

[delayed_gcode _HYPERLAPSE_LOOP]
gcode = 
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True

[gcode_macro TIMELAPSE_RENDER]
description = Render Timelapse video and wait for the result
variable_render = False
variable_run_identifier = 0
gcode = 
	{action_respond_info("Timelapse: Rendering started")}
	{action_call_remote_method("timelapse_render", byrendermacro="True")}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True
	{printer.configfile.settings['gcode_macro pause'].rename_existing}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5

[delayed_gcode _WAIT_TIMELAPSE_RENDER]
gcode = 
	{% set ri = printer['gcode_macro TIMELAPSE_RENDER'].run_identifier % 4 %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}
	{% if printer['gcode_macro TIMELAPSE_RENDER'].render %}
	M117 Rendering {['-','\\','|','/'][ri]}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5
	{% else %}
	{action_respond_info("Timelapse: Rendering finished")}
	M117
	{printer.configfile.settings['gcode_macro resume'].rename_existing}
	{% endif %}

[gcode_macro TEST_STREAM_DELAY]
description = Helper macro to find stream and park delay
gcode = 
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set act = printer.toolhead.position %}
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% if act.z > 5.0 %}
	G0 X{min.x + 5.0} F{tl.speed.travel|int * 60}
	G0 X{(max.x-min.x)/2}
	G4 P{tl.park.time|float * 1000}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE
	G0 X{max.x - 5.0}
	{% else %}
	{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}
	{% endif %}

[neopixel sb_leds]
pin = PA8
chain_count = 10
color_order = GRB
initial_red = 1.0
initial_green = 0.0
initial_blue = 1.0

[led_effect sb_logo_busy]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (1,0,0)

[led_effect sb_logo_cleaning]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.0, 0.02, 0.5)

[led_effect sb_logo_calibrating_z]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.0, 0.0, 0.35)

[led_effect sb_logo_heating]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (1, 0.18, 0)

[led_effect sb_logo_cooling]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0, 0, 1)

[led_effect sb_logo_homing]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.0, 0.6, 0.2)

[led_effect sb_logo_leveling]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.5, 0.1, 0.4)

[led_effect sb_logo_meshing]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.5, 1.0, 0.0)

[led_effect sb_logo_printing]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	static 3 1 add (1.0, 1.0, 1.0)

[led_effect sb_logo_standby]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.01, 0.01, 0.01)

[led_effect sb_logo_part_ready]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.0, 1.0, 0.0)

[led_effect sb_nozzle_heating]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	breathing 3 1 top (1.0, 0.18, 0.0)

[led_effect sb_nozzle_cooling]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	breathing 3 1 top (0.1, 0.1, 1.0)

[led_effect sb_nozzle_standby]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	breathing 3 1 top (0.6, 0.0, 0.0)

[led_effect sb_nozzle_printing]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	static 3 1 top (1.0, 1.0, 1.0)

[led_effect sb_nozzle_part_ready]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	breathing 3 1 top (0.6, 1.0, 0.1)

[led_effect sb_critical_error]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds
layers = 
	strobe 1 1.5 add (1.0, 1.0, 1.0)
	breathing 2 0 difference (0.95, 0.0, 0.0)
	static 1 0 top (1.0, 0.0, 0.0)
run_on_error = true

[led_effect rainbow]
autostart = true
frame_rate = 24
leds = 
	neopixel:sb_leds
layers = 
	gradient 0.3 1 add (0.3, 0.0, 0.0),(0.0, 9.3, 0.0),(0.0, 0.0, 0.3)

[led_effect set_nozzle_leds]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	static 0 0 top (1.0, 1.0, 1.0)

[led_effect set_logo_leds]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	static 0 0 top (1.0, 1.0, 1.0)

[gcode_macro set_logo_leds_off]
gcode = 
	SET_LED_EFFECT EFFECT=set_logo_leds STOP=1

[gcode_macro set_logo_leds_on]
gcode = 
	SET_LED_EFFECT EFFECT=set_logo_leds

[gcode_macro set_nozzle_leds_on]
gcode = 
	SET_LED_EFFECT EFFECT=set_nozzle_leds

[gcode_macro set_nozzle_leds_off]
gcode = 
	SET_LED_EFFECT EFFECT=set_nozzle_leds STOP=1

[gcode_macro status_off]
gcode = 
	STOP_LED_EFFECTS

[gcode_macro status_ready]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=rainbow

[gcode_macro status_part_ready]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_nozzle_part_ready
	SET_LED_EFFECT EFFECT=sb_logo_part_ready

[gcode_macro status_busy]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_nozzle_part_ready
	SET_LED_EFFECT EFFECT=sb_logo_part_ready

[gcode_macro status_heating]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_heating
	SET_LED_EFFECT EFFECT=sb_nozzle_heating

[gcode_macro status_cooling]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_cooling
	SET_LED_EFFECT EFFECT=sb_nozzle_cooling

[gcode_macro status_leveling]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_leveling
	set_nozzle_leds_on

[gcode_macro status_homing]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_homing
	set_nozzle_leds_on

[gcode_macro status_cleaning]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_cleaning
	set_nozzle_leds_on

[gcode_macro status_meshing]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_meshing
	set_nozzle_leds_on

[gcode_macro status_calibrating_z]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_calibrating_z
	set_nozzle_leds_on

[gcode_macro status_printing]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_printing
	SET_LED_EFFECT EFFECT=sb_nozzle_printing

[gcode_macro _bot_data]
variable_lapse_video_size = 0
variable_lapse_filename = 'None'
variable_lapse_path = 'None'
gcode = 
	M118 Setting bot lapse variables

[menu __main __octoprint]
type = list
name = Klipper

[menu __main __octoprint __pause]
type = command
enable = {printer.idle_timeout.state == "Printing"}
name = Pause printing
gcode = 
	PAUSE

[menu __main __octoprint __resume]
type = command
enable = {not printer.idle_timeout.state == "Printing"}
name = Resume printing
gcode = 
	RESUME

[menu __main __octoprint __abort]
type = command
enable = {printer.idle_timeout.state == "Printing"}
name = Abort printing
gcode = 
	CANCEL_PRINT

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.8
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 10
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro BED_MESH_CALIBRATE]
rename_existing = _BED_MESH_CALIBRATE
gcode = 
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set bed_mesh_min = printer.configfile.settings.bed_mesh.mesh_min %}
	{% set bed_mesh_max = printer.configfile.settings.bed_mesh.mesh_max %}
	{% set probe_count = printer.configfile.settings.bed_mesh.probe_count %}
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set probe_dock_enable = kamp_settings.probe_dock_enable | abs %}
	{% set attach_macro = kamp_settings.attach_macro | string %}
	{% set detach_macro = kamp_settings.detach_macro | string %}
	{% set mesh_margin = kamp_settings.mesh_margin | float %}
	{% set fuzz_amount = kamp_settings.fuzz_amount | float %}
	{% set probe_count = probe_count if probe_count|length > 1 else probe_count * 2  %}
	{% set max_probe_point_distance_x = ( bed_mesh_max[0] - bed_mesh_min[0] ) / (probe_count[0] - 1)  %}
	{% set max_probe_point_distance_y = ( bed_mesh_max[1] - bed_mesh_min[1] ) / (probe_count[1] - 1)  %}
	{% set x_min = all_points | map(attribute=0) | min | default(bed_mesh_min[0]) %}
	{% set y_min = all_points | map(attribute=1) | min | default(bed_mesh_min[1]) %}
	{% set x_max = all_points | map(attribute=0) | max | default(bed_mesh_max[0]) %}
	{% set y_max = all_points | map(attribute=1) | max | default(bed_mesh_max[1]) %}
	
	{% set fuzz_range = range((0) | int, (fuzz_amount * 100) | int + 1) %}
	{% set adapted_x_min = x_min - mesh_margin - (fuzz_range | random / 100.0) %}
	{% set adapted_y_min = y_min - mesh_margin - (fuzz_range | random / 100.0) %}
	{% set adapted_x_max = x_max + mesh_margin + (fuzz_range | random / 100.0) %}
	{% set adapted_y_max = y_max + mesh_margin + (fuzz_range | random / 100.0) %}
	
	{% set adapted_x_min = [adapted_x_min , bed_mesh_min[0]] | max %}
	{% set adapted_y_min = [adapted_y_min , bed_mesh_min[1]] | max %}
	{% set adapted_x_max = [adapted_x_max , bed_mesh_max[0]] | min %}
	{% set adapted_y_max = [adapted_y_max , bed_mesh_max[1]] | min %}
	
	{% set points_x = (((adapted_x_max - adapted_x_min) / max_probe_point_distance_x) | round(method='ceil') | int) + 1 %}
	{% set points_y = (((adapted_y_max - adapted_y_min) / max_probe_point_distance_y) | round(method='ceil') | int) + 1 %}
	
	{% if (([points_x, points_y]|max) > 6) %}
	{% set algorithm = "bicubic" %}
	{% set min_points = 4 %}
	{% else %}
	{% set algorithm = "lagrange" %}
	{% set min_points = 3 %}
	{% endif %}
	
	{% set points_x = [points_x , min_points]|max %}
	{% set points_y = [points_y , min_points]|max %}
	{% set points_x = [points_x , probe_count[0]]|min %}
	{% set points_y = [points_y , probe_count[1]]|min %}
	
	{% if verbose_enable == True %}
	{% if printer.exclude_object.objects != [] %}
	
	{ action_respond_info( "Algorithm: {}.".format(
	(algorithm),
	)) }
	
	{ action_respond_info("Default probe count: {},{}.".format(
	(probe_count[0]),
	(probe_count[1]),
	)) }
	
	{ action_respond_info("Adapted probe count: {},{}.".format(
	(points_x),
	(points_y),
	)) }
	
	{action_respond_info("Default mesh bounds: {}, {}.".format(
	(bed_mesh_min[0],bed_mesh_min[1]),
	(bed_mesh_max[0],bed_mesh_max[1]),
	)) }
	
	{% if mesh_margin > 0 %}
	{action_respond_info("Mesh margin is {}, mesh bounds extended by {}mm.".format(
	(mesh_margin),
	(mesh_margin),
	)) }
	{% else %}
	{action_respond_info("Mesh margin is 0, margin not increased.")}
	{% endif %}
	
	{% if fuzz_amount > 0 %}
	{action_respond_info("Mesh point fuzzing enabled, points fuzzed up to {}mm.".format(
	(fuzz_amount),
	)) }
	{% else %}
	{action_respond_info("Fuzz amount is 0, mesh points not fuzzed.")}
	{% endif %}
	
	{ action_respond_info("Adapted mesh bounds: {}, {}.".format(
	(adapted_x_min, adapted_y_min),
	(adapted_x_max, adapted_y_max),
	)) }
	
	{action_respond_info("KAMP adjustments successful. Happy KAMPing!")}
	
	{% else %}
	
	{action_respond_info("No objects detected! Check your gcode and make sure that EXCLUDE_OBJECT_DEFINE is happening before BED_MESH_CALIBRATE is called. Defaulting to regular meshing.")}
	G4 P5000
	{% endif %}
	
	{% endif %}
	
	{% if probe_dock_enable == True %}
	{attach_macro}
	{% endif %}
	
	_BED_MESH_CALIBRATE mesh_min={adapted_x_min},{adapted_y_min} mesh_max={adapted_x_max},{adapted_y_max} ALGORITHM={algorithm} PROBE_COUNT={points_x},{points_y}
	
	{% if probe_dock_enable == True %}
	{detach_macro}
	{% endif %}

[gcode_macro LINE_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = (printer.toolhead.max_velocity) * 60 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set verbose_enable = printer["gcode_macro _KAMP_Settings"].verbose_enable | abs %}
	{% set purge_height = printer["gcode_macro _KAMP_Settings"].purge_height | float %}
	{% set tip_distance = printer["gcode_macro _KAMP_Settings"].tip_distance | float %}
	{% set purge_margin = printer["gcode_macro _KAMP_Settings"].purge_margin | float %}
	{% set purge_amount = printer["gcode_macro _KAMP_Settings"].purge_amount | float %}
	{% set flow_rate = printer["gcode_macro _KAMP_Settings"].flow_rate | float %}
	
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	{% if purge_y_origin > 0 %}
	
	{action_respond_info("KAMP purge starting at {}, {} and purging {}mm of filament, requested flow rate is {}mm3/s.".format(
	(purge_x_center),
	(purge_y_origin),
	(purge_amount),
	(flow_rate),
	)) }
	
	{% else %}
	
	{action_respond_info("KAMP purge starting at {}, {} and purging {}mm of filament, requested flow rate is {}mm3/s.".format(
	(purge_x_origin),
	(purge_y_center),
	(purge_amount),
	(flow_rate),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	{% if purge_y_origin > 0 %}
	
	G92 E0
	G0 F{travel_speed}
	G90
	G0 X{purge_x_center} Y{purge_y_origin}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_center + purge_amount} E{purge_amount} F{purge_move_speed}
	{RETRACT}
	G0 X{purge_x_center + purge_amount + 10} F{travel_speed}
	G92 E0
	M82
	G0 Z{purge_height * 2} F{travel_speed}
	
	{% else %}
	
	G92 E0
	G0 F{travel_speed}
	G90
	G0 X{purge_x_origin} Y{purge_y_center}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 Y{purge_y_center + purge_amount} E{purge_amount} F{purge_move_speed}
	{RETRACT}
	G0 Y{purge_y_center + purge_amount + 10} F{travel_speed}
	G92 E0
	M82
	G0 Z{purge_height * 2} F{travel_speed}
	
	{% endif %}
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = (printer.toolhead.max_velocity) * 60 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Presmartpark_State
	
	G90
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F{travel_speed}
	G0 Z{z_height}
	
	RESTORE_GCODE_STATE NAME=Presmartpark_State

[exclude_object]

[stepper_x]
step_pin = PB13
dir_pin = !PB12
enable_pin = !PB14
microsteps = 64
rotation_distance = 40
endstop_pin = ^PC0
position_endstop = -27
position_min = -27
position_max = 230
homing_speed = 80

[tmc2209 stepper_x]
uart_pin = PC11
tx_pin = PC10
uart_address = 0
run_current = 0.580
stealthchop_threshold = 999999

[stepper_y]
step_pin = PB10
dir_pin = !PB2
enable_pin = !PB11
microsteps = 64
rotation_distance = 40
endstop_pin = ^PC1
position_endstop = -11
position_min = -11
position_max = 220
homing_speed = 80

[tmc2209 stepper_y]
uart_pin = PC11
tx_pin = PC10
uart_address = 2
run_current = 0.580
stealthchop_threshold = 999999

[stepper_z]
step_pin = PB0
dir_pin = PC5
enable_pin = !PB1
microsteps = 64
rotation_distance = 2
endstop_pin = probe:z_virtual_endstop
position_min = -5
position_max = 250

[tmc2209 stepper_z]
uart_pin = PC11
tx_pin = PC10
uart_address = 1
run_current = 0.580
stealthchop_threshold = 999999

[safe_z_home]
home_xy_position = 149, 120
speed = 80
z_hop = 10
z_hop_speed = 5

[extruder]
max_extrude_only_distance = 350.0
max_extrude_cross_section = 5
step_pin = PB3
dir_pin = !PB4
enable_pin = !PD1
microsteps = 64
rotation_distance = 22.110
nozzle_diameter = 0.600
filament_diameter = 1.750
heater_pin = PC8
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PA0
min_temp = 0
max_temp = 250
control = pid
pid_kp = 23.249
pid_ki = 1.336
pid_kd = 101.134

[tmc2209 extruder]
uart_pin = PC11
tx_pin = PC10
uart_address = 3
run_current = 0.650
stealthchop_threshold = 999999

[heater_bed]
heater_pin = PC9
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PC4
min_temp = 0
max_temp = 130
control = pid
pid_kp = 69.714
pid_ki = 1.260
pid_kd = 964.661

[heater_fan heatbreak_cooling_fan]
pin = PB15
heater = extruder
heater_temp = 50

[controller_fan controller_fan]
pin = PC7
idle_timeout = 60

[fan]
pin = PC6

[mcu]
serial = /dev/ttyS0
restart_method = command
baud = 115200

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 3000
max_z_velocity = 5
max_z_accel = 100

[bltouch]
sensor_pin = ^PC14
control_pin = PA1
x_offset = -39
y_offset = -10
probe_with_touch_mode = True
pin_up_touch_mode_reports_triggered = True
stow_on_each_sample = False
z_offset = 2.220

[display]
lcd_type = uc1701
cs_pin = PB8
a0_pin = PD6
rst_pin = PB9
encoder_pins = ^PA9, ^PA10
click_pin = ^!PB5
contrast = 63
spi_software_sclk_pin = PA5
spi_software_mosi_pin = PA7
spi_software_miso_pin = PA6

[neopixel SKR_screen]
pin = PA15
chain_count = 3
initial_red = 0.4
initial_green = 0.05
initial_blue = 0.0
color_order = RGB

[delayed_gcode welcome]
initial_duration = .0
gcode = 
	SET_LED LED=SKR_screen RED=0.5 GREEN=0.0 BLUE=0.0 TRANSMIT=0
	SET_LED LED=SKR_screen RED=0.0 GREEN=0.0 BLUE=0.5 INDEX=1 TRANSMIT=1

[output_pin relay]
pin = PC13
value = 1
shutdown_value = 0

[board_pins]
aliases = 
	
	EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8, EXP1_9=<GND>,
	EXP1_2=PA15, EXP1_4=<RST>, EXP1_6=PB9,  EXP1_8=PD6, EXP1_10=<5V>

[bed_screws]
screw1 = 23, 24
screw2 = 191, 24
screw3 = 191, 195
screw4 = 23, 195

[screws_tilt_adjust]
screw1 = 62, 34
screw1_name = front left screw
screw2 = 230, 34
screw2_name = front right screw
screw3 = 230, 205
screw3_name = rear left screw
screw4 = 62, 205
screw4_name = rear right screw
horizontal_move_z = 10
speed = 50
screw_thread = CW-M4

[bed_mesh]
speed = 120
horizontal_move_z = 5
mesh_min = 15, 15
mesh_max = 190, 198
probe_count = 6, 6
algorithm = bicubic
bicubic_tension = 0.2
move_check_distance = 6
split_delta_z = .025

[gcode_arcs]

[firmware_retraction]

[gcode_macro M300]
description = Beeper macro
gcode = 
	SET_PIN PIN=beeper Value=1
	G4 P{params.P|default(150)|int}
	SET_PIN PIN=beeper Value=0

[gcode_macro BEEP]
gcode = 
	M300 P100

[gcode_macro BEEP_TWICE]
gcode = 
	M300 P100
	M300 P100

[gcode_macro BEEP_LONG]
gcode = 
	M300 P500

[gcode_macro Heat_to_remove]
gcode = 
	STATUS_HEATING
	M140 S60
	M117 Heating bed to remove print...
	BEEP
	M190 S60
	BEEP_TWICE
	M117 Done heating!!!

[gcode_macro START_PRINT]
gcode = 
	BEEP
	G92 E0
	G28
	STATUS_HEATING
	M104 S{180}
	M140 S{50}
	M190 S{50}
	BED_MESH_CALIBRATE
	
	SMART_PARK
	M104 S{params.EXTRUDER_TEMP}
	M140 S{params.BED_TEMP}
	STATUS_HEATING
	M190 S{params.BED_TEMP}
	LINE_PURGE
	STATUS_PRINTING
	G92 E0
	G1 Z2.0 F3000
	G1 X5 Y20 Z0.3 F5000.0
	M117 Printing...

[gcode_macro END_PRINT]
gcode = 
	BEEP_TWICE
	G91
	G1 E-5 F2700
	G1 E-2 Z0.2 F2400
	G1 X5 Y5 F3000
	G1 Z10
	G90
	G1 X0 Y210
	M106 S0
	M104 S0
	M140 S0
	M84 X Y E
	BED_MESH_CLEAR
	STATUS_PART_READY
	M117 Done!!!

[gcode_macro PURGE]
gcode = 
	M117 PURGING...
	G91
	G1 E45.0 F250
	G90

[gcode_macro LOAD_FILAMENT]
gcode = 
	{% set speed = params.SPEED|default(300) %}
	{% set max_velocity = printer.configfile.settings['extruder'].max_extrude_only_velocity %}
	SAVE_GCODE_STATE NAME = load_state
	G91
	G92 E0
	G1 E350 F{max_velocity}
	G1 E25 F{speed}
	BEEP_TWICE
	RESTORE_GCODE_STATE NAME = load_state

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	{% set speed = params.SPEED|default(300) %}
	{% set max_velocity = printer.configfile.settings['extruder'].max_extrude_only_velocity %}
	SAVE_GCODE_STATE NAME = unload_state
	G91
	BEEP
	G92 E0
	G1 E25 F{speed}
	G1 E-350 F{max_velocity}
	BEEP_TWICE
	RESTORE_GCODE_STATE NAME = unload_state

[gcode_macro T0]
gcode = 

[bed_mesh default]
version = 1
points = 
	0.076562, 0.072656, 0.074844
	0.053906, 0.051875, 0.050781
	0.084219, 0.085312, 0.091094
x_count = 3
y_count = 3
mesh_x_pps = 2
mesh_y_pps = 2
algo = lagrange
tension = 0.2
min_x = 106.97
max_x = 113.03
min_y = 97.3
max_y = 122.69999999999999
=======================
Loaded MCU 'mcu' 106 commands (v0.12.0-138-g5e280680 / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1_PA9_PA10=PA9,PA10 BUS_PINS_i2c1_PB6_PB7=PB6,PB7 BUS_PINS_i2c1_PB8_PB9=PB8,PB9 BUS_PINS_i2c2_PB10_PB11=PB10,PB11 BUS_PINS_i2c2_PB13_PB14=PB13,PB14 BUS_PINS_i2c3_PB3_PB4=PB3,PB4 BUS_PINS_i2c3_PC0_PC1=PC0,PC1 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3=PB4,PB5,PB3 CLOCK_FREQ=64000000 MCU=stm32g0b1xx PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_crystal=PF0,PF1 RESERVE_PINS_serial=PA3,PA2 SERIAL_BAUD=115200 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Configured MCU 'mcu' (1024 moves)
Args: ['/home/biqu/klipper/klippy/klippy.py', '/home/biqu/printer_data/config/printer.cfg', '-I', '/home/biqu/printer_data/comms/klippy.serial', '-l', '/home/biqu/printer_data/logs/klippy.log', '-a', '/home/biqu/printer_data/comms/klippy.sock']
Git version: 'v0.12.0-139-g75a40e81-dirty'
Untracked files: klippy/extras/led_effect.py
Branch: master
Remote: origin
Tracked URL: https://github.com/Klipper3d/klipper
CPU: 4 core ?
Python: '3.9.2 (default, Feb 28 2021, 17:03:44) \n[GCC 10.2.1 20210110]'
webhooks client 281472924187472: {'program': 'Moonraker', 'version': 'v0.8.0-324-ga3e4dac'}
=============== Log rollover at Thu Apr  4 01:23:13 2024 ===============
Neopixel update did not succeed
Neopixel update did not succeed
Neopixel update did not succeed
Neopixel update did not succeed
Neopixel update did not succeed
Neopixel update did not succeed
Neopixel update did not succeed
Neopixel update did not succeed
Neopixel update did not succeed
Neopixel update did not succeed
Neopixel update did not succeed
Neopixel update did not succeed
Neopixel update did not succeed
Stats 1382.8: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000166 mcu_task_stddev=0.000177 bytes_write=1614791 bytes_read=827462 bytes_retransmit=9 bytes_invalid=0 send_seq=72511 receive_seq=72511 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999169  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=1.03 cputime=170.623 memavail=649068 print_time=1385.548 buffer_time=0.156 print_stall=0 extruder: target=0 temp=23.4 pwm=0.000
Stats 1383.8: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000166 mcu_task_stddev=0.000177 bytes_write=1616754 bytes_read=828096 bytes_retransmit=9 bytes_invalid=0 send_seq=72574 receive_seq=72573 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999169  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=1.03 cputime=170.727 memavail=649044 print_time=1385.548 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.7 pwm=0.000
Stats 1384.8: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000166 mcu_task_stddev=0.000177 bytes_write=1617929 bytes_read=828696 bytes_retransmit=9 bytes_invalid=0 send_seq=72625 receive_seq=72625 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999168  heater_bed: target=0 temp=23.6 pwm=0.000 sysload=1.03 cputime=170.837 memavail=649348 print_time=1385.548 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.4 pwm=0.000
Stats 1385.8: gcodein=0  mcu: mcu_awake=0.064 mcu_task_avg=0.000176 mcu_task_stddev=0.000188 bytes_write=1619151 bytes_read=829339 bytes_retransmit=9 bytes_invalid=0 send_seq=72682 receive_seq=72682 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999167  heater_bed: target=0 temp=23.5 pwm=0.000 sysload=1.03 cputime=170.939 memavail=649632 print_time=1385.548 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.4 pwm=0.000
Stats 1386.8: gcodein=0  mcu: mcu_awake=0.064 mcu_task_avg=0.000176 mcu_task_stddev=0.000188 bytes_write=1620280 bytes_read=829900 bytes_retransmit=9 bytes_invalid=0 send_seq=72731 receive_seq=72731 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999168  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=1.03 cputime=171.046 memavail=649128 print_time=1385.548 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.4 pwm=0.000
Stats 1387.8: gcodein=0  mcu: mcu_awake=0.064 mcu_task_avg=0.000176 mcu_task_stddev=0.000188 bytes_write=1621427 bytes_read=830500 bytes_retransmit=9 bytes_invalid=0 send_seq=72783 receive_seq=72783 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999166  heater_bed: target=0 temp=23.5 pwm=0.000 sysload=1.03 cputime=171.172 memavail=649136 print_time=1385.548 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1388.8: gcodein=0  mcu: mcu_awake=0.064 mcu_task_avg=0.000176 mcu_task_stddev=0.000188 bytes_write=1622641 bytes_read=831100 bytes_retransmit=9 bytes_invalid=0 send_seq=72838 receive_seq=72838 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999166  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=1.03 cputime=171.272 memavail=649136 print_time=1385.548 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.5 pwm=0.000
Stats 1389.8: gcodein=0  mcu: mcu_awake=0.064 mcu_task_avg=0.000176 mcu_task_stddev=0.000188 bytes_write=1623768 bytes_read=831692 bytes_retransmit=9 bytes_invalid=0 send_seq=72890 receive_seq=72890 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=22 upcoming_bytes=0 freq=63999166  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=1.03 cputime=171.387 memavail=649920 print_time=1385.548 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.6 pwm=0.000
Stats 1390.8: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000172 bytes_write=1624921 bytes_read=832317 bytes_retransmit=9 bytes_invalid=0 send_seq=72942 receive_seq=72942 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999165  heater_bed: target=0 temp=23.6 pwm=0.000 sysload=1.03 cputime=171.485 memavail=650424 print_time=1385.548 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.4 pwm=0.000
Starting Klippy...
Args: ['/home/biqu/klipper/klippy/klippy.py', '/home/biqu/printer_data/config/printer.cfg', '-I', '/home/biqu/printer_data/comms/klippy.serial', '-l', '/home/biqu/printer_data/logs/klippy.log', '-a', '/home/biqu/printer_data/comms/klippy.sock']
Git version: 'v0.12.0-139-g75a40e81-dirty'
Untracked files: klippy/extras/led_effect.py
Branch: master
Remote: origin
Tracked URL: https://github.com/Klipper3d/klipper
CPU: 4 core ?
Python: '3.9.2 (default, Feb 28 2021, 17:03:44) \n[GCC 10.2.1 20210110]'
Start printer at Wed Apr  3 05:31:30 2024 (1712143890.9 20.3)
===== Config file =====
[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]
default_type = echo

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% if printer.pause_resume.is_paused|lower == 'false' and park|lower == 'true'%}
	_TOOLHEAD_PARK_PAUSE_CANCEL
	{% endif %}
	TURN_OFF_HEATERS
	CANCEL_PRINT_BASE
variable_park = True

[gcode_macro PAUSE]
description = Pause actual running print
rename_existing = PAUSE_BASE
gcode = 
	PAUSE_BASE
	STATUS_BUSY
	_TOOLHEAD_PARK_PAUSE_CANCEL

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set extrude = printer['gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL'].extrude %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY) %}
	{%else %}
	{% set get_params = " " %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E{extrude} F2100
	{% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	{% set z_park_delta = 10.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - z_park_delta) %}
	{% set z_safe = z_park_delta %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E-{extrude} F2100
	{% if printer.gcode_move.absolute_extrude|lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G91
	G1 Z{z_safe} F900
	G90
	G1 X{x_park} Y{y_park} F6000
	{% if printer.gcode_move.absolute_coordinates|lower == 'false' %} G91 {% endif %}
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}
variable_extrude = 1.0

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro GET_TIMELAPSE_SETUP]
description = Print the Timelapse setup
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set output_txt = ["Timelapse Setup:"] %}
	{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}
	{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}
	{% if tl.park.enable %}
	{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}
	{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}
	{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}
	{% endif %}
	{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}
	{% if not tl.extruder.fw_retract %}
	{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}
	{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}
	{% endif %}
	{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}
	{action_respond_info(output_txt|join("\n"))}

[gcode_macro _SET_TIMELAPSE_SETUP]
description = Set user parameters for timelapse
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	{% set park = {'min'   : {'x': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),
	'y': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},
	'max'   : {'x': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),
	'y': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},
	'center': {'x': (max.x-(max.x-min.x)/2)|round(3),
	'y': (max.y-(max.y-min.y)/2)|round(3)}} %}
	
	{% if params.ENABLE %}
	{% if params.ENABLE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == 'true' else False}
	{% else %}
	{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.VERBOSE %}
	{% if params.VERBOSE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == 'true' else False}
	{% else %}
	{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_X %}
	{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}
	{% set _dummy = tl.park.custom.update({'x':params.CUSTOM_POS_X|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_Y %}
	{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}
	{% set _dummy = tl.park.custom.update({'y':params.CUSTOM_POS_Y|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_DZ %}
	{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}
	{% set _dummy = tl.park.custom.update({'dz':params.CUSTOM_POS_DZ|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}
	{% endif %}
	{% endif %}
	{% if params.PARK_ENABLE %}
	{% if params.PARK_ENABLE|lower is in ['true', 'false'] %}
	{% set _dummy = tl.park.update({'enable':True if params.PARK_ENABLE|lower == 'true' else False}) %}
	{% else %}
	{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.PARK_POS %}
	{% if params.PARK_POS|lower is in ['center','front_left','front_right','back_left','back_right','custom','x_only','y_only'] %}
	{% set dic = {'center'      : {'x': park.center.x   , 'y': park.center.y   , 'dz': 1                },
	'front_left'  : {'x': park.min.x      , 'y': park.min.y      , 'dz': 0                },
	'front_right' : {'x': park.max.x      , 'y': park.min.y      , 'dz': 0                },
	'back_left'   : {'x': park.min.x      , 'y': park.max.y      , 'dz': 0                },
	'back_right'  : {'x': park.max.x      , 'y': park.max.y      , 'dz': 0                },
	'custom'      : {'x': tl.park.custom.x, 'y': tl.park.custom.y, 'dz': tl.park.custom.dz},
	'x_only'      : {'x': tl.park.custom.x, 'y': 'none'          , 'dz': tl.park.custom.dz},
	'y_only'      : {'x': 'none'          , 'y': tl.park.custom.y, 'dz': tl.park.custom.dz}} %}
	{% set _dummy = tl.park.update({'pos':params.PARK_POS|lower}) %}
	{% set _dummy = tl.park.update({'coord':dic[tl.park.pos]}) %}
	{% else %}
	{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"
	% params.PARK_POS|upper)}
	{% endif %}
	{% endif %}
	{% if params.PARK_TIME %}
	{% if params.PARK_TIME|float >= 0.0 %}
	{% set _dummy = tl.park.update({'time':params.PARK_TIME|float|round(3)}) %}
	{% else %}
	{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"
	{% if params.TRAVEL_SPEED %}
	{% if params.TRAVEL_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'travel':params.TRAVEL_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_SPEED %}
	{% if params.RETRACT_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'retract':params.RETRACT_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.EXTRUDE_SPEED %}
	{% if params.EXTRUDE_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'extrude':params.EXTRUDE_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"
	{% if params.EXTRUDE_DISTANCE %}
	{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'extrude':params.EXTRUDE_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_DISTANCE %}
	{% if params.RETRACT_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'retract':params.RETRACT_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.FW_RETRACT %}
	{% if params.FW_RETRACT|lower is in ['true', 'false'] %}
	{% if 'firmware_retraction' in printer.configfile.settings %}
	{% set _dummy = tl.extruder.update({'fw_retract': True if params.FW_RETRACT|lower == 'true' else False}) %}
	{% else %}
	{% set _dummy = tl.extruder.update({'fw_retract':False}) %}
	{% if params.FW_RETRACT|capitalize == 'True' %}
	{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}
	{% endif %}
	{% endif %}
	{% else %}
	{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"
	{% if printer.configfile.settings['gcode_macro pause'] is defined %}
	{% set _dummy = tl.macro.update({'pause': printer.configfile.settings['gcode_macro pause'].rename_existing}) %}
	{% endif %}
	{% if printer.configfile.settings['gcode_macro resume'] is defined %}
	{% set _dummy = tl.macro.update({'resume': printer.configfile.settings['gcode_macro resume'].rename_existing}) %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"

[gcode_macro TIMELAPSE_TAKE_FRAME]
description = Take Timelapse shoot
variable_enable = False
variable_takingframe = False
variable_park = {'enable': False,
	'pos'   : 'center',
	'time'  : 0.1,
	'custom': {'x': 0, 'y': 0, 'dz': 0},
	'coord' : {'x': 0, 'y': 0, 'dz': 0}}
variable_extruder = {'fw_retract': False,
	'retract': 1.0,
	'extrude': 1.0}
variable_speed = {'travel': 100,
	'retract': 15,
	'extrude': 15}
variable_verbose = True
variable_check_time = 0.5
variable_restore = {'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}
variable_macro = {'pause': 'PAUSE', 'resume': 'RESUME'}
variable_is_paused = False
gcode = 
	{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower =='true' else False %}
	{% if enable %}
	{% if (hyperlapse and printer['gcode_macro HYPERLAPSE'].run) or
	(not hyperlapse and not printer['gcode_macro HYPERLAPSE'].run) %}
	{% if park.enable %}
	{% set pos = {'x': 'X' + park.coord.x|string if park.pos != 'y_only' else '',
	'y': 'Y' + park.coord.y|string if park.pos != 'x_only' else '',
	'z': 'Z'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}
	{% set restore = {'absolute': {'coordinates': printer.gcode_move.absolute_coordinates,
	'extrude'    : printer.gcode_move.absolute_extrude},
	'speed'   : printer.gcode_move.speed,
	'e'       : printer.gcode_move.gcode_position.e,
	'factor'  : {'speed'  : printer.gcode_move.speed_factor,
	'extrude': printer.gcode_move.extrude_factor}} %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}
	{% else %}
	{% if extruder.fw_retract %}
	G10
	{% else %}
	M83
	G0 E-{extruder.retract} F{speed.retract * 60}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True
	{macro.pause}
	SET_GCODE_OFFSET X=0 Y=0
	G90
	{% if "xyz" not in printer.toolhead.homed_axes %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}
	{% else %}
	G0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION={check_time}
	M400
	{% endif %}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}
	{% endif %}
	{% else %}
	{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}
	{% endif %}

[gcode_macro _TIMELAPSE_NEW_FRAME]
description = action call for timelapse shoot. must be a seperate macro
gcode = 
	{action_call_remote_method("timelapse_newframe",
	macropark=printer['gcode_macro TIMELAPSE_TAKE_FRAME'].park,
	hyperlapse=params.HYPERLAPSE)}

[delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME]
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set factor = {'speed': printer.gcode_move.speed_factor, 'extrude': printer.gcode_move.extrude_factor} %}
	{% if tl.takingframe %}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION={tl.check_time}
	{% else %}
	{tl.macro.resume} VELOCITY={tl.speed.travel}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}
	{% else %}
	{% if tl.extruder.fw_retract %}
	G11
	{% else %}
	G0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}
	G0 F{tl.restore.speed}
	{% if tl.restore.absolute.extrude %}
	M82
	G92 E{tl.restore.e}
	{% endif %}
	{% endif %}
	{% endif %}
	{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}
	{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}
	{% if not tl.restore.absolute.coordinates %} G91 {% endif %}
	{% endif %}

[gcode_macro HYPERLAPSE]
description = Start/Stop a hyperlapse recording
variable_cycle = 0
variable_run = False
gcode = 
	{% set cycle = params.CYCLE|default(30)|int %}
	{% if params.ACTION and params.ACTION|lower == 'start' %}
	{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True
	{% elif params.ACTION and params.ACTION|lower == 'stop' %}
	{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0
	{% else %}
	{action_raise_error("Hyperlapse: No valid input parameter
	Use:
	- HYPERLAPSE ACTION=START [CYCLE=time]
	- HYPERLAPSE ACTION=STOP")}
	{% endif %}

[delayed_gcode _HYPERLAPSE_LOOP]
gcode = 
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True

[gcode_macro TIMELAPSE_RENDER]
description = Render Timelapse video and wait for the result
variable_render = False
variable_run_identifier = 0
gcode = 
	{action_respond_info("Timelapse: Rendering started")}
	{action_call_remote_method("timelapse_render", byrendermacro="True")}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True
	{printer.configfile.settings['gcode_macro pause'].rename_existing}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5

[delayed_gcode _WAIT_TIMELAPSE_RENDER]
gcode = 
	{% set ri = printer['gcode_macro TIMELAPSE_RENDER'].run_identifier % 4 %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}
	{% if printer['gcode_macro TIMELAPSE_RENDER'].render %}
	M117 Rendering {['-','\\','|','/'][ri]}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5
	{% else %}
	{action_respond_info("Timelapse: Rendering finished")}
	M117
	{printer.configfile.settings['gcode_macro resume'].rename_existing}
	{% endif %}

[gcode_macro TEST_STREAM_DELAY]
description = Helper macro to find stream and park delay
gcode = 
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set act = printer.toolhead.position %}
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% if act.z > 5.0 %}
	G0 X{min.x + 5.0} F{tl.speed.travel|int * 60}
	G0 X{(max.x-min.x)/2}
	G4 P{tl.park.time|float * 1000}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE
	G0 X{max.x - 5.0}
	{% else %}
	{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}
	{% endif %}

[neopixel sb_leds]
pin = PA8
chain_count = 10
color_order = GRB
initial_red = 1.0
initial_green = 0.0
initial_blue = 1.0

[led_effect sb_logo_busy]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (1,0,0)

[led_effect sb_logo_cleaning]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.0, 0.02, 0.5)

[led_effect sb_logo_calibrating_z]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.0, 0.0, 0.35)

[led_effect sb_logo_heating]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (1, 0.18, 0)

[led_effect sb_logo_cooling]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0, 0, 1)

[led_effect sb_logo_homing]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.0, 0.6, 0.2)

[led_effect sb_logo_leveling]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.5, 0.1, 0.4)

[led_effect sb_logo_meshing]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.5, 1.0, 0.0)

[led_effect sb_logo_printing]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	static 3 1 add (1.0, 1.0, 1.0)

[led_effect sb_logo_standby]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.01, 0.01, 0.01)

[led_effect sb_logo_part_ready]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.0, 1.0, 0.0)

[led_effect sb_nozzle_heating]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	breathing 3 1 top (1.0, 0.18, 0.0)

[led_effect sb_nozzle_cooling]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	breathing 3 1 top (0.1, 0.1, 1.0)

[led_effect sb_nozzle_standby]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	breathing 3 1 top (0.6, 0.0, 0.0)

[led_effect sb_nozzle_printing]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	static 3 1 top (1.0, 1.0, 1.0)

[led_effect sb_nozzle_part_ready]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	breathing 3 1 top (0.6, 1.0, 0.1)

[led_effect sb_critical_error]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds
layers = 
	strobe 1 1.5 add (1.0, 1.0, 1.0)
	breathing 2 0 difference (0.95, 0.0, 0.0)
	static 1 0 top (1.0, 0.0, 0.0)
run_on_error = true

[led_effect rainbow]
autostart = true
frame_rate = 24
leds = 
	neopixel:sb_leds
layers = 
	gradient 0.3 1 add (0.3, 0.0, 0.0),(0.0, 9.3, 0.0),(0.0, 0.0, 0.3)

[led_effect set_nozzle_leds]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	static 0 0 top (1.0, 1.0, 1.0)

[led_effect set_logo_leds]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	static 0 0 top (1.0, 1.0, 1.0)

[gcode_macro set_logo_leds_off]
gcode = 
	SET_LED_EFFECT EFFECT=set_logo_leds STOP=1

[gcode_macro set_logo_leds_on]
gcode = 
	SET_LED_EFFECT EFFECT=set_logo_leds

[gcode_macro set_nozzle_leds_on]
gcode = 
	SET_LED_EFFECT EFFECT=set_nozzle_leds

[gcode_macro set_nozzle_leds_off]
gcode = 
	SET_LED_EFFECT EFFECT=set_nozzle_leds STOP=1

[gcode_macro status_off]
gcode = 
	STOP_LED_EFFECTS

[gcode_macro status_ready]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=rainbow

[gcode_macro status_part_ready]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_nozzle_part_ready
	SET_LED_EFFECT EFFECT=sb_logo_part_ready

[gcode_macro status_busy]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_nozzle_part_ready
	SET_LED_EFFECT EFFECT=sb_logo_part_ready

[gcode_macro status_heating]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_heating
	SET_LED_EFFECT EFFECT=sb_nozzle_heating

[gcode_macro status_cooling]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_cooling
	SET_LED_EFFECT EFFECT=sb_nozzle_cooling

[gcode_macro status_leveling]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_leveling
	set_nozzle_leds_on

[gcode_macro status_homing]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_homing
	set_nozzle_leds_on

[gcode_macro status_cleaning]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_cleaning
	set_nozzle_leds_on

[gcode_macro status_meshing]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_meshing
	set_nozzle_leds_on

[gcode_macro status_calibrating_z]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_calibrating_z
	set_nozzle_leds_on

[gcode_macro status_printing]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_printing
	SET_LED_EFFECT EFFECT=sb_nozzle_printing

[gcode_macro _bot_data]
variable_lapse_video_size = 0
variable_lapse_filename = 'None'
variable_lapse_path = 'None'
gcode = 
	M118 Setting bot lapse variables

[menu __main __octoprint]
type = list
name = Klipper

[menu __main __octoprint __pause]
type = command
enable = {printer.idle_timeout.state == "Printing"}
name = Pause printing
gcode = 
	PAUSE

[menu __main __octoprint __resume]
type = command
enable = {not printer.idle_timeout.state == "Printing"}
name = Resume printing
gcode = 
	RESUME

[menu __main __octoprint __abort]
type = command
enable = {printer.idle_timeout.state == "Printing"}
name = Abort printing
gcode = 
	CANCEL_PRINT

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.8
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 10
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro BED_MESH_CALIBRATE]
rename_existing = _BED_MESH_CALIBRATE
gcode = 
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set bed_mesh_min = printer.configfile.settings.bed_mesh.mesh_min %}
	{% set bed_mesh_max = printer.configfile.settings.bed_mesh.mesh_max %}
	{% set probe_count = printer.configfile.settings.bed_mesh.probe_count %}
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set probe_dock_enable = kamp_settings.probe_dock_enable | abs %}
	{% set attach_macro = kamp_settings.attach_macro | string %}
	{% set detach_macro = kamp_settings.detach_macro | string %}
	{% set mesh_margin = kamp_settings.mesh_margin | float %}
	{% set fuzz_amount = kamp_settings.fuzz_amount | float %}
	{% set probe_count = probe_count if probe_count|length > 1 else probe_count * 2  %}
	{% set max_probe_point_distance_x = ( bed_mesh_max[0] - bed_mesh_min[0] ) / (probe_count[0] - 1)  %}
	{% set max_probe_point_distance_y = ( bed_mesh_max[1] - bed_mesh_min[1] ) / (probe_count[1] - 1)  %}
	{% set x_min = all_points | map(attribute=0) | min | default(bed_mesh_min[0]) %}
	{% set y_min = all_points | map(attribute=1) | min | default(bed_mesh_min[1]) %}
	{% set x_max = all_points | map(attribute=0) | max | default(bed_mesh_max[0]) %}
	{% set y_max = all_points | map(attribute=1) | max | default(bed_mesh_max[1]) %}
	
	{% set fuzz_range = range((0) | int, (fuzz_amount * 100) | int + 1) %}
	{% set adapted_x_min = x_min - mesh_margin - (fuzz_range | random / 100.0) %}
	{% set adapted_y_min = y_min - mesh_margin - (fuzz_range | random / 100.0) %}
	{% set adapted_x_max = x_max + mesh_margin + (fuzz_range | random / 100.0) %}
	{% set adapted_y_max = y_max + mesh_margin + (fuzz_range | random / 100.0) %}
	
	{% set adapted_x_min = [adapted_x_min , bed_mesh_min[0]] | max %}
	{% set adapted_y_min = [adapted_y_min , bed_mesh_min[1]] | max %}
	{% set adapted_x_max = [adapted_x_max , bed_mesh_max[0]] | min %}
	{% set adapted_y_max = [adapted_y_max , bed_mesh_max[1]] | min %}
	
	{% set points_x = (((adapted_x_max - adapted_x_min) / max_probe_point_distance_x) | round(method='ceil') | int) + 1 %}
	{% set points_y = (((adapted_y_max - adapted_y_min) / max_probe_point_distance_y) | round(method='ceil') | int) + 1 %}
	
	{% if (([points_x, points_y]|max) > 6) %}
	{% set algorithm = "bicubic" %}
	{% set min_points = 4 %}
	{% else %}
	{% set algorithm = "lagrange" %}
	{% set min_points = 3 %}
	{% endif %}
	
	{% set points_x = [points_x , min_points]|max %}
	{% set points_y = [points_y , min_points]|max %}
	{% set points_x = [points_x , probe_count[0]]|min %}
	{% set points_y = [points_y , probe_count[1]]|min %}
	
	{% if verbose_enable == True %}
	{% if printer.exclude_object.objects != [] %}
	
	{ action_respond_info( "Algorithm: {}.".format(
	(algorithm),
	)) }
	
	{ action_respond_info("Default probe count: {},{}.".format(
	(probe_count[0]),
	(probe_count[1]),
	)) }
	
	{ action_respond_info("Adapted probe count: {},{}.".format(
	(points_x),
	(points_y),
	)) }
	
	{action_respond_info("Default mesh bounds: {}, {}.".format(
	(bed_mesh_min[0],bed_mesh_min[1]),
	(bed_mesh_max[0],bed_mesh_max[1]),
	)) }
	
	{% if mesh_margin > 0 %}
	{action_respond_info("Mesh margin is {}, mesh bounds extended by {}mm.".format(
	(mesh_margin),
	(mesh_margin),
	)) }
	{% else %}
	{action_respond_info("Mesh margin is 0, margin not increased.")}
	{% endif %}
	
	{% if fuzz_amount > 0 %}
	{action_respond_info("Mesh point fuzzing enabled, points fuzzed up to {}mm.".format(
	(fuzz_amount),
	)) }
	{% else %}
	{action_respond_info("Fuzz amount is 0, mesh points not fuzzed.")}
	{% endif %}
	
	{ action_respond_info("Adapted mesh bounds: {}, {}.".format(
	(adapted_x_min, adapted_y_min),
	(adapted_x_max, adapted_y_max),
	)) }
	
	{action_respond_info("KAMP adjustments successful. Happy KAMPing!")}
	
	{% else %}
	
	{action_respond_info("No objects detected! Check your gcode and make sure that EXCLUDE_OBJECT_DEFINE is happening before BED_MESH_CALIBRATE is called. Defaulting to regular meshing.")}
	G4 P5000
	{% endif %}
	
	{% endif %}
	
	{% if probe_dock_enable == True %}
	{attach_macro}
	{% endif %}
	
	_BED_MESH_CALIBRATE mesh_min={adapted_x_min},{adapted_y_min} mesh_max={adapted_x_max},{adapted_y_max} ALGORITHM={algorithm} PROBE_COUNT={points_x},{points_y}
	
	{% if probe_dock_enable == True %}
	{detach_macro}
	{% endif %}

[gcode_macro LINE_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = (printer.toolhead.max_velocity) * 60 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set verbose_enable = printer["gcode_macro _KAMP_Settings"].verbose_enable | abs %}
	{% set purge_height = printer["gcode_macro _KAMP_Settings"].purge_height | float %}
	{% set tip_distance = printer["gcode_macro _KAMP_Settings"].tip_distance | float %}
	{% set purge_margin = printer["gcode_macro _KAMP_Settings"].purge_margin | float %}
	{% set purge_amount = printer["gcode_macro _KAMP_Settings"].purge_amount | float %}
	{% set flow_rate = printer["gcode_macro _KAMP_Settings"].flow_rate | float %}
	
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	{% if purge_y_origin > 0 %}
	
	{action_respond_info("KAMP purge starting at {}, {} and purging {}mm of filament, requested flow rate is {}mm3/s.".format(
	(purge_x_center),
	(purge_y_origin),
	(purge_amount),
	(flow_rate),
	)) }
	
	{% else %}
	
	{action_respond_info("KAMP purge starting at {}, {} and purging {}mm of filament, requested flow rate is {}mm3/s.".format(
	(purge_x_origin),
	(purge_y_center),
	(purge_amount),
	(flow_rate),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	{% if purge_y_origin > 0 %}
	
	G92 E0
	G0 F{travel_speed}
	G90
	G0 X{purge_x_center} Y{purge_y_origin}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_center + purge_amount} E{purge_amount} F{purge_move_speed}
	{RETRACT}
	G0 X{purge_x_center + purge_amount + 10} F{travel_speed}
	G92 E0
	M82
	G0 Z{purge_height * 2} F{travel_speed}
	
	{% else %}
	
	G92 E0
	G0 F{travel_speed}
	G90
	G0 X{purge_x_origin} Y{purge_y_center}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 Y{purge_y_center + purge_amount} E{purge_amount} F{purge_move_speed}
	{RETRACT}
	G0 Y{purge_y_center + purge_amount + 10} F{travel_speed}
	G92 E0
	M82
	G0 Z{purge_height * 2} F{travel_speed}
	
	{% endif %}
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = (printer.toolhead.max_velocity) * 60 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Presmartpark_State
	
	G90
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F{travel_speed}
	G0 Z{z_height}
	
	RESTORE_GCODE_STATE NAME=Presmartpark_State

[exclude_object]

[stepper_x]
step_pin = PB13
dir_pin = !PB12
enable_pin = !PB14
microsteps = 64
rotation_distance = 40
endstop_pin = ^PC0
position_endstop = -27
position_min = -27
position_max = 230
homing_speed = 80

[tmc2209 stepper_x]
uart_pin = PC11
tx_pin = PC10
uart_address = 0
run_current = 0.580
stealthchop_threshold = 999999

[stepper_y]
step_pin = PB10
dir_pin = !PB2
enable_pin = !PB11
microsteps = 64
rotation_distance = 40
endstop_pin = ^PC1
position_endstop = -11
position_min = -11
position_max = 220
homing_speed = 80

[tmc2209 stepper_y]
uart_pin = PC11
tx_pin = PC10
uart_address = 2
run_current = 0.580
stealthchop_threshold = 999999

[stepper_z]
step_pin = PB0
dir_pin = PC5
enable_pin = !PB1
microsteps = 64
rotation_distance = 2
endstop_pin = probe:z_virtual_endstop
position_min = -5
position_max = 250

[tmc2209 stepper_z]
uart_pin = PC11
tx_pin = PC10
uart_address = 1
run_current = 0.580
stealthchop_threshold = 999999

[safe_z_home]
home_xy_position = 149, 120
speed = 80
z_hop = 10
z_hop_speed = 5

[extruder]
max_extrude_only_distance = 350.0
max_extrude_cross_section = 5
step_pin = PB3
dir_pin = !PB4
enable_pin = !PD1
microsteps = 64
rotation_distance = 22.110
nozzle_diameter = 0.600
filament_diameter = 1.750
heater_pin = PC8
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PA0
min_temp = 0
max_temp = 250
control = pid
pid_kp = 23.249
pid_ki = 1.336
pid_kd = 101.134

[tmc2209 extruder]
uart_pin = PC11
tx_pin = PC10
uart_address = 3
run_current = 0.650
stealthchop_threshold = 999999

[heater_bed]
heater_pin = PC9
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PC4
min_temp = 0
max_temp = 130
control = pid
pid_kp = 69.714
pid_ki = 1.260
pid_kd = 964.661

[heater_fan heatbreak_cooling_fan]
pin = PB15
heater = extruder
heater_temp = 50

[controller_fan controller_fan]
pin = PC7
idle_timeout = 60

[fan]
pin = PC6

[mcu]
serial = /dev/ttyS0
restart_method = command
baud = 115200

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 3000
max_z_velocity = 5
max_z_accel = 100

[bltouch]
sensor_pin = ^PC14
control_pin = PA1
x_offset = -39
y_offset = -10
probe_with_touch_mode = True
pin_up_touch_mode_reports_triggered = True
stow_on_each_sample = False
z_offset = 2.220

[display]
lcd_type = uc1701
cs_pin = PB8
a0_pin = PD6
rst_pin = PB9
encoder_pins = ^PA9, ^PA10
click_pin = ^!PB5
contrast = 63
spi_software_sclk_pin = PA5
spi_software_mosi_pin = PA7
spi_software_miso_pin = PA6

[neopixel SKR_screen]
pin = PA15
chain_count = 3
initial_red = 0.4
initial_green = 0.05
initial_blue = 0.0
color_order = RGB

[delayed_gcode welcome]
initial_duration = .0
gcode = 
	SET_LED LED=SKR_screen RED=0.5 GREEN=0.0 BLUE=0.0 TRANSMIT=0
	SET_LED LED=SKR_screen RED=0.0 GREEN=0.0 BLUE=0.5 INDEX=1 TRANSMIT=1

[output_pin relay]
pin = PC13
value = 1
shutdown_value = 0

[board_pins]
aliases = 
	
	EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8, EXP1_9=<GND>,
	EXP1_2=PA15, EXP1_4=<RST>, EXP1_6=PB9,  EXP1_8=PD6, EXP1_10=<5V>

[bed_screws]
screw1 = 23, 24
screw2 = 191, 24
screw3 = 191, 195
screw4 = 23, 195

[screws_tilt_adjust]
screw1 = 62, 34
screw1_name = front left screw
screw2 = 230, 34
screw2_name = front right screw
screw3 = 230, 205
screw3_name = rear left screw
screw4 = 62, 205
screw4_name = rear right screw
horizontal_move_z = 10
speed = 50
screw_thread = CW-M4

[bed_mesh]
speed = 120
horizontal_move_z = 5
mesh_min = 15, 15
mesh_max = 190, 198
probe_count = 6, 6
algorithm = bicubic
bicubic_tension = 0.2
move_check_distance = 6
split_delta_z = .025

[gcode_arcs]

[firmware_retraction]

[gcode_macro M300]
description = Beeper macro
gcode = 
	SET_PIN PIN=beeper Value=1
	G4 P{params.P|default(150)|int}
	SET_PIN PIN=beeper Value=0

[gcode_macro BEEP]
gcode = 
	M300 P100

[gcode_macro BEEP_TWICE]
gcode = 
	M300 P100
	M300 P100

[gcode_macro BEEP_LONG]
gcode = 
	M300 P500

[gcode_macro Heat_to_remove]
gcode = 
	STATUS_HEATING
	M140 S60
	M117 Heating bed to remove print...
	BEEP
	M190 S60
	BEEP_TWICE
	M117 Done heating!!!

[gcode_macro START_PRINT]
gcode = 
	BEEP
	G92 E0
	G28
	STATUS_HEATING
	M104 S{180}
	M140 S{50}
	M190 S{50}
	BED_MESH_CALIBRATE
	
	SMART_PARK
	M104 S{params.EXTRUDER_TEMP}
	M140 S{params.BED_TEMP}
	STATUS_HEATING
	M190 S{params.BED_TEMP}
	LINE_PURGE
	STATUS_PRINTING
	G92 E0
	G1 Z2.0 F3000
	G1 X5 Y20 Z0.3 F5000.0
	M117 Printing...

[gcode_macro END_PRINT]
gcode = 
	BEEP_TWICE
	G91
	G1 E-5 F2700
	G1 E-2 Z0.2 F2400
	G1 X5 Y5 F3000
	G1 Z10
	G90
	G1 X0 Y210
	M106 S0
	M104 S0
	M140 S0
	M84 X Y E
	BED_MESH_CLEAR
	STATUS_PART_READY
	M117 Done!!!

[gcode_macro PURGE]
gcode = 
	M117 PURGING...
	G91
	G1 E45.0 F250
	G90

[gcode_macro LOAD_FILAMENT]
gcode = 
	{% set speed = params.SPEED|default(300) %}
	{% set max_velocity = printer.configfile.settings['extruder'].max_extrude_only_velocity %}
	SAVE_GCODE_STATE NAME = load_state
	G91
	G92 E0
	G1 E350 F{max_velocity}
	G1 E25 F{speed}
	BEEP_TWICE
	RESTORE_GCODE_STATE NAME = load_state

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	{% set speed = params.SPEED|default(300) %}
	{% set max_velocity = printer.configfile.settings['extruder'].max_extrude_only_velocity %}
	SAVE_GCODE_STATE NAME = unload_state
	G91
	BEEP
	G92 E0
	G1 E25 F{speed}
	G1 E-350 F{max_velocity}
	BEEP_TWICE
	RESTORE_GCODE_STATE NAME = unload_state

[gcode_macro T0]
gcode = 

[bed_mesh default]
version = 1
points = 
	0.076562, 0.072656, 0.074844
	0.053906, 0.051875, 0.050781
	0.084219, 0.085312, 0.091094
x_count = 3
y_count = 3
mesh_x_pps = 2
mesh_y_pps = 2
algo = lagrange
tension = 0.2
min_x = 106.97
max_x = 113.03
min_y = 97.3
max_y = 122.69999999999999
=======================
Declaration of '__main __octoprint' hides previous menuitem declaration
Declaration of '__main __octoprint __pause' hides previous menuitem declaration
Declaration of '__main __octoprint __resume' hides previous menuitem declaration
Declaration of '__main __octoprint __abort' hides previous menuitem declaration
Extruder max_extrude_ratio=2.078758
mcu 'mcu': Starting serial connect
webhooks client 281473062754096: New connection
webhooks client 281473062754096: Client info {'program': 'Moonraker', 'version': 'v0.8.0-324-ga3e4dac'}
Loaded MCU 'mcu' 106 commands (v0.12.0-138-g5e280680 / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1_PA9_PA10=PA9,PA10 BUS_PINS_i2c1_PB6_PB7=PB6,PB7 BUS_PINS_i2c1_PB8_PB9=PB8,PB9 BUS_PINS_i2c2_PB10_PB11=PB10,PB11 BUS_PINS_i2c2_PB13_PB14=PB13,PB14 BUS_PINS_i2c3_PB3_PB4=PB3,PB4 BUS_PINS_i2c3_PC0_PC1=PC0,PC1 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3=PB4,PB5,PB3 CLOCK_FREQ=64000000 MCU=stm32g0b1xx PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_crystal=PF0,PF1 RESERVE_PINS_serial=PA3,PA2 SERIAL_BAUD=115200 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Sending MCU 'mcu' printer configuration...
Configured MCU 'mcu' (1024 moves)
Starting heater checks for heater_bed
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (54.0, 25.0)    | (15.0, 15.0)
  1   | (89.0, 25.0)    | (50.0, 15.0)
  2   | (124.0, 25.0)   | (85.0, 15.0)
  3   | (159.0, 25.0)   | (120.0, 15.0)
  4   | (194.0, 25.0)   | (155.0, 15.0)
  5   | (229.0, 25.0)   | (190.0, 15.0)
  6   | (229.0, 61.6)   | (190.0, 51.6)
  7   | (194.0, 61.6)   | (155.0, 51.6)
  8   | (159.0, 61.6)   | (120.0, 51.6)
  9   | (124.0, 61.6)   | (85.0, 51.6)
  10  | (89.0, 61.6)    | (50.0, 51.6)
  11  | (54.0, 61.6)    | (15.0, 51.6)
  12  | (54.0, 98.2)    | (15.0, 88.2)
  13  | (89.0, 98.2)    | (50.0, 88.2)
  14  | (124.0, 98.2)   | (85.0, 88.2)
  15  | (159.0, 98.2)   | (120.0, 88.2)
  16  | (194.0, 98.2)   | (155.0, 88.2)
  17  | (229.0, 98.2)   | (190.0, 88.2)
  18  | (229.0, 134.8)  | (190.0, 124.8)
  19  | (194.0, 134.8)  | (155.0, 124.8)
  20  | (159.0, 134.8)  | (120.0, 124.8)
  21  | (124.0, 134.8)  | (85.0, 124.8)
  22  | (89.0, 134.8)   | (50.0, 124.8)
  23  | (54.0, 134.8)   | (15.0, 124.8)
  24  | (54.0, 171.4)   | (15.0, 161.4)
  25  | (89.0, 171.4)   | (50.0, 161.4)
  26  | (124.0, 171.4)  | (85.0, 161.4)
  27  | (159.0, 171.4)  | (120.0, 161.4)
  28  | (194.0, 171.4)  | (155.0, 161.4)
  29  | (229.0, 171.4)  | (190.0, 161.4)
  30  | (229.0, 208.0)  | (190.0, 198.0)
  31  | (194.0, 208.0)  | (155.0, 198.0)
  32  | (159.0, 208.0)  | (120.0, 198.0)
  33  | (124.0, 208.0)  | (85.0, 198.0)
  34  | (89.0, 208.0)   | (50.0, 198.0)
  35  | (54.0, 208.0)   | (15.0, 198.0)
Starting heater checks for extruder
Stats 32.7: gcodein=0  mcu: mcu_awake=0.011 mcu_task_avg=0.000036 mcu_task_stddev=0.000045 bytes_write=2535 bytes_read=5820 bytes_retransmit=9 bytes_invalid=0 send_seq=202 receive_seq=202 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=3214 freq=63999857  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=3.62 cputime=7.972 memavail=688952 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
webhooks: registering remote method 'shutdown_machine' for connection id: 281473062754096
webhooks: registering remote method 'reboot_machine' for connection id: 281473062754096
webhooks: registering remote method 'pause_job_queue' for connection id: 281473062754096
webhooks: registering remote method 'start_job_queue' for connection id: 281473062754096
webhooks: registering remote method 'set_device_power' for connection id: 281473062754096
Stats 33.7: gcodein=0  mcu: mcu_awake=0.011 mcu_task_avg=0.000036 mcu_task_stddev=0.000045 bytes_write=6895 bytes_read=6570 bytes_retransmit=9 bytes_invalid=0 send_seq=295 receive_seq=295 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999956  heater_bed: target=0 temp=23.6 pwm=0.000 sysload=3.62 cputime=8.163 memavail=677916 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 34.7: gcodein=0  mcu: mcu_awake=0.011 mcu_task_avg=0.000036 mcu_task_stddev=0.000045 bytes_write=8030 bytes_read=7149 bytes_retransmit=9 bytes_invalid=0 send_seq=346 receive_seq=346 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=22 upcoming_bytes=0 freq=63999510  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=3.62 cputime=8.318 memavail=674168 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.5 pwm=0.000
Stats 35.7: gcodein=0  mcu: mcu_awake=0.011 mcu_task_avg=0.000036 mcu_task_stddev=0.000045 bytes_write=9171 bytes_read=7723 bytes_retransmit=9 bytes_invalid=0 send_seq=396 receive_seq=396 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999232  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=3.49 cputime=8.436 memavail=675360 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.6 pwm=0.000
Stats 36.7: gcodein=0  mcu: mcu_awake=0.011 mcu_task_avg=0.000036 mcu_task_stddev=0.000045 bytes_write=10310 bytes_read=8295 bytes_retransmit=9 bytes_invalid=0 send_seq=447 receive_seq=447 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999175  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=3.49 cputime=8.546 memavail=670072 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 37.7: gcodein=0  mcu: mcu_awake=0.083 mcu_task_avg=0.000184 mcu_task_stddev=0.000209 bytes_write=11425 bytes_read=8907 bytes_retransmit=9 bytes_invalid=0 send_seq=498 receive_seq=498 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999053  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=3.49 cputime=8.667 memavail=664888 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 38.7: gcodein=0  mcu: mcu_awake=0.083 mcu_task_avg=0.000184 mcu_task_stddev=0.000209 bytes_write=12624 bytes_read=9538 bytes_retransmit=9 bytes_invalid=0 send_seq=553 receive_seq=553 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999059  heater_bed: target=0 temp=23.6 pwm=0.000 sysload=3.49 cputime=8.789 memavail=660068 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.4 pwm=0.000
Stats 39.7: gcodein=0  mcu: mcu_awake=0.083 mcu_task_avg=0.000184 mcu_task_stddev=0.000209 bytes_write=13757 bytes_read=10115 bytes_retransmit=9 bytes_invalid=0 send_seq=605 receive_seq=605 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=22 upcoming_bytes=0 freq=63999041  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=3.49 cputime=8.894 memavail=658168 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.4 pwm=0.000
Stats 40.7: gcodein=0  mcu: mcu_awake=0.083 mcu_task_avg=0.000184 mcu_task_stddev=0.000209 bytes_write=14882 bytes_read=10702 bytes_retransmit=9 bytes_invalid=0 send_seq=656 receive_seq=656 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999025  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=3.37 cputime=9.006 memavail=657444 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 41.7: gcodein=0  mcu: mcu_awake=0.083 mcu_task_avg=0.000184 mcu_task_stddev=0.000209 bytes_write=16085 bytes_read=11354 bytes_retransmit=9 bytes_invalid=0 send_seq=712 receive_seq=712 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999013  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=3.37 cputime=9.141 memavail=657496 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 42.7: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000165 mcu_task_stddev=0.000171 bytes_write=17219 bytes_read=11969 bytes_retransmit=9 bytes_invalid=0 send_seq=765 receive_seq=765 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63998984  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=3.37 cputime=9.242 memavail=657496 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 43.7: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000165 mcu_task_stddev=0.000171 bytes_write=18375 bytes_read=12587 bytes_retransmit=9 bytes_invalid=0 send_seq=819 receive_seq=819 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63998987  heater_bed: target=0 temp=23.5 pwm=0.000 sysload=3.37 cputime=9.342 memavail=657252 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.5 pwm=0.000
Stats 44.7: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000165 mcu_task_stddev=0.000171 bytes_write=19549 bytes_read=13192 bytes_retransmit=9 bytes_invalid=0 send_seq=873 receive_seq=872 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999013  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=3.37 cputime=9.462 memavail=657280 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.4 pwm=0.000
Stats 45.7: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000165 mcu_task_stddev=0.000171 bytes_write=20669 bytes_read=13759 bytes_retransmit=9 bytes_invalid=0 send_seq=922 receive_seq=922 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999023  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=3.18 cputime=9.558 memavail=657280 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.4 pwm=0.000
Stats 46.7: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000165 mcu_task_stddev=0.000171 bytes_write=21809 bytes_read=14325 bytes_retransmit=9 bytes_invalid=0 send_seq=973 receive_seq=972 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999017  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=3.18 cputime=9.698 memavail=656776 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 47.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000163 mcu_task_stddev=0.000173 bytes_write=22893 bytes_read=14906 bytes_retransmit=9 bytes_invalid=0 send_seq=1021 receive_seq=1021 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999049  heater_bed: target=0 temp=23.5 pwm=0.000 sysload=3.18 cputime=9.857 memavail=656300 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.4 pwm=0.000
Stats 48.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000163 mcu_task_stddev=0.000173 bytes_write=24084 bytes_read=15504 bytes_retransmit=9 bytes_invalid=0 send_seq=1074 receive_seq=1074 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999052  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=3.18 cputime=9.961 memavail=656300 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.4 pwm=0.000
Stats 49.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000163 mcu_task_stddev=0.000173 bytes_write=25196 bytes_read=16075 bytes_retransmit=9 bytes_invalid=0 send_seq=1125 receive_seq=1124 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999052  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=3.18 cputime=10.107 memavail=655544 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.5 pwm=0.000
Stats 50.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000163 mcu_task_stddev=0.000173 bytes_write=26351 bytes_read=16696 bytes_retransmit=9 bytes_invalid=0 send_seq=1178 receive_seq=1178 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999063  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=3.08 cputime=10.281 memavail=655552 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.5 pwm=0.000
Stats 51.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000163 mcu_task_stddev=0.000173 bytes_write=27488 bytes_read=17268 bytes_retransmit=9 bytes_invalid=0 send_seq=1229 receive_seq=1229 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=23 upcoming_bytes=0 freq=63999059  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=3.08 cputime=10.390 memavail=655556 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.4 pwm=0.000
Stats 52.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000163 mcu_task_stddev=0.000172 bytes_write=28650 bytes_read=17898 bytes_retransmit=9 bytes_invalid=0 send_seq=1282 receive_seq=1282 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999062  heater_bed: target=0 temp=23.7 pwm=0.000 sysload=3.08 cputime=10.492 memavail=655304 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.5 pwm=0.000
Stats 53.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000163 mcu_task_stddev=0.000172 bytes_write=29793 bytes_read=18490 bytes_retransmit=9 bytes_invalid=0 send_seq=1334 receive_seq=1334 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999066  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=3.08 cputime=10.609 memavail=654804 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 54.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000163 mcu_task_stddev=0.000172 bytes_write=30903 bytes_read=19057 bytes_retransmit=9 bytes_invalid=0 send_seq=1384 receive_seq=1384 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999069  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=3.08 cputime=10.712 memavail=653796 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 55.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000163 mcu_task_stddev=0.000172 bytes_write=32110 bytes_read=19709 bytes_retransmit=9 bytes_invalid=0 send_seq=1440 receive_seq=1440 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999067  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=3.08 cputime=10.836 memavail=653796 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 56.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000163 mcu_task_stddev=0.000172 bytes_write=33270 bytes_read=20314 bytes_retransmit=9 bytes_invalid=0 send_seq=1493 receive_seq=1493 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=2 upcoming_bytes=0 freq=63999069  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=3.08 cputime=10.937 memavail=653796 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 671.1: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000172 bytes_write=740177 bytes_read=390105 bytes_retransmit=9 bytes_invalid=0 send_seq=33736 receive_seq=33736 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=2 upcoming_bytes=0 freq=63999171  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.74 cputime=84.857 memavail=646396 print_time=673.857 buffer_time=0.154 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Attempting MCU 'mcu' reset command
webhooks client 281473062754096: Disconnected
Restarting printer
Start printer at Thu Apr  4 01:59:30 2024 (1712217570.7 672.5)
===== Config file =====
[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]
default_type = echo

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% if printer.pause_resume.is_paused|lower == 'false' and park|lower == 'true'%}
	_TOOLHEAD_PARK_PAUSE_CANCEL
	{% endif %}
	TURN_OFF_HEATERS
	CANCEL_PRINT_BASE
variable_park = True

[gcode_macro PAUSE]
description = Pause actual running print
rename_existing = PAUSE_BASE
gcode = 
	PAUSE_BASE
	STATUS_BUSY
	_TOOLHEAD_PARK_PAUSE_CANCEL

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set extrude = printer['gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL'].extrude %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY) %}
	{%else %}
	{% set get_params = " " %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E{extrude} F2100
	{% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	{% set z_park_delta = 10.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - z_park_delta) %}
	{% set z_safe = z_park_delta %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E-{extrude} F2100
	{% if printer.gcode_move.absolute_extrude|lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G91
	G1 Z{z_safe} F900
	G90
	G1 X{x_park} Y{y_park} F6000
	{% if printer.gcode_move.absolute_coordinates|lower == 'false' %} G91 {% endif %}
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}
variable_extrude = 1.0

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro GET_TIMELAPSE_SETUP]
description = Print the Timelapse setup
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set output_txt = ["Timelapse Setup:"] %}
	{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}
	{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}
	{% if tl.park.enable %}
	{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}
	{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}
	{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}
	{% endif %}
	{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}
	{% if not tl.extruder.fw_retract %}
	{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}
	{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}
	{% endif %}
	{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}
	{action_respond_info(output_txt|join("\n"))}

[gcode_macro _SET_TIMELAPSE_SETUP]
description = Set user parameters for timelapse
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	{% set park = {'min'   : {'x': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),
	'y': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},
	'max'   : {'x': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),
	'y': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},
	'center': {'x': (max.x-(max.x-min.x)/2)|round(3),
	'y': (max.y-(max.y-min.y)/2)|round(3)}} %}
	
	{% if params.ENABLE %}
	{% if params.ENABLE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == 'true' else False}
	{% else %}
	{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.VERBOSE %}
	{% if params.VERBOSE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == 'true' else False}
	{% else %}
	{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_X %}
	{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}
	{% set _dummy = tl.park.custom.update({'x':params.CUSTOM_POS_X|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_Y %}
	{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}
	{% set _dummy = tl.park.custom.update({'y':params.CUSTOM_POS_Y|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_DZ %}
	{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}
	{% set _dummy = tl.park.custom.update({'dz':params.CUSTOM_POS_DZ|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}
	{% endif %}
	{% endif %}
	{% if params.PARK_ENABLE %}
	{% if params.PARK_ENABLE|lower is in ['true', 'false'] %}
	{% set _dummy = tl.park.update({'enable':True if params.PARK_ENABLE|lower == 'true' else False}) %}
	{% else %}
	{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.PARK_POS %}
	{% if params.PARK_POS|lower is in ['center','front_left','front_right','back_left','back_right','custom','x_only','y_only'] %}
	{% set dic = {'center'      : {'x': park.center.x   , 'y': park.center.y   , 'dz': 1                },
	'front_left'  : {'x': park.min.x      , 'y': park.min.y      , 'dz': 0                },
	'front_right' : {'x': park.max.x      , 'y': park.min.y      , 'dz': 0                },
	'back_left'   : {'x': park.min.x      , 'y': park.max.y      , 'dz': 0                },
	'back_right'  : {'x': park.max.x      , 'y': park.max.y      , 'dz': 0                },
	'custom'      : {'x': tl.park.custom.x, 'y': tl.park.custom.y, 'dz': tl.park.custom.dz},
	'x_only'      : {'x': tl.park.custom.x, 'y': 'none'          , 'dz': tl.park.custom.dz},
	'y_only'      : {'x': 'none'          , 'y': tl.park.custom.y, 'dz': tl.park.custom.dz}} %}
	{% set _dummy = tl.park.update({'pos':params.PARK_POS|lower}) %}
	{% set _dummy = tl.park.update({'coord':dic[tl.park.pos]}) %}
	{% else %}
	{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"
	% params.PARK_POS|upper)}
	{% endif %}
	{% endif %}
	{% if params.PARK_TIME %}
	{% if params.PARK_TIME|float >= 0.0 %}
	{% set _dummy = tl.park.update({'time':params.PARK_TIME|float|round(3)}) %}
	{% else %}
	{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"
	{% if params.TRAVEL_SPEED %}
	{% if params.TRAVEL_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'travel':params.TRAVEL_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_SPEED %}
	{% if params.RETRACT_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'retract':params.RETRACT_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.EXTRUDE_SPEED %}
	{% if params.EXTRUDE_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'extrude':params.EXTRUDE_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"
	{% if params.EXTRUDE_DISTANCE %}
	{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'extrude':params.EXTRUDE_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_DISTANCE %}
	{% if params.RETRACT_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'retract':params.RETRACT_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.FW_RETRACT %}
	{% if params.FW_RETRACT|lower is in ['true', 'false'] %}
	{% if 'firmware_retraction' in printer.configfile.settings %}
	{% set _dummy = tl.extruder.update({'fw_retract': True if params.FW_RETRACT|lower == 'true' else False}) %}
	{% else %}
	{% set _dummy = tl.extruder.update({'fw_retract':False}) %}
	{% if params.FW_RETRACT|capitalize == 'True' %}
	{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}
	{% endif %}
	{% endif %}
	{% else %}
	{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"
	{% if printer.configfile.settings['gcode_macro pause'] is defined %}
	{% set _dummy = tl.macro.update({'pause': printer.configfile.settings['gcode_macro pause'].rename_existing}) %}
	{% endif %}
	{% if printer.configfile.settings['gcode_macro resume'] is defined %}
	{% set _dummy = tl.macro.update({'resume': printer.configfile.settings['gcode_macro resume'].rename_existing}) %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"

[gcode_macro TIMELAPSE_TAKE_FRAME]
description = Take Timelapse shoot
variable_enable = False
variable_takingframe = False
variable_park = {'enable': False,
	'pos'   : 'center',
	'time'  : 0.1,
	'custom': {'x': 0, 'y': 0, 'dz': 0},
	'coord' : {'x': 0, 'y': 0, 'dz': 0}}
variable_extruder = {'fw_retract': False,
	'retract': 1.0,
	'extrude': 1.0}
variable_speed = {'travel': 100,
	'retract': 15,
	'extrude': 15}
variable_verbose = True
variable_check_time = 0.5
variable_restore = {'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}
variable_macro = {'pause': 'PAUSE', 'resume': 'RESUME'}
variable_is_paused = False
gcode = 
	{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower =='true' else False %}
	{% if enable %}
	{% if (hyperlapse and printer['gcode_macro HYPERLAPSE'].run) or
	(not hyperlapse and not printer['gcode_macro HYPERLAPSE'].run) %}
	{% if park.enable %}
	{% set pos = {'x': 'X' + park.coord.x|string if park.pos != 'y_only' else '',
	'y': 'Y' + park.coord.y|string if park.pos != 'x_only' else '',
	'z': 'Z'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}
	{% set restore = {'absolute': {'coordinates': printer.gcode_move.absolute_coordinates,
	'extrude'    : printer.gcode_move.absolute_extrude},
	'speed'   : printer.gcode_move.speed,
	'e'       : printer.gcode_move.gcode_position.e,
	'factor'  : {'speed'  : printer.gcode_move.speed_factor,
	'extrude': printer.gcode_move.extrude_factor}} %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}
	{% else %}
	{% if extruder.fw_retract %}
	G10
	{% else %}
	M83
	G0 E-{extruder.retract} F{speed.retract * 60}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True
	{macro.pause}
	SET_GCODE_OFFSET X=0 Y=0
	G90
	{% if "xyz" not in printer.toolhead.homed_axes %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}
	{% else %}
	G0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION={check_time}
	M400
	{% endif %}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}
	{% endif %}
	{% else %}
	{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}
	{% endif %}

[gcode_macro _TIMELAPSE_NEW_FRAME]
description = action call for timelapse shoot. must be a seperate macro
gcode = 
	{action_call_remote_method("timelapse_newframe",
	macropark=printer['gcode_macro TIMELAPSE_TAKE_FRAME'].park,
	hyperlapse=params.HYPERLAPSE)}

[delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME]
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set factor = {'speed': printer.gcode_move.speed_factor, 'extrude': printer.gcode_move.extrude_factor} %}
	{% if tl.takingframe %}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION={tl.check_time}
	{% else %}
	{tl.macro.resume} VELOCITY={tl.speed.travel}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}
	{% else %}
	{% if tl.extruder.fw_retract %}
	G11
	{% else %}
	G0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}
	G0 F{tl.restore.speed}
	{% if tl.restore.absolute.extrude %}
	M82
	G92 E{tl.restore.e}
	{% endif %}
	{% endif %}
	{% endif %}
	{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}
	{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}
	{% if not tl.restore.absolute.coordinates %} G91 {% endif %}
	{% endif %}

[gcode_macro HYPERLAPSE]
description = Start/Stop a hyperlapse recording
variable_cycle = 0
variable_run = False
gcode = 
	{% set cycle = params.CYCLE|default(30)|int %}
	{% if params.ACTION and params.ACTION|lower == 'start' %}
	{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True
	{% elif params.ACTION and params.ACTION|lower == 'stop' %}
	{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0
	{% else %}
	{action_raise_error("Hyperlapse: No valid input parameter
	Use:
	- HYPERLAPSE ACTION=START [CYCLE=time]
	- HYPERLAPSE ACTION=STOP")}
	{% endif %}

[delayed_gcode _HYPERLAPSE_LOOP]
gcode = 
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True

[gcode_macro TIMELAPSE_RENDER]
description = Render Timelapse video and wait for the result
variable_render = False
variable_run_identifier = 0
gcode = 
	{action_respond_info("Timelapse: Rendering started")}
	{action_call_remote_method("timelapse_render", byrendermacro="True")}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True
	{printer.configfile.settings['gcode_macro pause'].rename_existing}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5

[delayed_gcode _WAIT_TIMELAPSE_RENDER]
gcode = 
	{% set ri = printer['gcode_macro TIMELAPSE_RENDER'].run_identifier % 4 %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}
	{% if printer['gcode_macro TIMELAPSE_RENDER'].render %}
	M117 Rendering {['-','\\','|','/'][ri]}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5
	{% else %}
	{action_respond_info("Timelapse: Rendering finished")}
	M117
	{printer.configfile.settings['gcode_macro resume'].rename_existing}
	{% endif %}

[gcode_macro TEST_STREAM_DELAY]
description = Helper macro to find stream and park delay
gcode = 
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set act = printer.toolhead.position %}
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% if act.z > 5.0 %}
	G0 X{min.x + 5.0} F{tl.speed.travel|int * 60}
	G0 X{(max.x-min.x)/2}
	G4 P{tl.park.time|float * 1000}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE
	G0 X{max.x - 5.0}
	{% else %}
	{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}
	{% endif %}

[neopixel sb_leds]
pin = PA8
chain_count = 10
color_order = GRB
initial_red = 1.0
initial_green = 0.0
initial_blue = 1.0

[led_effect sb_logo_busy]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (1,0,0)

[led_effect sb_logo_cleaning]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.0, 0.02, 0.5)

[led_effect sb_logo_calibrating_z]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.0, 0.0, 0.35)

[led_effect sb_logo_heating]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (1, 0.18, 0)

[led_effect sb_logo_cooling]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0, 0, 1)

[led_effect sb_logo_homing]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.0, 0.6, 0.2)

[led_effect sb_logo_leveling]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.5, 0.1, 0.4)

[led_effect sb_logo_meshing]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.5, 1.0, 0.0)

[led_effect sb_logo_printing]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	static 3 1 add (1.0, 1.0, 1.0)

[led_effect sb_logo_standby]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.01, 0.01, 0.01)

[led_effect sb_logo_part_ready]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.0, 1.0, 0.0)

[led_effect sb_nozzle_heating]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	breathing 3 1 top (1.0, 0.18, 0.0)

[led_effect sb_nozzle_cooling]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	breathing 3 1 top (0.1, 0.1, 1.0)

[led_effect sb_nozzle_standby]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	breathing 3 1 top (0.6, 0.0, 0.0)

[led_effect sb_nozzle_printing]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	static 3 1 top (1.0, 1.0, 1.0)

[led_effect sb_nozzle_part_ready]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	breathing 3 1 top (0.6, 1.0, 0.1)

[led_effect sb_critical_error]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds
layers = 
	strobe 1 1.5 add (1.0, 1.0, 1.0)
	breathing 2 0 difference (0.95, 0.0, 0.0)
	static 1 0 top (1.0, 0.0, 0.0)
run_on_error = true

[led_effect rainbow]
autostart = true
frame_rate = 24
leds = 
	neopixel:sb_leds
layers = 
	gradient 0.3 1 add (0.3, 0.0, 0.0),(0.0, 9.3, 0.0),(0.0, 0.0, 0.3)

[led_effect set_nozzle_leds]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	static 0 0 top (1.0, 1.0, 1.0)

[led_effect set_logo_leds]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	static 0 0 top (1.0, 1.0, 1.0)

[gcode_macro set_logo_leds_off]
gcode = 
	SET_LED_EFFECT EFFECT=set_logo_leds STOP=1

[gcode_macro set_logo_leds_on]
gcode = 
	SET_LED_EFFECT EFFECT=set_logo_leds

[gcode_macro set_nozzle_leds_on]
gcode = 
	SET_LED_EFFECT EFFECT=set_nozzle_leds

[gcode_macro set_nozzle_leds_off]
gcode = 
	SET_LED_EFFECT EFFECT=set_nozzle_leds STOP=1

[gcode_macro status_off]
gcode = 
	STOP_LED_EFFECTS

[gcode_macro status_ready]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=rainbow

[gcode_macro status_part_ready]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_nozzle_part_ready
	SET_LED_EFFECT EFFECT=sb_logo_part_ready

[gcode_macro status_busy]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_nozzle_part_ready
	SET_LED_EFFECT EFFECT=sb_logo_part_ready

[gcode_macro status_heating]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_heating
	SET_LED_EFFECT EFFECT=sb_nozzle_heating

[gcode_macro status_cooling]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_cooling
	SET_LED_EFFECT EFFECT=sb_nozzle_cooling

[gcode_macro status_leveling]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_leveling
	set_nozzle_leds_on

[gcode_macro status_homing]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_homing
	set_nozzle_leds_on

[gcode_macro status_cleaning]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_cleaning
	set_nozzle_leds_on

[gcode_macro status_meshing]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_meshing
	set_nozzle_leds_on

[gcode_macro status_calibrating_z]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_calibrating_z
	set_nozzle_leds_on

[gcode_macro status_printing]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_printing
	SET_LED_EFFECT EFFECT=sb_nozzle_printing

[gcode_macro _bot_data]
variable_lapse_video_size = 0
variable_lapse_filename = 'None'
variable_lapse_path = 'None'
gcode = 
	M118 Setting bot lapse variables

[menu __main __octoprint]
type = list
name = Klipper

[menu __main __octoprint __pause]
type = command
enable = {printer.idle_timeout.state == "Printing"}
name = Pause printing
gcode = 
	PAUSE

[menu __main __octoprint __resume]
type = command
enable = {not printer.idle_timeout.state == "Printing"}
name = Resume printing
gcode = 
	RESUME

[menu __main __octoprint __abort]
type = command
enable = {printer.idle_timeout.state == "Printing"}
name = Abort printing
gcode = 
	CANCEL_PRINT

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.8
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 10
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro BED_MESH_CALIBRATE]
rename_existing = _BED_MESH_CALIBRATE
gcode = 
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set bed_mesh_min = printer.configfile.settings.bed_mesh.mesh_min %}
	{% set bed_mesh_max = printer.configfile.settings.bed_mesh.mesh_max %}
	{% set probe_count = printer.configfile.settings.bed_mesh.probe_count %}
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set probe_dock_enable = kamp_settings.probe_dock_enable | abs %}
	{% set attach_macro = kamp_settings.attach_macro | string %}
	{% set detach_macro = kamp_settings.detach_macro | string %}
	{% set mesh_margin = kamp_settings.mesh_margin | float %}
	{% set fuzz_amount = kamp_settings.fuzz_amount | float %}
	{% set probe_count = probe_count if probe_count|length > 1 else probe_count * 2  %}
	{% set max_probe_point_distance_x = ( bed_mesh_max[0] - bed_mesh_min[0] ) / (probe_count[0] - 1)  %}
	{% set max_probe_point_distance_y = ( bed_mesh_max[1] - bed_mesh_min[1] ) / (probe_count[1] - 1)  %}
	{% set x_min = all_points | map(attribute=0) | min | default(bed_mesh_min[0]) %}
	{% set y_min = all_points | map(attribute=1) | min | default(bed_mesh_min[1]) %}
	{% set x_max = all_points | map(attribute=0) | max | default(bed_mesh_max[0]) %}
	{% set y_max = all_points | map(attribute=1) | max | default(bed_mesh_max[1]) %}
	
	{% set fuzz_range = range((0) | int, (fuzz_amount * 100) | int + 1) %}
	{% set adapted_x_min = x_min - mesh_margin - (fuzz_range | random / 100.0) %}
	{% set adapted_y_min = y_min - mesh_margin - (fuzz_range | random / 100.0) %}
	{% set adapted_x_max = x_max + mesh_margin + (fuzz_range | random / 100.0) %}
	{% set adapted_y_max = y_max + mesh_margin + (fuzz_range | random / 100.0) %}
	
	{% set adapted_x_min = [adapted_x_min , bed_mesh_min[0]] | max %}
	{% set adapted_y_min = [adapted_y_min , bed_mesh_min[1]] | max %}
	{% set adapted_x_max = [adapted_x_max , bed_mesh_max[0]] | min %}
	{% set adapted_y_max = [adapted_y_max , bed_mesh_max[1]] | min %}
	
	{% set points_x = (((adapted_x_max - adapted_x_min) / max_probe_point_distance_x) | round(method='ceil') | int) + 1 %}
	{% set points_y = (((adapted_y_max - adapted_y_min) / max_probe_point_distance_y) | round(method='ceil') | int) + 1 %}
	
	{% if (([points_x, points_y]|max) > 6) %}
	{% set algorithm = "bicubic" %}
	{% set min_points = 4 %}
	{% else %}
	{% set algorithm = "lagrange" %}
	{% set min_points = 3 %}
	{% endif %}
	
	{% set points_x = [points_x , min_points]|max %}
	{% set points_y = [points_y , min_points]|max %}
	{% set points_x = [points_x , probe_count[0]]|min %}
	{% set points_y = [points_y , probe_count[1]]|min %}
	
	{% if verbose_enable == True %}
	{% if printer.exclude_object.objects != [] %}
	
	{ action_respond_info( "Algorithm: {}.".format(
	(algorithm),
	)) }
	
	{ action_respond_info("Default probe count: {},{}.".format(
	(probe_count[0]),
	(probe_count[1]),
	)) }
	
	{ action_respond_info("Adapted probe count: {},{}.".format(
	(points_x),
	(points_y),
	)) }
	
	{action_respond_info("Default mesh bounds: {}, {}.".format(
	(bed_mesh_min[0],bed_mesh_min[1]),
	(bed_mesh_max[0],bed_mesh_max[1]),
	)) }
	
	{% if mesh_margin > 0 %}
	{action_respond_info("Mesh margin is {}, mesh bounds extended by {}mm.".format(
	(mesh_margin),
	(mesh_margin),
	)) }
	{% else %}
	{action_respond_info("Mesh margin is 0, margin not increased.")}
	{% endif %}
	
	{% if fuzz_amount > 0 %}
	{action_respond_info("Mesh point fuzzing enabled, points fuzzed up to {}mm.".format(
	(fuzz_amount),
	)) }
	{% else %}
	{action_respond_info("Fuzz amount is 0, mesh points not fuzzed.")}
	{% endif %}
	
	{ action_respond_info("Adapted mesh bounds: {}, {}.".format(
	(adapted_x_min, adapted_y_min),
	(adapted_x_max, adapted_y_max),
	)) }
	
	{action_respond_info("KAMP adjustments successful. Happy KAMPing!")}
	
	{% else %}
	
	{action_respond_info("No objects detected! Check your gcode and make sure that EXCLUDE_OBJECT_DEFINE is happening before BED_MESH_CALIBRATE is called. Defaulting to regular meshing.")}
	G4 P5000
	{% endif %}
	
	{% endif %}
	
	{% if probe_dock_enable == True %}
	{attach_macro}
	{% endif %}
	
	_BED_MESH_CALIBRATE mesh_min={adapted_x_min},{adapted_y_min} mesh_max={adapted_x_max},{adapted_y_max} ALGORITHM={algorithm} PROBE_COUNT={points_x},{points_y}
	
	{% if probe_dock_enable == True %}
	{detach_macro}
	{% endif %}

[gcode_macro LINE_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = (printer.toolhead.max_velocity) * 60 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set verbose_enable = printer["gcode_macro _KAMP_Settings"].verbose_enable | abs %}
	{% set purge_height = printer["gcode_macro _KAMP_Settings"].purge_height | float %}
	{% set tip_distance = printer["gcode_macro _KAMP_Settings"].tip_distance | float %}
	{% set purge_margin = printer["gcode_macro _KAMP_Settings"].purge_margin | float %}
	{% set purge_amount = printer["gcode_macro _KAMP_Settings"].purge_amount | float %}
	{% set flow_rate = printer["gcode_macro _KAMP_Settings"].flow_rate | float %}
	
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	{% if purge_y_origin > 0 %}
	
	{action_respond_info("KAMP purge starting at {}, {} and purging {}mm of filament, requested flow rate is {}mm3/s.".format(
	(purge_x_center),
	(purge_y_origin),
	(purge_amount),
	(flow_rate),
	)) }
	
	{% else %}
	
	{action_respond_info("KAMP purge starting at {}, {} and purging {}mm of filament, requested flow rate is {}mm3/s.".format(
	(purge_x_origin),
	(purge_y_center),
	(purge_amount),
	(flow_rate),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	{% if purge_y_origin > 0 %}
	
	G92 E0
	G0 F{travel_speed}
	G90
	G0 X{purge_x_center} Y{purge_y_origin}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_center + purge_amount} E{purge_amount} F{purge_move_speed}
	{RETRACT}
	G0 X{purge_x_center + purge_amount + 10} F{travel_speed}
	G92 E0
	M82
	G0 Z{purge_height * 2} F{travel_speed}
	
	{% else %}
	
	G92 E0
	G0 F{travel_speed}
	G90
	G0 X{purge_x_origin} Y{purge_y_center}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 Y{purge_y_center + purge_amount} E{purge_amount} F{purge_move_speed}
	{RETRACT}
	G0 Y{purge_y_center + purge_amount + 10} F{travel_speed}
	G92 E0
	M82
	G0 Z{purge_height * 2} F{travel_speed}
	
	{% endif %}
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = (printer.toolhead.max_velocity) * 60 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Presmartpark_State
	
	G90
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F{travel_speed}
	G0 Z{z_height}
	
	RESTORE_GCODE_STATE NAME=Presmartpark_State

[exclude_object]

[stepper_x]
step_pin = PB13
dir_pin = !PB12
enable_pin = !PB14
microsteps = 64
rotation_distance = 40
endstop_pin = ^PC0
position_endstop = -27
position_min = -27
position_max = 230
homing_speed = 80

[tmc2209 stepper_x]
uart_pin = PC11
tx_pin = PC10
uart_address = 0
run_current = 0.580
stealthchop_threshold = 999999

[stepper_y]
step_pin = PB10
dir_pin = !PB2
enable_pin = !PB11
microsteps = 64
rotation_distance = 40
endstop_pin = ^PC1
position_endstop = -11
position_min = -11
position_max = 220
homing_speed = 80

[tmc2209 stepper_y]
uart_pin = PC11
tx_pin = PC10
uart_address = 2
run_current = 0.580
stealthchop_threshold = 999999

[stepper_z]
step_pin = PB0
dir_pin = PC5
enable_pin = !PB1
microsteps = 64
rotation_distance = 2
endstop_pin = probe:z_virtual_endstop
position_min = -5
position_max = 250

[tmc2209 stepper_z]
uart_pin = PC11
tx_pin = PC10
uart_address = 1
run_current = 0.580
stealthchop_threshold = 999999

[safe_z_home]
home_xy_position = 149, 120
speed = 80
z_hop = 10
z_hop_speed = 5

[extruder]
max_extrude_only_distance = 350.0
max_extrude_cross_section = 5
step_pin = PB3
dir_pin = !PB4
enable_pin = !PD1
microsteps = 64
rotation_distance = 22.110
nozzle_diameter = 0.600
filament_diameter = 1.750
heater_pin = PC8
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PA0
min_temp = 0
max_temp = 250
control = pid
pid_kp = 23.249
pid_ki = 1.336
pid_kd = 101.134

[tmc2209 extruder]
uart_pin = PC11
tx_pin = PC10
uart_address = 3
run_current = 0.650
stealthchop_threshold = 999999

[heater_bed]
heater_pin = PC9
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PC4
min_temp = 0
max_temp = 130
control = pid
pid_kp = 69.714
pid_ki = 1.260
pid_kd = 964.661

[heater_fan heatbreak_cooling_fan]
pin = PB15
heater = extruder
heater_temp = 50

[controller_fan controller_fan]
pin = PC7
idle_timeout = 60

[fan]
pin = PC6

[mcu]
serial = /dev/ttyS0
restart_method = command
baud = 115200

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 3000
max_z_velocity = 5
max_z_accel = 100

[bltouch]
sensor_pin = ^PC14
control_pin = PA1
x_offset = -39
y_offset = -10
probe_with_touch_mode = True
pin_up_touch_mode_reports_triggered = True
stow_on_each_sample = False
z_offset = 2.220

[display]
lcd_type = uc1701
cs_pin = PB8
a0_pin = PD6
rst_pin = PB9
encoder_pins = ^PA9, ^PA10
click_pin = ^!PB5
contrast = 63
spi_software_sclk_pin = PA5
spi_software_mosi_pin = PA7
spi_software_miso_pin = PA6

[neopixel SKR_screen]
pin = PA15
chain_count = 3
initial_red = 0.4
initial_green = 0.05
initial_blue = 0.0
color_order = RGB

[delayed_gcode welcome]
initial_duration = .1
gcode = 
	SET_LED LED=SKR_screen RED=0.5 GREEN=0.0 BLUE=0.0 TRANSMIT=0
	SET_LED LED=SKR_screen RED=0.0 GREEN=0.0 BLUE=0.5 INDEX=1 TRANSMIT=1

[output_pin relay]
pin = PC13
value = 1
shutdown_value = 0

[board_pins]
aliases = 
	
	EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8, EXP1_9=<GND>,
	EXP1_2=PA15, EXP1_4=<RST>, EXP1_6=PB9,  EXP1_8=PD6, EXP1_10=<5V>

[bed_screws]
screw1 = 23, 24
screw2 = 191, 24
screw3 = 191, 195
screw4 = 23, 195

[screws_tilt_adjust]
screw1 = 62, 34
screw1_name = front left screw
screw2 = 230, 34
screw2_name = front right screw
screw3 = 230, 205
screw3_name = rear left screw
screw4 = 62, 205
screw4_name = rear right screw
horizontal_move_z = 10
speed = 50
screw_thread = CW-M4

[bed_mesh]
speed = 120
horizontal_move_z = 5
mesh_min = 15, 15
mesh_max = 190, 198
probe_count = 6, 6
algorithm = bicubic
bicubic_tension = 0.2
move_check_distance = 6
split_delta_z = .025

[gcode_arcs]

[firmware_retraction]

[gcode_macro M300]
description = Beeper macro
gcode = 
	SET_PIN PIN=beeper Value=1
	G4 P{params.P|default(150)|int}
	SET_PIN PIN=beeper Value=0

[gcode_macro BEEP]
gcode = 
	M300 P100

[gcode_macro BEEP_TWICE]
gcode = 
	M300 P100
	M300 P100

[gcode_macro BEEP_LONG]
gcode = 
	M300 P500

[gcode_macro Heat_to_remove]
gcode = 
	STATUS_HEATING
	M140 S60
	M117 Heating bed to remove print...
	BEEP
	M190 S60
	BEEP_TWICE
	M117 Done heating!!!

[gcode_macro START_PRINT]
gcode = 
	BEEP
	G92 E0
	G28
	STATUS_HEATING
	M104 S{180}
	M140 S{50}
	M190 S{50}
	BED_MESH_CALIBRATE
	
	SMART_PARK
	M104 S{params.EXTRUDER_TEMP}
	M140 S{params.BED_TEMP}
	STATUS_HEATING
	M190 S{params.BED_TEMP}
	LINE_PURGE
	STATUS_PRINTING
	G92 E0
	G1 Z2.0 F3000
	G1 X5 Y20 Z0.3 F5000.0
	M117 Printing...

[gcode_macro END_PRINT]
gcode = 
	BEEP_TWICE
	G91
	G1 E-5 F2700
	G1 E-2 Z0.2 F2400
	G1 X5 Y5 F3000
	G1 Z10
	G90
	G1 X0 Y210
	M106 S0
	M104 S0
	M140 S0
	M84 X Y E
	BED_MESH_CLEAR
	STATUS_PART_READY
	M117 Done!!!

[gcode_macro PURGE]
gcode = 
	M117 PURGING...
	G91
	G1 E45.0 F250
	G90

[gcode_macro LOAD_FILAMENT]
gcode = 
	{% set speed = params.SPEED|default(300) %}
	{% set max_velocity = printer.configfile.settings['extruder'].max_extrude_only_velocity %}
	SAVE_GCODE_STATE NAME = load_state
	G91
	G92 E0
	G1 E350 F{max_velocity}
	G1 E25 F{speed}
	BEEP_TWICE
	RESTORE_GCODE_STATE NAME = load_state

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	{% set speed = params.SPEED|default(300) %}
	{% set max_velocity = printer.configfile.settings['extruder'].max_extrude_only_velocity %}
	SAVE_GCODE_STATE NAME = unload_state
	G91
	BEEP
	G92 E0
	G1 E25 F{speed}
	G1 E-350 F{max_velocity}
	BEEP_TWICE
	RESTORE_GCODE_STATE NAME = unload_state

[gcode_macro T0]
gcode = 

[bed_mesh default]
version = 1
points = 
	0.076562, 0.072656, 0.074844
	0.053906, 0.051875, 0.050781
	0.084219, 0.085312, 0.091094
x_count = 3
y_count = 3
mesh_x_pps = 2
mesh_y_pps = 2
algo = lagrange
tension = 0.2
min_x = 106.97
max_x = 113.03
min_y = 97.3
max_y = 122.69999999999999
=======================
Declaration of '__main __octoprint' hides previous menuitem declaration
Declaration of '__main __octoprint __pause' hides previous menuitem declaration
Declaration of '__main __octoprint __resume' hides previous menuitem declaration
Declaration of '__main __octoprint __abort' hides previous menuitem declaration
Extruder max_extrude_ratio=2.078758
mcu 'mcu': Starting serial connect
webhooks client 281473062559072: New connection
webhooks client 281473062559072: Client info {'program': 'Moonraker', 'version': 'v0.8.0-324-ga3e4dac'}
Loaded MCU 'mcu' 106 commands (v0.12.0-138-g5e280680 / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1_PA9_PA10=PA9,PA10 BUS_PINS_i2c1_PB6_PB7=PB6,PB7 BUS_PINS_i2c1_PB8_PB9=PB8,PB9 BUS_PINS_i2c2_PB10_PB11=PB10,PB11 BUS_PINS_i2c2_PB13_PB14=PB13,PB14 BUS_PINS_i2c3_PB3_PB4=PB3,PB4 BUS_PINS_i2c3_PC0_PC1=PC0,PC1 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3=PB4,PB5,PB3 CLOCK_FREQ=64000000 MCU=stm32g0b1xx PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_crystal=PF0,PF1 RESERVE_PINS_serial=PA3,PA2 SERIAL_BAUD=115200 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Sending MCU 'mcu' printer configuration...
Configured MCU 'mcu' (1024 moves)
Starting heater checks for heater_bed
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (54.0, 25.0)    | (15.0, 15.0)
  1   | (89.0, 25.0)    | (50.0, 15.0)
  2   | (124.0, 25.0)   | (85.0, 15.0)
  3   | (159.0, 25.0)   | (120.0, 15.0)
  4   | (194.0, 25.0)   | (155.0, 15.0)
  5   | (229.0, 25.0)   | (190.0, 15.0)
  6   | (229.0, 61.6)   | (190.0, 51.6)
  7   | (194.0, 61.6)   | (155.0, 51.6)
  8   | (159.0, 61.6)   | (120.0, 51.6)
  9   | (124.0, 61.6)   | (85.0, 51.6)
  10  | (89.0, 61.6)    | (50.0, 51.6)
  11  | (54.0, 61.6)    | (15.0, 51.6)
  12  | (54.0, 98.2)    | (15.0, 88.2)
  13  | (89.0, 98.2)    | (50.0, 88.2)
  14  | (124.0, 98.2)   | (85.0, 88.2)
  15  | (159.0, 98.2)   | (120.0, 88.2)
  16  | (194.0, 98.2)   | (155.0, 88.2)
  17  | (229.0, 98.2)   | (190.0, 88.2)
  18  | (229.0, 134.8)  | (190.0, 124.8)
  19  | (194.0, 134.8)  | (155.0, 124.8)
  20  | (159.0, 134.8)  | (120.0, 124.8)
  21  | (124.0, 134.8)  | (85.0, 124.8)
  22  | (89.0, 134.8)   | (50.0, 124.8)
  23  | (54.0, 134.8)   | (15.0, 124.8)
  24  | (54.0, 171.4)   | (15.0, 161.4)
  25  | (89.0, 171.4)   | (50.0, 161.4)
  26  | (124.0, 171.4)  | (85.0, 161.4)
  27  | (159.0, 171.4)  | (120.0, 161.4)
  28  | (194.0, 171.4)  | (155.0, 161.4)
  29  | (229.0, 171.4)  | (190.0, 161.4)
  30  | (229.0, 208.0)  | (190.0, 198.0)
  31  | (194.0, 208.0)  | (155.0, 198.0)
  32  | (159.0, 208.0)  | (120.0, 198.0)
  33  | (124.0, 208.0)  | (85.0, 198.0)
  34  | (89.0, 208.0)   | (50.0, 198.0)
  35  | (54.0, 208.0)   | (15.0, 198.0)
Starting heater checks for extruder
Stats 678.5: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=2565 bytes_read=5925 bytes_retransmit=0 bytes_invalid=0 send_seq=208 receive_seq=208 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=3214 freq=63999898  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.76 cputime=88.718 memavail=645960 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
webhooks: registering remote method 'shutdown_machine' for connection id: 281473062559072
webhooks: registering remote method 'reboot_machine' for connection id: 281473062559072
webhooks: registering remote method 'pause_job_queue' for connection id: 281473062559072
webhooks: registering remote method 'start_job_queue' for connection id: 281473062559072
webhooks: registering remote method 'set_device_power' for connection id: 281473062559072
Stats 679.5: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=7328 bytes_read=6729 bytes_retransmit=0 bytes_invalid=0 send_seq=312 receive_seq=312 retransmit_seq=0 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=64002081  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.76 cputime=88.886 memavail=645796 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 680.5: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=8867 bytes_read=7323 bytes_retransmit=0 bytes_invalid=0 send_seq=369 receive_seq=369 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=22 upcoming_bytes=0 freq=64000291  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.76 cputime=89.026 memavail=645348 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 681.5: gcodein=0  mcu: mcu_awake=0.077 mcu_task_avg=0.000138 mcu_task_stddev=0.000198 bytes_write=10017 bytes_read=7935 bytes_retransmit=0 bytes_invalid=0 send_seq=420 receive_seq=420 retransmit_seq=0 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999769  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=0.86 cputime=89.140 memavail=645128 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 682.5: gcodein=0  mcu: mcu_awake=0.077 mcu_task_avg=0.000138 mcu_task_stddev=0.000198 bytes_write=11140 bytes_read=8488 bytes_retransmit=0 bytes_invalid=0 send_seq=469 receive_seq=469 retransmit_seq=0 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=2 upcoming_bytes=0 freq=63999461  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.86 cputime=89.281 memavail=645136 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 683.5: gcodein=0  mcu: mcu_awake=0.077 mcu_task_avg=0.000138 mcu_task_stddev=0.000198 bytes_write=12262 bytes_read=9081 bytes_retransmit=0 bytes_invalid=0 send_seq=521 receive_seq=521 retransmit_seq=0 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999304  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=0.86 cputime=89.401 memavail=645416 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 684.5: gcodein=0  mcu: mcu_awake=0.077 mcu_task_avg=0.000138 mcu_task_stddev=0.000198 bytes_write=13435 bytes_read=9668 bytes_retransmit=0 bytes_invalid=0 send_seq=572 receive_seq=572 retransmit_seq=0 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999202  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.86 cputime=89.507 memavail=645200 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.4 pwm=0.000
Stats 685.5: gcodein=0  mcu: mcu_awake=0.077 mcu_task_avg=0.000138 mcu_task_stddev=0.000198 bytes_write=14595 bytes_read=10260 bytes_retransmit=0 bytes_invalid=0 send_seq=625 receive_seq=624 retransmit_seq=0 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999183  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.86 cputime=89.656 memavail=645320 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 686.5: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000172 bytes_write=15714 bytes_read=10888 bytes_retransmit=0 bytes_invalid=0 send_seq=678 receive_seq=678 retransmit_seq=0 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999148  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.79 cputime=89.759 memavail=645320 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 687.5: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000172 bytes_write=16868 bytes_read=11449 bytes_retransmit=0 bytes_invalid=0 send_seq=727 receive_seq=727 retransmit_seq=0 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999136  heater_bed: target=0 temp=22.9 pwm=0.000 sysload=0.79 cputime=89.876 memavail=645568 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 688.5: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000172 bytes_write=17988 bytes_read=12010 bytes_retransmit=0 bytes_invalid=0 send_seq=776 receive_seq=776 retransmit_seq=0 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=22 upcoming_bytes=0 freq=63999144  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=0.79 cputime=89.981 memavail=645576 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 689.5: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000172 bytes_write=19146 bytes_read=12647 bytes_retransmit=0 bytes_invalid=0 send_seq=832 receive_seq=832 retransmit_seq=0 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999145  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.79 cputime=90.102 memavail=645136 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 690.5: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000172 bytes_write=20327 bytes_read=13278 bytes_retransmit=0 bytes_invalid=0 send_seq=887 receive_seq=887 retransmit_seq=0 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999140  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=0.79 cputime=90.227 memavail=645336 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 691.5: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000171 bytes_write=21473 bytes_read=13882 bytes_retransmit=0 bytes_invalid=0 send_seq=938 receive_seq=938 retransmit_seq=0 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=23 upcoming_bytes=0 freq=63999142  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=0.81 cputime=90.331 memavail=645388 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 692.5: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000171 bytes_write=22616 bytes_read=14480 bytes_retransmit=0 bytes_invalid=0 send_seq=991 receive_seq=991 retransmit_seq=0 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999149  heater_bed: target=0 temp=23.5 pwm=0.000 sysload=0.81 cputime=90.464 memavail=645388 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 693.5: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000171 bytes_write=23769 bytes_read=15072 bytes_retransmit=0 bytes_invalid=0 send_seq=1044 receive_seq=1043 retransmit_seq=0 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999145  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=0.81 cputime=90.567 memavail=645396 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 694.5: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000171 bytes_write=24903 bytes_read=15659 bytes_retransmit=0 bytes_invalid=0 send_seq=1094 receive_seq=1094 retransmit_seq=0 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999145  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.81 cputime=90.733 memavail=645396 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 695.5: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000171 bytes_write=26062 bytes_read=16249 bytes_retransmit=0 bytes_invalid=0 send_seq=1147 receive_seq=1147 retransmit_seq=0 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=2 upcoming_bytes=0 freq=63999141  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.81 cputime=90.835 memavail=645396 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.4 pwm=0.000
Stats 696.5: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000169 bytes_write=27191 bytes_read=16892 bytes_retransmit=0 bytes_invalid=0 send_seq=1201 receive_seq=1201 retransmit_seq=0 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999139  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.74 cputime=90.956 memavail=645144 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.4 pwm=0.000
Stats 697.5: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000169 bytes_write=28355 bytes_read=17495 bytes_retransmit=0 bytes_invalid=0 send_seq=1253 receive_seq=1253 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=2 upcoming_bytes=0 freq=63999136  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.74 cputime=91.060 memavail=645144 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.4 pwm=0.000
Stats 698.5: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000169 bytes_write=29482 bytes_read=18067 bytes_retransmit=0 bytes_invalid=0 send_seq=1304 receive_seq=1304 retransmit_seq=0 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999143  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=0.74 cputime=91.166 memavail=644904 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 699.5: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000169 bytes_write=30625 bytes_read=18659 bytes_retransmit=0 bytes_invalid=0 send_seq=1356 receive_seq=1356 retransmit_seq=0 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999144  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=0.74 cputime=91.294 memavail=645660 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 700.5: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000169 bytes_write=31783 bytes_read=19259 bytes_retransmit=0 bytes_invalid=0 send_seq=1408 receive_seq=1408 retransmit_seq=0 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999145  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=0.74 cputime=91.398 memavail=645660 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 701.5: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000173 bytes_write=32926 bytes_read=19861 bytes_retransmit=0 bytes_invalid=0 send_seq=1460 receive_seq=1460 retransmit_seq=0 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999151  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.68 cputime=91.556 memavail=645912 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 702.5: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000173 bytes_write=34086 bytes_read=20466 bytes_retransmit=0 bytes_invalid=0 send_seq=1513 receive_seq=1513 retransmit_seq=0 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999155  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.68 cputime=91.724 memavail=646112 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 703.5: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000173 bytes_write=35229 bytes_read=21058 bytes_retransmit=0 bytes_invalid=0 send_seq=1565 receive_seq=1565 retransmit_seq=0 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=2 upcoming_bytes=0 freq=63999154  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.68 cputime=91.858 memavail=645920 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 704.5: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000173 bytes_write=36375 bytes_read=21651 bytes_retransmit=0 bytes_invalid=0 send_seq=1617 receive_seq=1617 retransmit_seq=0 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999153  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=0.68 cputime=91.964 memavail=645944 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 705.5: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000173 bytes_write=37531 bytes_read=22243 bytes_retransmit=0 bytes_invalid=0 send_seq=1669 receive_seq=1669 retransmit_seq=0 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999155  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=0.68 cputime=92.113 memavail=646444 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 706.5: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000173 bytes_write=38650 bytes_read=22873 bytes_retransmit=0 bytes_invalid=0 send_seq=1722 receive_seq=1722 retransmit_seq=0 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999160  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=0.63 cputime=92.281 memavail=646504 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.4 pwm=0.000
Stats 707.5: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000173 bytes_write=39831 bytes_read=23489 bytes_retransmit=0 bytes_invalid=0 send_seq=1777 receive_seq=1777 retransmit_seq=0 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999161  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.63 cputime=92.456 memavail=646028 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 708.5: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000173 bytes_write=41011 bytes_read=24089 bytes_retransmit=0 bytes_invalid=0 send_seq=1830 receive_seq=1829 retransmit_seq=0 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999161  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.63 cputime=92.582 memavail=646280 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 709.5: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000173 bytes_write=42113 bytes_read=24684 bytes_retransmit=0 bytes_invalid=0 send_seq=1880 receive_seq=1880 retransmit_seq=0 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999155  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.63 cputime=92.687 memavail=645860 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 710.5: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000173 bytes_write=43289 bytes_read=25313 bytes_retransmit=0 bytes_invalid=0 send_seq=1936 receive_seq=1936 retransmit_seq=0 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999158  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.63 cputime=92.855 memavail=646120 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 711.5: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000164 mcu_task_stddev=0.000170 bytes_write=44471 bytes_read=25995 bytes_retransmit=0 bytes_invalid=0 send_seq=1993 receive_seq=1993 retransmit_seq=0 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999160  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=0.58 cputime=93.029 memavail=645868 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 712.5: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000164 mcu_task_stddev=0.000170 bytes_write=45652 bytes_read=26639 bytes_retransmit=0 bytes_invalid=0 send_seq=2049 receive_seq=2049 retransmit_seq=0 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999159  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=0.58 cputime=93.140 memavail=645868 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 713.5: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000164 mcu_task_stddev=0.000170 bytes_write=46801 bytes_read=27224 bytes_retransmit=0 bytes_invalid=0 send_seq=2101 receive_seq=2101 retransmit_seq=0 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999156  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.58 cputime=93.249 memavail=645636 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.4 pwm=0.000
Stats 714.5: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000164 mcu_task_stddev=0.000170 bytes_write=47981 bytes_read=27915 bytes_retransmit=0 bytes_invalid=0 send_seq=2160 receive_seq=2160 retransmit_seq=0 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999151  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=0.58 cputime=93.404 memavail=644908 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.4 pwm=0.000
Stats 715.5: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000164 mcu_task_stddev=0.000170 bytes_write=49154 bytes_read=28520 bytes_retransmit=0 bytes_invalid=0 send_seq=2213 receive_seq=2213 retransmit_seq=0 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999150  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.58 cputime=93.506 memavail=644908 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 716.5: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000165 mcu_task_stddev=0.000171 bytes_write=50242 bytes_read=29083 bytes_retransmit=0 bytes_invalid=0 send_seq=2262 receive_seq=2262 retransmit_seq=0 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999154  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.53 cputime=93.634 memavail=644908 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.4 pwm=0.000
Stats 717.5: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000165 mcu_task_stddev=0.000171 bytes_write=51393 bytes_read=29662 bytes_retransmit=0 bytes_invalid=0 send_seq=2313 receive_seq=2313 retransmit_seq=0 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999155  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.53 cputime=93.761 memavail=645384 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 718.5: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000165 mcu_task_stddev=0.000171 bytes_write=52563 bytes_read=30288 bytes_retransmit=0 bytes_invalid=0 send_seq=2367 receive_seq=2367 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=23 upcoming_bytes=0 freq=63999156  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=0.53 cputime=93.867 memavail=645584 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 719.5: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000165 mcu_task_stddev=0.000171 bytes_write=53690 bytes_read=30847 bytes_retransmit=0 bytes_invalid=0 send_seq=2417 receive_seq=2417 retransmit_seq=0 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999156  heater_bed: target=0 temp=23.5 pwm=0.000 sysload=0.53 cputime=94.001 memavail=645808 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 720.5: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000165 mcu_task_stddev=0.000171 bytes_write=54839 bytes_read=31452 bytes_retransmit=0 bytes_invalid=0 send_seq=2470 receive_seq=2470 retransmit_seq=0 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999157  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.53 cputime=94.104 memavail=645556 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 721.5: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000164 mcu_task_stddev=0.000173 bytes_write=55998 bytes_read=32056 bytes_retransmit=0 bytes_invalid=0 send_seq=2522 receive_seq=2521 retransmit_seq=0 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=23 upcoming_bytes=0 freq=63999190  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=0.49 cputime=94.237 memavail=645556 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 722.5: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000164 mcu_task_stddev=0.000173 bytes_write=57106 bytes_read=32604 bytes_retransmit=0 bytes_invalid=0 send_seq=2569 receive_seq=2569 retransmit_seq=0 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999191  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=0.49 cputime=94.399 memavail=645556 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 723.5: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000164 mcu_task_stddev=0.000173 bytes_write=58276 bytes_read=33228 bytes_retransmit=0 bytes_invalid=0 send_seq=2624 receive_seq=2624 retransmit_seq=0 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999191  heater_bed: target=0 temp=22.7 pwm=0.000 sysload=0.49 cputime=94.578 memavail=645312 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 724.5: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000164 mcu_task_stddev=0.000173 bytes_write=59389 bytes_read=33802 bytes_retransmit=0 bytes_invalid=0 send_seq=2674 receive_seq=2674 retransmit_seq=0 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999188  heater_bed: target=0 temp=23.5 pwm=0.000 sysload=0.49 cputime=94.680 memavail=645280 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 725.5: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000164 mcu_task_stddev=0.000173 bytes_write=60587 bytes_read=34446 bytes_retransmit=0 bytes_invalid=0 send_seq=2730 receive_seq=2730 retransmit_seq=0 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999185  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.49 cputime=94.793 memavail=645092 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 726.5: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000165 mcu_task_stddev=0.000174 bytes_write=61703 bytes_read=35027 bytes_retransmit=0 bytes_invalid=0 send_seq=2781 receive_seq=2781 retransmit_seq=0 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=24 upcoming_bytes=0 freq=63999183  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=0.45 cputime=94.918 memavail=645472 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 727.5: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000165 mcu_task_stddev=0.000174 bytes_write=62836 bytes_read=35614 bytes_retransmit=0 bytes_invalid=0 send_seq=2832 receive_seq=2832 retransmit_seq=0 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999180  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.45 cputime=95.019 memavail=645220 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 728.5: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000165 mcu_task_stddev=0.000174 bytes_write=64050 bytes_read=36271 bytes_retransmit=0 bytes_invalid=0 send_seq=2889 receive_seq=2889 retransmit_seq=0 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999180  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=0.45 cputime=95.148 memavail=645228 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 729.5: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000165 mcu_task_stddev=0.000174 bytes_write=65191 bytes_read=36895 bytes_retransmit=0 bytes_invalid=0 send_seq=2944 receive_seq=2944 retransmit_seq=0 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999179  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=0.45 cputime=95.257 memavail=645440 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 730.5: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000165 mcu_task_stddev=0.000174 bytes_write=66346 bytes_read=37508 bytes_retransmit=0 bytes_invalid=0 send_seq=2997 receive_seq=2997 retransmit_seq=0 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999181  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.45 cputime=95.381 memavail=645500 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 731.5: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000167 mcu_task_stddev=0.000171 bytes_write=67523 bytes_read=38117 bytes_retransmit=0 bytes_invalid=0 send_seq=3050 receive_seq=3049 retransmit_seq=0 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999175  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=0.41 cputime=95.485 memavail=645508 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 732.5: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000167 mcu_task_stddev=0.000171 bytes_write=68639 bytes_read=38689 bytes_retransmit=0 bytes_invalid=0 send_seq=3100 receive_seq=3100 retransmit_seq=0 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999173  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.41 cputime=95.613 memavail=645532 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 733.5: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000167 mcu_task_stddev=0.000171 bytes_write=69828 bytes_read=39372 bytes_retransmit=0 bytes_invalid=0 send_seq=3159 receive_seq=3159 retransmit_seq=0 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999174  heater_bed: target=0 temp=23.5 pwm=0.000 sysload=0.41 cputime=95.794 memavail=645532 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 734.5: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000167 mcu_task_stddev=0.000171 bytes_write=70970 bytes_read=39972 bytes_retransmit=0 bytes_invalid=0 send_seq=3211 receive_seq=3211 retransmit_seq=0 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=22 upcoming_bytes=0 freq=63999176  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=0.41 cputime=95.954 memavail=645316 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 735.5: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000167 mcu_task_stddev=0.000171 bytes_write=72125 bytes_read=40552 bytes_retransmit=0 bytes_invalid=0 send_seq=3262 receive_seq=3262 retransmit_seq=0 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999175  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.41 cputime=96.056 memavail=645064 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 736.5: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000165 mcu_task_stddev=0.000172 bytes_write=73281 bytes_read=41174 bytes_retransmit=0 bytes_invalid=0 send_seq=3315 receive_seq=3315 retransmit_seq=0 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999174  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=0.38 cputime=96.187 memavail=645568 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 737.5: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000165 mcu_task_stddev=0.000172 bytes_write=74386 bytes_read=41758 bytes_retransmit=0 bytes_invalid=0 send_seq=3366 receive_seq=3366 retransmit_seq=0 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999174  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.38 cputime=96.319 memavail=646072 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 738.5: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000165 mcu_task_stddev=0.000172 bytes_write=75574 bytes_read=42355 bytes_retransmit=0 bytes_invalid=0 send_seq=3419 receive_seq=3419 retransmit_seq=0 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999173  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.38 cputime=96.422 memavail=645828 print_time=7.495 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Unknown command:"RESTORE"
Stats 1269.0: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000162 mcu_task_stddev=0.000172 bytes_write=685643 bytes_read=362663 bytes_retransmit=0 bytes_invalid=0 send_seq=31312 receive_seq=31312 retransmit_seq=0 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999167  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.81 cputime=161.917 memavail=630616 print_time=597.866 buffer_time=0.226 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
webhooks client 281473062559072: Disconnected
Restarting printer
Start printer at Thu Apr  4 02:09:28 2024 (1712218168.7 1270.4)
===== Config file =====
[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]
default_type = echo

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% if printer.pause_resume.is_paused|lower == 'false' and park|lower == 'true'%}
	_TOOLHEAD_PARK_PAUSE_CANCEL
	{% endif %}
	TURN_OFF_HEATERS
	CANCEL_PRINT_BASE
variable_park = True

[gcode_macro PAUSE]
description = Pause actual running print
rename_existing = PAUSE_BASE
gcode = 
	PAUSE_BASE
	STATUS_BUSY
	_TOOLHEAD_PARK_PAUSE_CANCEL

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set extrude = printer['gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL'].extrude %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY) %}
	{%else %}
	{% set get_params = " " %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E{extrude} F2100
	{% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	{% set z_park_delta = 10.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - z_park_delta) %}
	{% set z_safe = z_park_delta %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E-{extrude} F2100
	{% if printer.gcode_move.absolute_extrude|lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G91
	G1 Z{z_safe} F900
	G90
	G1 X{x_park} Y{y_park} F6000
	{% if printer.gcode_move.absolute_coordinates|lower == 'false' %} G91 {% endif %}
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}
variable_extrude = 1.0

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro GET_TIMELAPSE_SETUP]
description = Print the Timelapse setup
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set output_txt = ["Timelapse Setup:"] %}
	{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}
	{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}
	{% if tl.park.enable %}
	{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}
	{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}
	{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}
	{% endif %}
	{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}
	{% if not tl.extruder.fw_retract %}
	{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}
	{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}
	{% endif %}
	{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}
	{action_respond_info(output_txt|join("\n"))}

[gcode_macro _SET_TIMELAPSE_SETUP]
description = Set user parameters for timelapse
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	{% set park = {'min'   : {'x': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),
	'y': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},
	'max'   : {'x': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),
	'y': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},
	'center': {'x': (max.x-(max.x-min.x)/2)|round(3),
	'y': (max.y-(max.y-min.y)/2)|round(3)}} %}
	
	{% if params.ENABLE %}
	{% if params.ENABLE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == 'true' else False}
	{% else %}
	{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.VERBOSE %}
	{% if params.VERBOSE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == 'true' else False}
	{% else %}
	{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_X %}
	{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}
	{% set _dummy = tl.park.custom.update({'x':params.CUSTOM_POS_X|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_Y %}
	{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}
	{% set _dummy = tl.park.custom.update({'y':params.CUSTOM_POS_Y|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_DZ %}
	{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}
	{% set _dummy = tl.park.custom.update({'dz':params.CUSTOM_POS_DZ|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}
	{% endif %}
	{% endif %}
	{% if params.PARK_ENABLE %}
	{% if params.PARK_ENABLE|lower is in ['true', 'false'] %}
	{% set _dummy = tl.park.update({'enable':True if params.PARK_ENABLE|lower == 'true' else False}) %}
	{% else %}
	{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.PARK_POS %}
	{% if params.PARK_POS|lower is in ['center','front_left','front_right','back_left','back_right','custom','x_only','y_only'] %}
	{% set dic = {'center'      : {'x': park.center.x   , 'y': park.center.y   , 'dz': 1                },
	'front_left'  : {'x': park.min.x      , 'y': park.min.y      , 'dz': 0                },
	'front_right' : {'x': park.max.x      , 'y': park.min.y      , 'dz': 0                },
	'back_left'   : {'x': park.min.x      , 'y': park.max.y      , 'dz': 0                },
	'back_right'  : {'x': park.max.x      , 'y': park.max.y      , 'dz': 0                },
	'custom'      : {'x': tl.park.custom.x, 'y': tl.park.custom.y, 'dz': tl.park.custom.dz},
	'x_only'      : {'x': tl.park.custom.x, 'y': 'none'          , 'dz': tl.park.custom.dz},
	'y_only'      : {'x': 'none'          , 'y': tl.park.custom.y, 'dz': tl.park.custom.dz}} %}
	{% set _dummy = tl.park.update({'pos':params.PARK_POS|lower}) %}
	{% set _dummy = tl.park.update({'coord':dic[tl.park.pos]}) %}
	{% else %}
	{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"
	% params.PARK_POS|upper)}
	{% endif %}
	{% endif %}
	{% if params.PARK_TIME %}
	{% if params.PARK_TIME|float >= 0.0 %}
	{% set _dummy = tl.park.update({'time':params.PARK_TIME|float|round(3)}) %}
	{% else %}
	{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"
	{% if params.TRAVEL_SPEED %}
	{% if params.TRAVEL_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'travel':params.TRAVEL_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_SPEED %}
	{% if params.RETRACT_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'retract':params.RETRACT_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.EXTRUDE_SPEED %}
	{% if params.EXTRUDE_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'extrude':params.EXTRUDE_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"
	{% if params.EXTRUDE_DISTANCE %}
	{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'extrude':params.EXTRUDE_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_DISTANCE %}
	{% if params.RETRACT_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'retract':params.RETRACT_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.FW_RETRACT %}
	{% if params.FW_RETRACT|lower is in ['true', 'false'] %}
	{% if 'firmware_retraction' in printer.configfile.settings %}
	{% set _dummy = tl.extruder.update({'fw_retract': True if params.FW_RETRACT|lower == 'true' else False}) %}
	{% else %}
	{% set _dummy = tl.extruder.update({'fw_retract':False}) %}
	{% if params.FW_RETRACT|capitalize == 'True' %}
	{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}
	{% endif %}
	{% endif %}
	{% else %}
	{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"
	{% if printer.configfile.settings['gcode_macro pause'] is defined %}
	{% set _dummy = tl.macro.update({'pause': printer.configfile.settings['gcode_macro pause'].rename_existing}) %}
	{% endif %}
	{% if printer.configfile.settings['gcode_macro resume'] is defined %}
	{% set _dummy = tl.macro.update({'resume': printer.configfile.settings['gcode_macro resume'].rename_existing}) %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"

[gcode_macro TIMELAPSE_TAKE_FRAME]
description = Take Timelapse shoot
variable_enable = False
variable_takingframe = False
variable_park = {'enable': False,
	'pos'   : 'center',
	'time'  : 0.1,
	'custom': {'x': 0, 'y': 0, 'dz': 0},
	'coord' : {'x': 0, 'y': 0, 'dz': 0}}
variable_extruder = {'fw_retract': False,
	'retract': 1.0,
	'extrude': 1.0}
variable_speed = {'travel': 100,
	'retract': 15,
	'extrude': 15}
variable_verbose = True
variable_check_time = 0.5
variable_restore = {'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}
variable_macro = {'pause': 'PAUSE', 'resume': 'RESUME'}
variable_is_paused = False
gcode = 
	{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower =='true' else False %}
	{% if enable %}
	{% if (hyperlapse and printer['gcode_macro HYPERLAPSE'].run) or
	(not hyperlapse and not printer['gcode_macro HYPERLAPSE'].run) %}
	{% if park.enable %}
	{% set pos = {'x': 'X' + park.coord.x|string if park.pos != 'y_only' else '',
	'y': 'Y' + park.coord.y|string if park.pos != 'x_only' else '',
	'z': 'Z'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}
	{% set restore = {'absolute': {'coordinates': printer.gcode_move.absolute_coordinates,
	'extrude'    : printer.gcode_move.absolute_extrude},
	'speed'   : printer.gcode_move.speed,
	'e'       : printer.gcode_move.gcode_position.e,
	'factor'  : {'speed'  : printer.gcode_move.speed_factor,
	'extrude': printer.gcode_move.extrude_factor}} %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}
	{% else %}
	{% if extruder.fw_retract %}
	G10
	{% else %}
	M83
	G0 E-{extruder.retract} F{speed.retract * 60}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True
	{macro.pause}
	SET_GCODE_OFFSET X=0 Y=0
	G90
	{% if "xyz" not in printer.toolhead.homed_axes %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}
	{% else %}
	G0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION={check_time}
	M400
	{% endif %}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}
	{% endif %}
	{% else %}
	{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}
	{% endif %}

[gcode_macro _TIMELAPSE_NEW_FRAME]
description = action call for timelapse shoot. must be a seperate macro
gcode = 
	{action_call_remote_method("timelapse_newframe",
	macropark=printer['gcode_macro TIMELAPSE_TAKE_FRAME'].park,
	hyperlapse=params.HYPERLAPSE)}

[delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME]
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set factor = {'speed': printer.gcode_move.speed_factor, 'extrude': printer.gcode_move.extrude_factor} %}
	{% if tl.takingframe %}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION={tl.check_time}
	{% else %}
	{tl.macro.resume} VELOCITY={tl.speed.travel}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}
	{% else %}
	{% if tl.extruder.fw_retract %}
	G11
	{% else %}
	G0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}
	G0 F{tl.restore.speed}
	{% if tl.restore.absolute.extrude %}
	M82
	G92 E{tl.restore.e}
	{% endif %}
	{% endif %}
	{% endif %}
	{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}
	{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}
	{% if not tl.restore.absolute.coordinates %} G91 {% endif %}
	{% endif %}

[gcode_macro HYPERLAPSE]
description = Start/Stop a hyperlapse recording
variable_cycle = 0
variable_run = False
gcode = 
	{% set cycle = params.CYCLE|default(30)|int %}
	{% if params.ACTION and params.ACTION|lower == 'start' %}
	{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True
	{% elif params.ACTION and params.ACTION|lower == 'stop' %}
	{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0
	{% else %}
	{action_raise_error("Hyperlapse: No valid input parameter
	Use:
	- HYPERLAPSE ACTION=START [CYCLE=time]
	- HYPERLAPSE ACTION=STOP")}
	{% endif %}

[delayed_gcode _HYPERLAPSE_LOOP]
gcode = 
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True

[gcode_macro TIMELAPSE_RENDER]
description = Render Timelapse video and wait for the result
variable_render = False
variable_run_identifier = 0
gcode = 
	{action_respond_info("Timelapse: Rendering started")}
	{action_call_remote_method("timelapse_render", byrendermacro="True")}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True
	{printer.configfile.settings['gcode_macro pause'].rename_existing}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5

[delayed_gcode _WAIT_TIMELAPSE_RENDER]
gcode = 
	{% set ri = printer['gcode_macro TIMELAPSE_RENDER'].run_identifier % 4 %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}
	{% if printer['gcode_macro TIMELAPSE_RENDER'].render %}
	M117 Rendering {['-','\\','|','/'][ri]}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5
	{% else %}
	{action_respond_info("Timelapse: Rendering finished")}
	M117
	{printer.configfile.settings['gcode_macro resume'].rename_existing}
	{% endif %}

[gcode_macro TEST_STREAM_DELAY]
description = Helper macro to find stream and park delay
gcode = 
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set act = printer.toolhead.position %}
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% if act.z > 5.0 %}
	G0 X{min.x + 5.0} F{tl.speed.travel|int * 60}
	G0 X{(max.x-min.x)/2}
	G4 P{tl.park.time|float * 1000}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE
	G0 X{max.x - 5.0}
	{% else %}
	{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}
	{% endif %}

[neopixel sb_leds]
pin = PA8
chain_count = 10
color_order = GRB
initial_red = 1.0
initial_green = 0.0
initial_blue = 1.0

[led_effect sb_logo_busy]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (1,0,0)

[led_effect sb_logo_cleaning]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.0, 0.02, 0.5)

[led_effect sb_logo_calibrating_z]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.0, 0.0, 0.35)

[led_effect sb_logo_heating]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (1, 0.18, 0)

[led_effect sb_logo_cooling]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0, 0, 1)

[led_effect sb_logo_homing]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.0, 0.6, 0.2)

[led_effect sb_logo_leveling]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.5, 0.1, 0.4)

[led_effect sb_logo_meshing]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.5, 1.0, 0.0)

[led_effect sb_logo_printing]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	static 3 1 add (1.0, 1.0, 1.0)

[led_effect sb_logo_standby]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.01, 0.01, 0.01)

[led_effect sb_logo_part_ready]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.0, 1.0, 0.0)

[led_effect sb_nozzle_heating]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	breathing 3 1 top (1.0, 0.18, 0.0)

[led_effect sb_nozzle_cooling]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	breathing 3 1 top (0.1, 0.1, 1.0)

[led_effect sb_nozzle_standby]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	breathing 3 1 top (0.6, 0.0, 0.0)

[led_effect sb_nozzle_printing]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	static 3 1 top (1.0, 1.0, 1.0)

[led_effect sb_nozzle_part_ready]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	breathing 3 1 top (0.6, 1.0, 0.1)

[led_effect sb_critical_error]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds
layers = 
	strobe 1 1.5 add (1.0, 1.0, 1.0)
	breathing 2 0 difference (0.95, 0.0, 0.0)
	static 1 0 top (1.0, 0.0, 0.0)
run_on_error = true

[led_effect rainbow]
autostart = true
frame_rate = 24
leds = 
	neopixel:sb_leds
layers = 
	gradient 0.3 1 add (0.3, 0.0, 0.0),(0.0, 9.3, 0.0),(0.0, 0.0, 0.3)

[led_effect set_nozzle_leds]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	static 0 0 top (1.0, 1.0, 1.0)

[led_effect set_logo_leds]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	static 0 0 top (1.0, 1.0, 1.0)

[gcode_macro set_logo_leds_off]
gcode = 
	SET_LED_EFFECT EFFECT=set_logo_leds STOP=1

[gcode_macro set_logo_leds_on]
gcode = 
	SET_LED_EFFECT EFFECT=set_logo_leds

[gcode_macro set_nozzle_leds_on]
gcode = 
	SET_LED_EFFECT EFFECT=set_nozzle_leds

[gcode_macro set_nozzle_leds_off]
gcode = 
	SET_LED_EFFECT EFFECT=set_nozzle_leds STOP=1

[gcode_macro status_off]
gcode = 
	STOP_LED_EFFECTS

[gcode_macro status_ready]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=rainbow

[gcode_macro status_part_ready]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_nozzle_part_ready
	SET_LED_EFFECT EFFECT=sb_logo_part_ready

[gcode_macro status_busy]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_nozzle_part_ready
	SET_LED_EFFECT EFFECT=sb_logo_part_ready

[gcode_macro status_heating]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_heating
	SET_LED_EFFECT EFFECT=sb_nozzle_heating

[gcode_macro status_cooling]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_cooling
	SET_LED_EFFECT EFFECT=sb_nozzle_cooling

[gcode_macro status_leveling]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_leveling
	set_nozzle_leds_on

[gcode_macro status_homing]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_homing
	set_nozzle_leds_on

[gcode_macro status_cleaning]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_cleaning
	set_nozzle_leds_on

[gcode_macro status_meshing]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_meshing
	set_nozzle_leds_on

[gcode_macro status_calibrating_z]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_calibrating_z
	set_nozzle_leds_on

[gcode_macro status_printing]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_printing
	SET_LED_EFFECT EFFECT=sb_nozzle_printing

[gcode_macro _bot_data]
variable_lapse_video_size = 0
variable_lapse_filename = 'None'
variable_lapse_path = 'None'
gcode = 
	M118 Setting bot lapse variables

[menu __main __octoprint]
type = list
name = Klipper

[menu __main __octoprint __pause]
type = command
enable = {printer.idle_timeout.state == "Printing"}
name = Pause printing
gcode = 
	PAUSE

[menu __main __octoprint __resume]
type = command
enable = {not printer.idle_timeout.state == "Printing"}
name = Resume printing
gcode = 
	RESUME

[menu __main __octoprint __abort]
type = command
enable = {printer.idle_timeout.state == "Printing"}
name = Abort printing
gcode = 
	CANCEL_PRINT

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.8
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 10
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro BED_MESH_CALIBRATE]
rename_existing = _BED_MESH_CALIBRATE
gcode = 
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set bed_mesh_min = printer.configfile.settings.bed_mesh.mesh_min %}
	{% set bed_mesh_max = printer.configfile.settings.bed_mesh.mesh_max %}
	{% set probe_count = printer.configfile.settings.bed_mesh.probe_count %}
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set probe_dock_enable = kamp_settings.probe_dock_enable | abs %}
	{% set attach_macro = kamp_settings.attach_macro | string %}
	{% set detach_macro = kamp_settings.detach_macro | string %}
	{% set mesh_margin = kamp_settings.mesh_margin | float %}
	{% set fuzz_amount = kamp_settings.fuzz_amount | float %}
	{% set probe_count = probe_count if probe_count|length > 1 else probe_count * 2  %}
	{% set max_probe_point_distance_x = ( bed_mesh_max[0] - bed_mesh_min[0] ) / (probe_count[0] - 1)  %}
	{% set max_probe_point_distance_y = ( bed_mesh_max[1] - bed_mesh_min[1] ) / (probe_count[1] - 1)  %}
	{% set x_min = all_points | map(attribute=0) | min | default(bed_mesh_min[0]) %}
	{% set y_min = all_points | map(attribute=1) | min | default(bed_mesh_min[1]) %}
	{% set x_max = all_points | map(attribute=0) | max | default(bed_mesh_max[0]) %}
	{% set y_max = all_points | map(attribute=1) | max | default(bed_mesh_max[1]) %}
	
	{% set fuzz_range = range((0) | int, (fuzz_amount * 100) | int + 1) %}
	{% set adapted_x_min = x_min - mesh_margin - (fuzz_range | random / 100.0) %}
	{% set adapted_y_min = y_min - mesh_margin - (fuzz_range | random / 100.0) %}
	{% set adapted_x_max = x_max + mesh_margin + (fuzz_range | random / 100.0) %}
	{% set adapted_y_max = y_max + mesh_margin + (fuzz_range | random / 100.0) %}
	
	{% set adapted_x_min = [adapted_x_min , bed_mesh_min[0]] | max %}
	{% set adapted_y_min = [adapted_y_min , bed_mesh_min[1]] | max %}
	{% set adapted_x_max = [adapted_x_max , bed_mesh_max[0]] | min %}
	{% set adapted_y_max = [adapted_y_max , bed_mesh_max[1]] | min %}
	
	{% set points_x = (((adapted_x_max - adapted_x_min) / max_probe_point_distance_x) | round(method='ceil') | int) + 1 %}
	{% set points_y = (((adapted_y_max - adapted_y_min) / max_probe_point_distance_y) | round(method='ceil') | int) + 1 %}
	
	{% if (([points_x, points_y]|max) > 6) %}
	{% set algorithm = "bicubic" %}
	{% set min_points = 4 %}
	{% else %}
	{% set algorithm = "lagrange" %}
	{% set min_points = 3 %}
	{% endif %}
	
	{% set points_x = [points_x , min_points]|max %}
	{% set points_y = [points_y , min_points]|max %}
	{% set points_x = [points_x , probe_count[0]]|min %}
	{% set points_y = [points_y , probe_count[1]]|min %}
	
	{% if verbose_enable == True %}
	{% if printer.exclude_object.objects != [] %}
	
	{ action_respond_info( "Algorithm: {}.".format(
	(algorithm),
	)) }
	
	{ action_respond_info("Default probe count: {},{}.".format(
	(probe_count[0]),
	(probe_count[1]),
	)) }
	
	{ action_respond_info("Adapted probe count: {},{}.".format(
	(points_x),
	(points_y),
	)) }
	
	{action_respond_info("Default mesh bounds: {}, {}.".format(
	(bed_mesh_min[0],bed_mesh_min[1]),
	(bed_mesh_max[0],bed_mesh_max[1]),
	)) }
	
	{% if mesh_margin > 0 %}
	{action_respond_info("Mesh margin is {}, mesh bounds extended by {}mm.".format(
	(mesh_margin),
	(mesh_margin),
	)) }
	{% else %}
	{action_respond_info("Mesh margin is 0, margin not increased.")}
	{% endif %}
	
	{% if fuzz_amount > 0 %}
	{action_respond_info("Mesh point fuzzing enabled, points fuzzed up to {}mm.".format(
	(fuzz_amount),
	)) }
	{% else %}
	{action_respond_info("Fuzz amount is 0, mesh points not fuzzed.")}
	{% endif %}
	
	{ action_respond_info("Adapted mesh bounds: {}, {}.".format(
	(adapted_x_min, adapted_y_min),
	(adapted_x_max, adapted_y_max),
	)) }
	
	{action_respond_info("KAMP adjustments successful. Happy KAMPing!")}
	
	{% else %}
	
	{action_respond_info("No objects detected! Check your gcode and make sure that EXCLUDE_OBJECT_DEFINE is happening before BED_MESH_CALIBRATE is called. Defaulting to regular meshing.")}
	G4 P5000
	{% endif %}
	
	{% endif %}
	
	{% if probe_dock_enable == True %}
	{attach_macro}
	{% endif %}
	
	_BED_MESH_CALIBRATE mesh_min={adapted_x_min},{adapted_y_min} mesh_max={adapted_x_max},{adapted_y_max} ALGORITHM={algorithm} PROBE_COUNT={points_x},{points_y}
	
	{% if probe_dock_enable == True %}
	{detach_macro}
	{% endif %}

[gcode_macro LINE_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = (printer.toolhead.max_velocity) * 60 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set verbose_enable = printer["gcode_macro _KAMP_Settings"].verbose_enable | abs %}
	{% set purge_height = printer["gcode_macro _KAMP_Settings"].purge_height | float %}
	{% set tip_distance = printer["gcode_macro _KAMP_Settings"].tip_distance | float %}
	{% set purge_margin = printer["gcode_macro _KAMP_Settings"].purge_margin | float %}
	{% set purge_amount = printer["gcode_macro _KAMP_Settings"].purge_amount | float %}
	{% set flow_rate = printer["gcode_macro _KAMP_Settings"].flow_rate | float %}
	
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	{% if purge_y_origin > 0 %}
	
	{action_respond_info("KAMP purge starting at {}, {} and purging {}mm of filament, requested flow rate is {}mm3/s.".format(
	(purge_x_center),
	(purge_y_origin),
	(purge_amount),
	(flow_rate),
	)) }
	
	{% else %}
	
	{action_respond_info("KAMP purge starting at {}, {} and purging {}mm of filament, requested flow rate is {}mm3/s.".format(
	(purge_x_origin),
	(purge_y_center),
	(purge_amount),
	(flow_rate),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	{% if purge_y_origin > 0 %}
	
	G92 E0
	G0 F{travel_speed}
	G90
	G0 X{purge_x_center} Y{purge_y_origin}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_center + purge_amount} E{purge_amount} F{purge_move_speed}
	{RETRACT}
	G0 X{purge_x_center + purge_amount + 10} F{travel_speed}
	G92 E0
	M82
	G0 Z{purge_height * 2} F{travel_speed}
	
	{% else %}
	
	G92 E0
	G0 F{travel_speed}
	G90
	G0 X{purge_x_origin} Y{purge_y_center}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 Y{purge_y_center + purge_amount} E{purge_amount} F{purge_move_speed}
	{RETRACT}
	G0 Y{purge_y_center + purge_amount + 10} F{travel_speed}
	G92 E0
	M82
	G0 Z{purge_height * 2} F{travel_speed}
	
	{% endif %}
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = (printer.toolhead.max_velocity) * 60 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Presmartpark_State
	
	G90
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F{travel_speed}
	G0 Z{z_height}
	
	RESTORE_GCODE_STATE NAME=Presmartpark_State

[exclude_object]

[stepper_x]
step_pin = PB13
dir_pin = !PB12
enable_pin = !PB14
microsteps = 64
rotation_distance = 40
endstop_pin = ^PC0
position_endstop = -27
position_min = -27
position_max = 230
homing_speed = 80

[tmc2209 stepper_x]
uart_pin = PC11
tx_pin = PC10
uart_address = 0
run_current = 0.580
stealthchop_threshold = 999999

[stepper_y]
step_pin = PB10
dir_pin = !PB2
enable_pin = !PB11
microsteps = 64
rotation_distance = 40
endstop_pin = ^PC1
position_endstop = -11
position_min = -11
position_max = 220
homing_speed = 80

[tmc2209 stepper_y]
uart_pin = PC11
tx_pin = PC10
uart_address = 2
run_current = 0.580
stealthchop_threshold = 999999

[stepper_z]
step_pin = PB0
dir_pin = PC5
enable_pin = !PB1
microsteps = 64
rotation_distance = 2
endstop_pin = probe:z_virtual_endstop
position_min = -5
position_max = 250

[tmc2209 stepper_z]
uart_pin = PC11
tx_pin = PC10
uart_address = 1
run_current = 0.580
stealthchop_threshold = 999999

[safe_z_home]
home_xy_position = 149, 120
speed = 80
z_hop = 10
z_hop_speed = 5

[extruder]
max_extrude_only_distance = 350.0
max_extrude_cross_section = 5
step_pin = PB3
dir_pin = !PB4
enable_pin = !PD1
microsteps = 64
rotation_distance = 22.110
nozzle_diameter = 0.600
filament_diameter = 1.750
heater_pin = PC8
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PA0
min_temp = 0
max_temp = 250
control = pid
pid_kp = 23.249
pid_ki = 1.336
pid_kd = 101.134

[tmc2209 extruder]
uart_pin = PC11
tx_pin = PC10
uart_address = 3
run_current = 0.650
stealthchop_threshold = 999999

[heater_bed]
heater_pin = PC9
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PC4
min_temp = 0
max_temp = 130
control = pid
pid_kp = 69.714
pid_ki = 1.260
pid_kd = 964.661

[heater_fan heatbreak_cooling_fan]
pin = PB15
heater = extruder
heater_temp = 50

[controller_fan controller_fan]
pin = PC7
idle_timeout = 60

[fan]
pin = PC6

[mcu]
serial = /dev/ttyS0
restart_method = command
baud = 115200

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 3000
max_z_velocity = 5
max_z_accel = 100

[bltouch]
sensor_pin = ^PC14
control_pin = PA1
x_offset = -39
y_offset = -10
probe_with_touch_mode = True
pin_up_touch_mode_reports_triggered = True
stow_on_each_sample = False
z_offset = 2.220

[display]
lcd_type = uc1701
cs_pin = PB8
a0_pin = PD6
rst_pin = PB9
encoder_pins = ^PA9, ^PA10
click_pin = ^!PB5
contrast = 63
spi_software_sclk_pin = PA5
spi_software_mosi_pin = PA7
spi_software_miso_pin = PA6

[neopixel SKR_screen]
pin = PA15
chain_count = 3
initial_red = 0.4
initial_green = 0.05
initial_blue = 0.0
color_order = RGB

[delayed_gcode welcome]
initial_duration = .1
gcode = 
	SET_LED LED=SKR_screen RED=0.5 GREEN=0.0 BLUE=0.0 TRANSMIT=0
	SET_LED LED=SKR_screen RED=0.0 GREEN=0.0 BLUE=0.5 INDEX=1 TRANSMIT=1

[output_pin relay]
pin = PC13
value = 1
shutdown_value = 0

[board_pins]
aliases = 
	
	EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8, EXP1_9=<GND>,
	EXP1_2=PA15, EXP1_4=<RST>, EXP1_6=PB9,  EXP1_8=PD6, EXP1_10=<5V>

[bed_screws]
screw1 = 23, 24
screw2 = 191, 24
screw3 = 191, 195
screw4 = 23, 195

[screws_tilt_adjust]
screw1 = 62, 34
screw1_name = front left screw
screw2 = 230, 34
screw2_name = front right screw
screw3 = 230, 205
screw3_name = rear left screw
screw4 = 62, 205
screw4_name = rear right screw
horizontal_move_z = 10
speed = 50
screw_thread = CW-M4

[bed_mesh]
speed = 120
horizontal_move_z = 5
mesh_min = 15, 15
mesh_max = 190, 198
probe_count = 6, 6
algorithm = bicubic
bicubic_tension = 0.2
move_check_distance = 6
split_delta_z = .025

[gcode_arcs]

[firmware_retraction]

[gcode_macro M300]
description = Beeper macro
gcode = 
	SET_PIN PIN=beeper Value=1
	G4 P{params.P|default(150)|int}
	SET_PIN PIN=beeper Value=0

[gcode_macro BEEP]
gcode = 
	M300 P100

[gcode_macro BEEP_TWICE]
gcode = 
	M300 P100
	M300 P100

[gcode_macro BEEP_LONG]
gcode = 
	M300 P500

[gcode_macro Heat_to_remove]
gcode = 
	STATUS_HEATING
	M140 S60
	M117 Heating bed to remove print...
	BEEP
	M190 S60
	BEEP_TWICE
	M117 Done heating!!!

[gcode_macro START_PRINT]
gcode = 
	BEEP
	G92 E0
	G28
	STATUS_HEATING
	M104 S{180}
	M140 S{50}
	M190 S{50}
	BED_MESH_CALIBRATE
	
	SMART_PARK
	M104 S{params.EXTRUDER_TEMP}
	M140 S{params.BED_TEMP}
	STATUS_HEATING
	M190 S{params.BED_TEMP}
	LINE_PURGE
	STATUS_PRINTING
	G92 E0
	G1 Z2.0 F3000
	G1 X5 Y20 Z0.3 F5000.0
	M117 Printing...

[gcode_macro END_PRINT]
gcode = 
	BEEP_TWICE
	G91
	G1 E-5 F2700
	G1 E-2 Z0.2 F2400
	G1 X5 Y5 F3000
	G1 Z10
	G90
	G1 X0 Y210
	M106 S0
	M104 S0
	M140 S0
	M84 X Y E
	BED_MESH_CLEAR
	STATUS_PART_READY
	M117 Done!!!

[gcode_macro PURGE]
gcode = 
	M117 PURGING...
	G91
	G1 E45.0 F250
	G90

[gcode_macro LOAD_FILAMENT]
gcode = 
	{% set speed = params.SPEED|default(300) %}
	{% set max_velocity = printer.configfile.settings['extruder'].max_extrude_only_velocity %}
	SAVE_GCODE_STATE NAME = load_state
	G91
	G92 E0
	G1 E350 F{max_velocity}
	G1 E25 F{speed}
	BEEP_TWICE
	RESTORE_GCODE_STATE NAME = load_state

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	{% set speed = params.SPEED|default(300) %}
	{% set max_velocity = printer.configfile.settings['extruder'].max_extrude_only_velocity %}
	SAVE_GCODE_STATE NAME = unload_state
	G91
	BEEP
	G92 E0
	G1 E25 F{speed}
	G1 E-350 F{max_velocity}
	BEEP_TWICE
	RESTORE_GCODE_STATE NAME = unload_state

[gcode_macro T0]
gcode = 

[bed_mesh default]
version = 1
points = 
	0.076562, 0.072656, 0.074844
	0.053906, 0.051875, 0.050781
	0.084219, 0.085312, 0.091094
x_count = 3
y_count = 3
mesh_x_pps = 2
mesh_y_pps = 2
algo = lagrange
tension = 0.2
min_x = 106.97
max_x = 113.03
min_y = 97.3
max_y = 122.69999999999999
=======================
Declaration of '__main __octoprint' hides previous menuitem declaration
Declaration of '__main __octoprint __pause' hides previous menuitem declaration
Declaration of '__main __octoprint __resume' hides previous menuitem declaration
Declaration of '__main __octoprint __abort' hides previous menuitem declaration
Extruder max_extrude_ratio=2.078758
mcu 'mcu': Starting serial connect
webhooks client 281473063434416: New connection
webhooks client 281473063434416: Client info {'program': 'Moonraker', 'version': 'v0.8.0-324-ga3e4dac'}
mcu 'mcu': got {'oid': 27, 'next_clock': 4268741632, 'value': 31418, '#name': 'analog_in_state', '#sent_time': 1274.6354208983335, '#receive_time': 1274.6528131622222}
mcu 'mcu': got {'oid': 16, 'next_clock': 4280901632, 'value': 31395, '#name': 'analog_in_state', '#sent_time': 1274.7966138563334, '#receive_time': 1274.8427854122222}
mcu 'mcu': got {'oid': 27, 'next_clock': 4287941632, 'value': 31393, '#name': 'analog_in_state', '#sent_time': 1274.9042466483334, '#receive_time': 1274.952791412222}
Loaded MCU 'mcu' 106 commands (v0.12.0-138-g5e280680 / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1_PA9_PA10=PA9,PA10 BUS_PINS_i2c1_PB6_PB7=PB6,PB7 BUS_PINS_i2c1_PB8_PB9=PB8,PB9 BUS_PINS_i2c2_PB10_PB11=PB10,PB11 BUS_PINS_i2c2_PB13_PB14=PB13,PB14 BUS_PINS_i2c3_PB3_PB4=PB3,PB4 BUS_PINS_i2c3_PC0_PC1=PC0,PC1 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3=PB4,PB5,PB3 CLOCK_FREQ=64000000 MCU=stm32g0b1xx PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_crystal=PF0,PF1 RESERVE_PINS_serial=PA3,PA2 SERIAL_BAUD=115200 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Configured MCU 'mcu' (1024 moves)
Starting heater checks for heater_bed
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (54.0, 25.0)    | (15.0, 15.0)
  1   | (89.0, 25.0)    | (50.0, 15.0)
  2   | (124.0, 25.0)   | (85.0, 15.0)
  3   | (159.0, 25.0)   | (120.0, 15.0)
  4   | (194.0, 25.0)   | (155.0, 15.0)
  5   | (229.0, 25.0)   | (190.0, 15.0)
  6   | (229.0, 61.6)   | (190.0, 51.6)
  7   | (194.0, 61.6)   | (155.0, 51.6)
  8   | (159.0, 61.6)   | (120.0, 51.6)
  9   | (124.0, 61.6)   | (85.0, 51.6)
  10  | (89.0, 61.6)    | (50.0, 51.6)
  11  | (54.0, 61.6)    | (15.0, 51.6)
  12  | (54.0, 98.2)    | (15.0, 88.2)
  13  | (89.0, 98.2)    | (50.0, 88.2)
  14  | (124.0, 98.2)   | (85.0, 88.2)
  15  | (159.0, 98.2)   | (120.0, 88.2)
  16  | (194.0, 98.2)   | (155.0, 88.2)
  17  | (229.0, 98.2)   | (190.0, 88.2)
  18  | (229.0, 134.8)  | (190.0, 124.8)
  19  | (194.0, 134.8)  | (155.0, 124.8)
  20  | (159.0, 134.8)  | (120.0, 124.8)
  21  | (124.0, 134.8)  | (85.0, 124.8)
  22  | (89.0, 134.8)   | (50.0, 124.8)
  23  | (54.0, 134.8)   | (15.0, 124.8)
  24  | (54.0, 171.4)   | (15.0, 161.4)
  25  | (89.0, 171.4)   | (50.0, 161.4)
  26  | (124.0, 171.4)  | (85.0, 161.4)
  27  | (159.0, 171.4)  | (120.0, 161.4)
  28  | (194.0, 171.4)  | (155.0, 161.4)
  29  | (229.0, 171.4)  | (190.0, 161.4)
  30  | (229.0, 208.0)  | (190.0, 198.0)
  31  | (194.0, 208.0)  | (155.0, 198.0)
  32  | (159.0, 208.0)  | (120.0, 198.0)
  33  | (124.0, 208.0)  | (85.0, 198.0)
  34  | (89.0, 208.0)   | (50.0, 198.0)
  35  | (54.0, 208.0)   | (15.0, 198.0)
Starting heater checks for extruder
webhooks: registering remote method 'shutdown_machine' for connection id: 281473063434416
webhooks: registering remote method 'reboot_machine' for connection id: 281473063434416
webhooks: registering remote method 'pause_job_queue' for connection id: 281473063434416
webhooks: registering remote method 'start_job_queue' for connection id: 281473063434416
webhooks: registering remote method 'set_device_power' for connection id: 281473063434416
Stats 1277.7: gcodein=0  mcu: mcu_awake=0.052 mcu_task_avg=0.000104 mcu_task_stddev=0.000182 bytes_write=7358 bytes_read=6691 bytes_retransmit=9 bytes_invalid=0 send_seq=310 receive_seq=307 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=115 upcoming_bytes=84 freq=63999481  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=1.20 cputime=166.233 memavail=629828 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.4 pwm=0.000
Stats 1278.7: gcodein=0  mcu: mcu_awake=0.052 mcu_task_avg=0.000104 mcu_task_stddev=0.000182 bytes_write=8736 bytes_read=7316 bytes_retransmit=9 bytes_invalid=0 send_seq=365 receive_seq=365 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=2 upcoming_bytes=0 freq=63999013  heater_bed: target=0 temp=23.5 pwm=0.000 sysload=1.20 cputime=166.357 memavail=630192 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1279.7: gcodein=0  mcu: mcu_awake=0.052 mcu_task_avg=0.000104 mcu_task_stddev=0.000182 bytes_write=9892 bytes_read=7955 bytes_retransmit=9 bytes_invalid=0 send_seq=420 receive_seq=420 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999019  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=1.20 cputime=166.477 memavail=630800 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.4 pwm=0.000
Stats 1280.7: gcodein=0  mcu: mcu_awake=0.052 mcu_task_avg=0.000104 mcu_task_stddev=0.000182 bytes_write=11036 bytes_read=8532 bytes_retransmit=9 bytes_invalid=0 send_seq=472 receive_seq=472 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999030  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=1.20 cputime=166.582 memavail=630800 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1281.7: gcodein=0  mcu: mcu_awake=0.052 mcu_task_avg=0.000104 mcu_task_stddev=0.000182 bytes_write=12204 bytes_read=9145 bytes_retransmit=9 bytes_invalid=0 send_seq=526 receive_seq=525 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=2 upcoming_bytes=0 freq=63999106  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=1.10 cputime=166.746 memavail=631156 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1282.7: gcodein=0  mcu: mcu_awake=0.064 mcu_task_avg=0.000173 mcu_task_stddev=0.000177 bytes_write=13352 bytes_read=9783 bytes_retransmit=9 bytes_invalid=0 send_seq=578 receive_seq=578 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999063  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=1.10 cputime=166.854 memavail=631244 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1283.7: gcodein=0  mcu: mcu_awake=0.064 mcu_task_avg=0.000173 mcu_task_stddev=0.000177 bytes_write=14519 bytes_read=10373 bytes_retransmit=9 bytes_invalid=0 send_seq=632 receive_seq=631 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999076  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=1.10 cputime=166.981 memavail=631524 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 1284.7: gcodein=0  mcu: mcu_awake=0.064 mcu_task_avg=0.000173 mcu_task_stddev=0.000177 bytes_write=15624 bytes_read=10973 bytes_retransmit=9 bytes_invalid=0 send_seq=683 receive_seq=683 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999116  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=1.10 cputime=167.153 memavail=631780 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1285.7: gcodein=0  mcu: mcu_awake=0.064 mcu_task_avg=0.000173 mcu_task_stddev=0.000177 bytes_write=16811 bytes_read=11591 bytes_retransmit=9 bytes_invalid=0 send_seq=737 receive_seq=737 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=2 upcoming_bytes=0 freq=63999140  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=1.10 cputime=167.336 memavail=631780 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1286.7: gcodein=0  mcu: mcu_awake=0.064 mcu_task_avg=0.000173 mcu_task_stddev=0.000177 bytes_write=17931 bytes_read=12137 bytes_retransmit=9 bytes_invalid=0 send_seq=786 receive_seq=786 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=22 upcoming_bytes=0 freq=63999159  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=1.02 cputime=167.459 memavail=631540 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1287.7: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000165 mcu_task_stddev=0.000174 bytes_write=19056 bytes_read=12749 bytes_retransmit=9 bytes_invalid=0 send_seq=837 receive_seq=837 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999142  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=1.02 cputime=167.565 memavail=630840 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Unknown command:"RESTORE"
Stats 1288.7: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000165 mcu_task_stddev=0.000174 bytes_write=20216 bytes_read=13341 bytes_retransmit=9 bytes_invalid=0 send_seq=889 receive_seq=889 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999146  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=1.02 cputime=167.690 memavail=630996 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1289.7: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000165 mcu_task_stddev=0.000174 bytes_write=21334 bytes_read=13887 bytes_retransmit=9 bytes_invalid=0 send_seq=938 receive_seq=938 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999149  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=1.02 cputime=167.791 memavail=630520 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1290.7: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000165 mcu_task_stddev=0.000174 bytes_write=22505 bytes_read=14526 bytes_retransmit=9 bytes_invalid=0 send_seq=993 receive_seq=993 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999162  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=1.02 cputime=167.922 memavail=630280 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1291.7: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000165 mcu_task_stddev=0.000174 bytes_write=23658 bytes_read=15118 bytes_retransmit=9 bytes_invalid=0 send_seq=1046 receive_seq=1045 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999154  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=1.01 cputime=168.025 memavail=630284 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1292.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000172 bytes_write=24791 bytes_read=15709 bytes_retransmit=9 bytes_invalid=0 send_seq=1096 receive_seq=1095 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999154  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=1.01 cputime=168.188 memavail=631040 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 1293.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000172 bytes_write=25947 bytes_read=16318 bytes_retransmit=9 bytes_invalid=0 send_seq=1148 receive_seq=1148 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999146  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=1.01 cputime=168.296 memavail=631048 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1294.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000172 bytes_write=27095 bytes_read=16897 bytes_retransmit=9 bytes_invalid=0 send_seq=1200 receive_seq=1199 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999143  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=1.01 cputime=168.398 memavail=631048 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1295.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000172 bytes_write=28218 bytes_read=17497 bytes_retransmit=9 bytes_invalid=0 send_seq=1251 receive_seq=1251 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999146  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=1.01 cputime=168.524 memavail=630796 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.4 pwm=0.000
Stats 1296.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000172 bytes_write=29394 bytes_read=18095 bytes_retransmit=9 bytes_invalid=0 send_seq=1304 receive_seq=1304 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999148  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=1.09 cputime=168.630 memavail=630996 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1297.7: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000167 mcu_task_stddev=0.000173 bytes_write=30545 bytes_read=18725 bytes_retransmit=9 bytes_invalid=0 send_seq=1357 receive_seq=1357 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=2 upcoming_bytes=0 freq=63999145  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=1.09 cputime=168.757 memavail=630356 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1298.8: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000167 mcu_task_stddev=0.000173 bytes_write=31662 bytes_read=19312 bytes_retransmit=9 bytes_invalid=0 send_seq=1408 receive_seq=1408 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999145  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=1.09 cputime=168.863 memavail=629240 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1299.8: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000167 mcu_task_stddev=0.000173 bytes_write=32845 bytes_read=19889 bytes_retransmit=9 bytes_invalid=0 send_seq=1461 receive_seq=1460 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999145  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=1.09 cputime=168.989 memavail=630472 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 1300.8: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000167 mcu_task_stddev=0.000173 bytes_write=33973 bytes_read=20489 bytes_retransmit=9 bytes_invalid=0 send_seq=1512 receive_seq=1512 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=22 upcoming_bytes=0 freq=63999146  heater_bed: target=0 temp=23.5 pwm=0.000 sysload=1.09 cputime=169.092 memavail=630784 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 1301.8: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000167 mcu_task_stddev=0.000173 bytes_write=35096 bytes_read=21076 bytes_retransmit=9 bytes_invalid=0 send_seq=1563 receive_seq=1563 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999153  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=1.01 cputime=169.218 memavail=630232 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1302.8: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000162 mcu_task_stddev=0.000170 bytes_write=36281 bytes_read=21683 bytes_retransmit=9 bytes_invalid=0 send_seq=1616 receive_seq=1616 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=2 upcoming_bytes=0 freq=63999153  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=1.01 cputime=169.324 memavail=630544 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1303.8: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000162 mcu_task_stddev=0.000170 bytes_write=37403 bytes_read=22283 bytes_retransmit=9 bytes_invalid=0 send_seq=1668 receive_seq=1668 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999155  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=1.01 cputime=169.427 memavail=630744 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1304.8: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000162 mcu_task_stddev=0.000170 bytes_write=38558 bytes_read=22896 bytes_retransmit=9 bytes_invalid=0 send_seq=1721 receive_seq=1721 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999158  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=1.01 cputime=169.552 memavail=631300 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 1305.8: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000162 mcu_task_stddev=0.000170 bytes_write=39713 bytes_read=23455 bytes_retransmit=9 bytes_invalid=0 send_seq=1772 receive_seq=1771 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999155  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=1.01 cputime=169.655 memavail=631196 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 1306.8: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000162 mcu_task_stddev=0.000170 bytes_write=40850 bytes_read=24068 bytes_retransmit=9 bytes_invalid=0 send_seq=1824 receive_seq=1824 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999161  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=1.01 cputime=169.812 memavail=631312 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.4 pwm=0.000
Stats 1307.8: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000171 bytes_write=42026 bytes_read=24737 bytes_retransmit=9 bytes_invalid=0 send_seq=1880 receive_seq=1880 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999160  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=1.01 cputime=169.956 memavail=631308 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 1308.8: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000171 bytes_write=43178 bytes_read=25324 bytes_retransmit=9 bytes_invalid=0 send_seq=1932 receive_seq=1931 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999156  heater_bed: target=0 temp=22.9 pwm=0.000 sysload=1.01 cputime=170.063 memavail=631564 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1309.8: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000171 bytes_write=44326 bytes_read=25930 bytes_retransmit=9 bytes_invalid=0 send_seq=1984 receive_seq=1984 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999155  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=1.01 cputime=170.210 memavail=632320 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 1310.8: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000171 bytes_write=45479 bytes_read=26509 bytes_retransmit=9 bytes_invalid=0 send_seq=2036 receive_seq=2035 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999155  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=1.01 cputime=170.315 memavail=632472 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1311.8: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000171 bytes_write=46579 bytes_read=27096 bytes_retransmit=9 bytes_invalid=0 send_seq=2086 receive_seq=2086 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999157  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.92 cputime=170.419 memavail=632220 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 1312.8: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000167 mcu_task_stddev=0.000170 bytes_write=47813 bytes_read=27823 bytes_retransmit=9 bytes_invalid=0 send_seq=2147 receive_seq=2147 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999160  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.92 cputime=170.579 memavail=631288 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1313.8: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000167 mcu_task_stddev=0.000170 bytes_write=48978 bytes_read=28415 bytes_retransmit=9 bytes_invalid=0 send_seq=2199 receive_seq=2199 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=2 upcoming_bytes=0 freq=63999157  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.92 cputime=170.684 memavail=631792 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 1314.8: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000167 mcu_task_stddev=0.000170 bytes_write=50126 bytes_read=29093 bytes_retransmit=9 bytes_invalid=0 send_seq=2257 receive_seq=2257 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999158  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.92 cputime=170.840 memavail=631540 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 1315.8: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000167 mcu_task_stddev=0.000170 bytes_write=51286 bytes_read=29657 bytes_retransmit=9 bytes_invalid=0 send_seq=2309 receive_seq=2308 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999158  heater_bed: target=0 temp=22.9 pwm=0.000 sysload=0.92 cputime=170.951 memavail=631288 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 1316.8: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000167 mcu_task_stddev=0.000170 bytes_write=52427 bytes_read=30270 bytes_retransmit=9 bytes_invalid=0 send_seq=2361 receive_seq=2361 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999159  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.85 cputime=171.060 memavail=631036 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 1317.8: gcodein=0  mcu: mcu_awake=0.060 mcu_task_avg=0.000166 mcu_task_stddev=0.000169 bytes_write=53638 bytes_read=30999 bytes_retransmit=9 bytes_invalid=0 send_seq=2421 receive_seq=2421 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999159  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=0.85 cputime=171.220 memavail=630316 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1318.8: gcodein=0  mcu: mcu_awake=0.060 mcu_task_avg=0.000166 mcu_task_stddev=0.000169 bytes_write=54767 bytes_read=31537 bytes_retransmit=9 bytes_invalid=0 send_seq=2471 receive_seq=2470 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999161  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.85 cputime=171.319 memavail=630568 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1319.8: gcodein=0  mcu: mcu_awake=0.060 mcu_task_avg=0.000166 mcu_task_stddev=0.000169 bytes_write=55901 bytes_read=32124 bytes_retransmit=9 bytes_invalid=0 send_seq=2521 receive_seq=2521 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999164  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.85 cputime=171.458 memavail=630624 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1320.8: gcodein=0  mcu: mcu_awake=0.060 mcu_task_avg=0.000166 mcu_task_stddev=0.000169 bytes_write=57060 bytes_read=32729 bytes_retransmit=9 bytes_invalid=0 send_seq=2574 receive_seq=2574 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999163  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.85 cputime=171.567 memavail=630624 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1321.8: gcodein=0  mcu: mcu_awake=0.060 mcu_task_avg=0.000166 mcu_task_stddev=0.000169 bytes_write=58203 bytes_read=33296 bytes_retransmit=9 bytes_invalid=0 send_seq=2625 receive_seq=2624 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=2 upcoming_bytes=0 freq=63999161  heater_bed: target=0 temp=22.8 pwm=0.000 sysload=0.78 cputime=171.675 memavail=630376 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1322.8: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000173 bytes_write=59331 bytes_read=33918 bytes_retransmit=9 bytes_invalid=0 send_seq=2677 receive_seq=2677 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999161  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=0.78 cputime=171.803 memavail=629948 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1323.8: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000173 bytes_write=60500 bytes_read=34497 bytes_retransmit=9 bytes_invalid=0 send_seq=2729 receive_seq=2728 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999160  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.78 cputime=171.904 memavail=630216 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1324.8: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000173 bytes_write=61598 bytes_read=35069 bytes_retransmit=9 bytes_invalid=0 send_seq=2779 receive_seq=2779 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999160  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.78 cputime=172.020 memavail=630972 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1325.8: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000173 bytes_write=62752 bytes_read=35669 bytes_retransmit=9 bytes_invalid=0 send_seq=2831 receive_seq=2831 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999160  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.78 cputime=172.124 memavail=630972 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1326.8: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000173 bytes_write=63897 bytes_read=36269 bytes_retransmit=9 bytes_invalid=0 send_seq=2883 receive_seq=2883 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999159  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.72 cputime=172.269 memavail=631480 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1327.8: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000173 bytes_write=65078 bytes_read=36915 bytes_retransmit=9 bytes_invalid=0 send_seq=2939 receive_seq=2939 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999158  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.72 cputime=172.409 memavail=630532 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1328.8: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000173 bytes_write=66230 bytes_read=37507 bytes_retransmit=9 bytes_invalid=0 send_seq=2992 receive_seq=2991 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999159  heater_bed: target=0 temp=22.7 pwm=0.000 sysload=0.72 cputime=172.519 memavail=630788 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 1329.8: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000173 bytes_write=67396 bytes_read=38172 bytes_retransmit=9 bytes_invalid=0 send_seq=3048 receive_seq=3048 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999160  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=0.72 cputime=172.669 memavail=630060 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1330.8: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000173 bytes_write=68546 bytes_read=38731 bytes_retransmit=9 bytes_invalid=0 send_seq=3098 receive_seq=3098 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999161  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.72 cputime=172.779 memavail=630060 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1331.8: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000173 bytes_write=69702 bytes_read=39344 bytes_retransmit=9 bytes_invalid=0 send_seq=3152 receive_seq=3151 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=2 upcoming_bytes=0 freq=63999163  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.66 cputime=172.890 memavail=629808 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1332.8: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000171 bytes_write=70835 bytes_read=39979 bytes_retransmit=9 bytes_invalid=0 send_seq=3205 receive_seq=3205 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999165  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.66 cputime=173.021 memavail=629364 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1333.8: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000171 bytes_write=72017 bytes_read=40577 bytes_retransmit=9 bytes_invalid=0 send_seq=3258 receive_seq=3258 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999165  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.66 cputime=173.134 memavail=628124 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1334.8: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000171 bytes_write=73107 bytes_read=41133 bytes_retransmit=9 bytes_invalid=0 send_seq=3306 receive_seq=3306 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999164  heater_bed: target=0 temp=23.5 pwm=0.000 sysload=0.66 cputime=173.275 memavail=628124 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1335.8: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000171 bytes_write=74265 bytes_read=41751 bytes_retransmit=9 bytes_invalid=0 send_seq=3360 receive_seq=3360 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999165  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.66 cputime=173.431 memavail=628124 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1336.8: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000171 bytes_write=75447 bytes_read=42315 bytes_retransmit=9 bytes_invalid=0 send_seq=3412 receive_seq=3411 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999165  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.61 cputime=173.536 memavail=628356 print_time=605.706 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1878.3: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000165 mcu_task_stddev=0.000170 bytes_write=697429 bytes_read=368705 bytes_retransmit=9 bytes_invalid=0 send_seq=31843 receive_seq=31843 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999165  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=1.43 cputime=241.292 memavail=626456 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1879.3: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000165 mcu_task_stddev=0.000171 bytes_write=698651 bytes_read=369370 bytes_retransmit=9 bytes_invalid=0 send_seq=31901 receive_seq=31900 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999165  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=1.43 cputime=241.406 memavail=626212 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1880.3: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000165 mcu_task_stddev=0.000171 bytes_write=699745 bytes_read=369931 bytes_retransmit=9 bytes_invalid=0 send_seq=31949 receive_seq=31949 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999165  heater_bed: target=0 temp=23.5 pwm=0.000 sysload=1.43 cputime=241.534 memavail=625960 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1881.3: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000165 mcu_task_stddev=0.000171 bytes_write=700901 bytes_read=370522 bytes_retransmit=9 bytes_invalid=0 send_seq=32002 receive_seq=32002 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999164  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=1.43 cputime=241.647 memavail=625456 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1882.4: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000165 mcu_task_stddev=0.000171 bytes_write=702083 bytes_read=371141 bytes_retransmit=9 bytes_invalid=0 send_seq=32057 receive_seq=32056 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=2 upcoming_bytes=0 freq=63999164  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=1.39 cputime=241.775 memavail=625236 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1883.4: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000165 mcu_task_stddev=0.000171 bytes_write=703233 bytes_read=371772 bytes_retransmit=9 bytes_invalid=0 send_seq=32111 receive_seq=32111 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999164  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=1.39 cputime=241.885 memavail=625236 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1884.4: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000166 mcu_task_stddev=0.000172 bytes_write=704380 bytes_read=372374 bytes_retransmit=9 bytes_invalid=0 send_seq=32163 receive_seq=32163 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999163  heater_bed: target=0 temp=22.9 pwm=0.000 sysload=1.39 cputime=242.006 memavail=625244 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1885.4: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000166 mcu_task_stddev=0.000172 bytes_write=705484 bytes_read=372948 bytes_retransmit=9 bytes_invalid=0 send_seq=32213 receive_seq=32213 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999163  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=1.39 cputime=242.113 memavail=625244 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1886.4: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000166 mcu_task_stddev=0.000172 bytes_write=706684 bytes_read=373579 bytes_retransmit=9 bytes_invalid=0 send_seq=32268 receive_seq=32268 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999163  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=1.39 cputime=242.226 memavail=624996 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1887.4: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000166 mcu_task_stddev=0.000172 bytes_write=707861 bytes_read=374257 bytes_retransmit=9 bytes_invalid=0 send_seq=32326 receive_seq=32326 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=22 upcoming_bytes=0 freq=63999165  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=1.36 cputime=242.370 memavail=624548 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 1888.4: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000166 mcu_task_stddev=0.000172 bytes_write=708982 bytes_read=374824 bytes_retransmit=9 bytes_invalid=0 send_seq=32376 receive_seq=32376 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999165  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=1.36 cputime=242.474 memavail=624748 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1889.4: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000171 bytes_write=710145 bytes_read=375420 bytes_retransmit=9 bytes_invalid=0 send_seq=32427 receive_seq=32427 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999165  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=1.36 cputime=242.630 memavail=625564 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1890.4: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000171 bytes_write=711289 bytes_read=376046 bytes_retransmit=9 bytes_invalid=0 send_seq=32481 receive_seq=32481 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999166  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=1.36 cputime=242.807 memavail=625312 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1891.4: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000171 bytes_write=712424 bytes_read=376618 bytes_retransmit=9 bytes_invalid=0 send_seq=32532 receive_seq=32532 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999167  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=1.36 cputime=242.934 memavail=624556 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1892.4: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000171 bytes_write=713580 bytes_read=377244 bytes_retransmit=9 bytes_invalid=0 send_seq=32586 receive_seq=32586 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=22 upcoming_bytes=0 freq=63999166  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=1.49 cputime=243.047 memavail=624864 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1893.4: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000171 bytes_write=714761 bytes_read=377883 bytes_retransmit=9 bytes_invalid=0 send_seq=32641 receive_seq=32641 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999166  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=1.49 cputime=243.174 memavail=625116 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.8 pwm=0.000
Stats 1894.4: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000164 mcu_task_stddev=0.000171 bytes_write=715903 bytes_read=378464 bytes_retransmit=9 bytes_invalid=0 send_seq=32692 receive_seq=32692 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999165  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=1.49 cputime=243.279 memavail=625116 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1895.4: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000164 mcu_task_stddev=0.000171 bytes_write=717029 bytes_read=379059 bytes_retransmit=9 bytes_invalid=0 send_seq=32744 receive_seq=32743 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=22 upcoming_bytes=0 freq=63999165  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=1.49 cputime=243.427 memavail=625408 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1896.4: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000164 mcu_task_stddev=0.000171 bytes_write=718219 bytes_read=379703 bytes_retransmit=9 bytes_invalid=0 send_seq=32799 receive_seq=32799 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999165  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=1.49 cputime=243.565 memavail=625156 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1897.4: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000164 mcu_task_stddev=0.000171 bytes_write=719378 bytes_read=380293 bytes_retransmit=9 bytes_invalid=0 send_seq=32852 receive_seq=32852 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=2 upcoming_bytes=0 freq=63999164  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=1.45 cputime=243.676 memavail=624236 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1898.4: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000164 mcu_task_stddev=0.000171 bytes_write=720514 bytes_read=380932 bytes_retransmit=9 bytes_invalid=0 send_seq=32907 receive_seq=32907 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999164  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=1.45 cputime=243.836 memavail=624488 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1899.4: gcodein=0  mcu: mcu_awake=0.060 mcu_task_avg=0.000168 mcu_task_stddev=0.000172 bytes_write=721705 bytes_read=381604 bytes_retransmit=9 bytes_invalid=0 send_seq=32963 receive_seq=32963 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999168  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=1.45 cputime=244.018 memavail=624740 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1900.4: gcodein=0  mcu: mcu_awake=0.060 mcu_task_avg=0.000168 mcu_task_stddev=0.000172 bytes_write=722852 bytes_read=382181 bytes_retransmit=9 bytes_invalid=0 send_seq=33015 receive_seq=33015 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=23 upcoming_bytes=0 freq=63999169  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=1.45 cputime=244.185 memavail=624748 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1901.4: gcodein=0  mcu: mcu_awake=0.060 mcu_task_avg=0.000168 mcu_task_stddev=0.000172 bytes_write=723991 bytes_read=382794 bytes_retransmit=9 bytes_invalid=0 send_seq=33068 receive_seq=33068 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999169  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=1.45 cputime=244.319 memavail=624948 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1902.4: gcodein=0  mcu: mcu_awake=0.060 mcu_task_avg=0.000168 mcu_task_stddev=0.000172 bytes_write=725161 bytes_read=383420 bytes_retransmit=9 bytes_invalid=0 send_seq=33122 receive_seq=33122 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999169  heater_bed: target=0 temp=22.9 pwm=0.000 sysload=1.34 cputime=244.434 memavail=624300 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1903.4: gcodein=0  mcu: mcu_awake=0.060 mcu_task_avg=0.000168 mcu_task_stddev=0.000172 bytes_write=726338 bytes_read=384031 bytes_retransmit=9 bytes_invalid=0 send_seq=33177 receive_seq=33176 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=23 upcoming_bytes=0 freq=63999169  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=1.34 cputime=244.594 memavail=624296 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1904.4: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000167 mcu_task_stddev=0.000174 bytes_write=727472 bytes_read=384640 bytes_retransmit=9 bytes_invalid=0 send_seq=33228 receive_seq=33228 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999171  heater_bed: target=0 temp=22.9 pwm=0.000 sysload=1.34 cputime=244.760 memavail=624296 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1905.4: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000167 mcu_task_stddev=0.000174 bytes_write=728630 bytes_read=385245 bytes_retransmit=9 bytes_invalid=0 send_seq=33282 receive_seq=33281 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999170  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=1.34 cputime=244.893 memavail=624052 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1906.4: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000167 mcu_task_stddev=0.000174 bytes_write=729766 bytes_read=385838 bytes_retransmit=9 bytes_invalid=0 send_seq=33333 receive_seq=33333 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999169  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=1.34 cputime=244.998 memavail=624304 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 1907.4: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000167 mcu_task_stddev=0.000174 bytes_write=730927 bytes_read=386438 bytes_retransmit=9 bytes_invalid=0 send_seq=33385 receive_seq=33385 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999168  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=1.23 cputime=245.123 memavail=623356 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1908.4: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000167 mcu_task_stddev=0.000174 bytes_write=732057 bytes_read=387004 bytes_retransmit=9 bytes_invalid=0 send_seq=33435 receive_seq=33435 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=2 upcoming_bytes=0 freq=63999168  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=1.23 cputime=245.229 memavail=623556 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1909.4: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000174 bytes_write=733204 bytes_read=387660 bytes_retransmit=9 bytes_invalid=0 send_seq=33490 receive_seq=33490 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999167  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=1.23 cputime=245.360 memavail=623608 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1910.4: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000174 bytes_write=734371 bytes_read=388232 bytes_retransmit=9 bytes_invalid=0 send_seq=33541 receive_seq=33541 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999167  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=1.23 cputime=245.470 memavail=623616 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1911.4: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000174 bytes_write=735514 bytes_read=388884 bytes_retransmit=9 bytes_invalid=0 send_seq=33597 receive_seq=33597 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999169  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=1.23 cputime=245.609 memavail=623464 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1912.4: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000174 bytes_write=736674 bytes_read=389502 bytes_retransmit=9 bytes_invalid=0 send_seq=33651 receive_seq=33651 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999169  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=1.37 cputime=245.725 memavail=623020 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1913.4: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000174 bytes_write=737848 bytes_read=390053 bytes_retransmit=9 bytes_invalid=0 send_seq=33702 receive_seq=33701 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999169  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=1.37 cputime=245.832 memavail=623020 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1914.4: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000164 mcu_task_stddev=0.000170 bytes_write=738962 bytes_read=390678 bytes_retransmit=9 bytes_invalid=0 send_seq=33753 receive_seq=33753 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999169  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=1.37 cputime=245.966 memavail=623524 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1915.4: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000164 mcu_task_stddev=0.000170 bytes_write=740117 bytes_read=391283 bytes_retransmit=9 bytes_invalid=0 send_seq=33806 receive_seq=33806 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999168  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=1.37 cputime=246.079 memavail=623532 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1916.4: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000164 mcu_task_stddev=0.000170 bytes_write=741274 bytes_read=391834 bytes_retransmit=9 bytes_invalid=0 send_seq=33857 receive_seq=33856 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999168  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=1.37 cputime=246.198 memavail=623532 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1917.4: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000164 mcu_task_stddev=0.000170 bytes_write=742409 bytes_read=392455 bytes_retransmit=9 bytes_invalid=0 send_seq=33909 receive_seq=33909 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999168  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=1.26 cputime=246.309 memavail=623280 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1918.4: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000164 mcu_task_stddev=0.000170 bytes_write=743565 bytes_read=393073 bytes_retransmit=9 bytes_invalid=0 send_seq=33963 receive_seq=33963 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999171  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=1.26 cputime=246.441 memavail=623792 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1919.4: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000172 bytes_write=744689 bytes_read=393675 bytes_retransmit=9 bytes_invalid=0 send_seq=34015 receive_seq=34015 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999170  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=1.26 cputime=246.542 memavail=623792 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1920.4: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000172 bytes_write=745893 bytes_read=394319 bytes_retransmit=9 bytes_invalid=0 send_seq=34071 receive_seq=34071 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999169  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=1.26 cputime=246.675 memavail=623992 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1921.4: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000172 bytes_write=747012 bytes_read=394885 bytes_retransmit=9 bytes_invalid=0 send_seq=34121 receive_seq=34121 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=22 upcoming_bytes=0 freq=63999169  heater_bed: target=0 temp=23.5 pwm=0.000 sysload=1.26 cputime=246.786 memavail=623800 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1922.4: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000172 bytes_write=748144 bytes_read=395478 bytes_retransmit=9 bytes_invalid=0 send_seq=34173 receive_seq=34173 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999169  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=1.16 cputime=246.893 memavail=622608 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1923.4: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000172 bytes_write=749345 bytes_read=396117 bytes_retransmit=9 bytes_invalid=0 send_seq=34228 receive_seq=34228 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999168  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=1.16 cputime=247.027 memavail=623364 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1924.4: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000161 mcu_task_stddev=0.000170 bytes_write=750493 bytes_read=396752 bytes_retransmit=9 bytes_invalid=0 send_seq=34282 receive_seq=34282 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=22 upcoming_bytes=0 freq=63999167  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=1.16 cputime=247.135 memavail=623364 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1925.4: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000161 mcu_task_stddev=0.000170 bytes_write=751613 bytes_read=397311 bytes_retransmit=9 bytes_invalid=0 send_seq=34332 receive_seq=34332 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999167  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=1.16 cputime=247.254 memavail=623932 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1926.4: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000161 mcu_task_stddev=0.000170 bytes_write=752775 bytes_read=397898 bytes_retransmit=9 bytes_invalid=0 send_seq=34384 receive_seq=34383 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999166  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=1.16 cputime=247.354 memavail=624148 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 1927.4: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000161 mcu_task_stddev=0.000170 bytes_write=753917 bytes_read=398485 bytes_retransmit=9 bytes_invalid=0 send_seq=34435 receive_seq=34434 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=23 upcoming_bytes=0 freq=63999166  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=1.23 cputime=247.485 memavail=624216 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 1928.4: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000161 mcu_task_stddev=0.000170 bytes_write=755058 bytes_read=399088 bytes_retransmit=9 bytes_invalid=0 send_seq=34488 receive_seq=34488 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999166  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=1.23 cputime=247.588 memavail=624416 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1929.4: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000173 bytes_write=756203 bytes_read=399692 bytes_retransmit=9 bytes_invalid=0 send_seq=34539 receive_seq=34539 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999166  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=1.23 cputime=247.710 memavail=624976 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 1930.4: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000173 bytes_write=757349 bytes_read=400261 bytes_retransmit=9 bytes_invalid=0 send_seq=34589 receive_seq=34588 retransmit_seq=2 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=23 upcoming_bytes=0 freq=63999166  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=1.23 cputime=247.879 memavail=624984 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1931.4: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000173 bytes_write=758485 bytes_read=400846 bytes_retransmit=9 bytes_invalid=0 send_seq=34640 receive_seq=34640 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999166  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=1.23 cputime=248.008 memavail=624984 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1932.4: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000173 bytes_write=759640 bytes_read=401459 bytes_retransmit=9 bytes_invalid=0 send_seq=34693 receive_seq=34693 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999166  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=1.37 cputime=248.121 memavail=624580 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1933.4: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000173 bytes_write=760777 bytes_read=402033 bytes_retransmit=9 bytes_invalid=0 send_seq=34743 receive_seq=34743 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=23 upcoming_bytes=0 freq=63999166  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=1.37 cputime=248.262 memavail=624924 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1934.4: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000165 mcu_task_stddev=0.000174 bytes_write=761935 bytes_read=402648 bytes_retransmit=9 bytes_invalid=0 send_seq=34796 receive_seq=34796 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999167  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=1.37 cputime=248.429 memavail=625124 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1935.4: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000165 mcu_task_stddev=0.000174 bytes_write=763075 bytes_read=403279 bytes_retransmit=9 bytes_invalid=0 send_seq=34851 receive_seq=34851 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=23 upcoming_bytes=0 freq=63999167  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=1.37 cputime=248.604 memavail=625436 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 1936.4: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000165 mcu_task_stddev=0.000174 bytes_write=764229 bytes_read=403892 bytes_retransmit=9 bytes_invalid=0 send_seq=34904 receive_seq=34904 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999168  heater_bed: target=0 temp=22.9 pwm=0.000 sysload=1.37 cputime=248.765 memavail=625940 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 1937.4: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000165 mcu_task_stddev=0.000174 bytes_write=765407 bytes_read=404485 bytes_retransmit=9 bytes_invalid=0 send_seq=34956 receive_seq=34956 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999168  heater_bed: target=0 temp=22.9 pwm=0.000 sysload=1.26 cputime=248.876 memavail=625968 print_time=1206.651 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Starting Klippy...
Args: ['/home/biqu/klipper/klippy/klippy.py', '/home/biqu/printer_data/config/printer.cfg', '-I', '/home/biqu/printer_data/comms/klippy.serial', '-l', '/home/biqu/printer_data/logs/klippy.log', '-a', '/home/biqu/printer_data/comms/klippy.sock']
Git version: 'v0.12.0-139-g75a40e81-dirty'
Untracked files: klippy/extras/led_effect.py
Branch: master
Remote: origin
Tracked URL: https://github.com/Klipper3d/klipper
CPU: 4 core ?
Python: '3.9.2 (default, Feb 28 2021, 17:03:44) \n[GCC 10.2.1 20210110]'
Start printer at Thu Apr  4 02:23:55 2024 (1712219035.6 18.6)
===== Config file =====
[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]
default_type = echo

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% if printer.pause_resume.is_paused|lower == 'false' and park|lower == 'true'%}
	_TOOLHEAD_PARK_PAUSE_CANCEL
	{% endif %}
	TURN_OFF_HEATERS
	CANCEL_PRINT_BASE
variable_park = True

[gcode_macro PAUSE]
description = Pause actual running print
rename_existing = PAUSE_BASE
gcode = 
	PAUSE_BASE
	STATUS_BUSY
	_TOOLHEAD_PARK_PAUSE_CANCEL

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set extrude = printer['gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL'].extrude %}
	
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY) %}
	{%else %}
	{% set get_params = " " %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E{extrude} F2100
	{% if printer.gcode_move.absolute_extrude |lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	{% set z_park_delta = 10.0 %}
	
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - z_park_delta) %}
	{% set z_safe = z_park_delta %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	
	{% if printer.extruder.can_extrude|lower == 'true' %}
	M83
	G1 E-{extrude} F2100
	{% if printer.gcode_move.absolute_extrude|lower == 'true' %} M82 {% endif %}
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G91
	G1 Z{z_safe} F900
	G90
	G1 X{x_park} Y{y_park} F6000
	{% if printer.gcode_move.absolute_coordinates|lower == 'false' %} G91 {% endif %}
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}
variable_extrude = 1.0

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro GET_TIMELAPSE_SETUP]
description = Print the Timelapse setup
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set output_txt = ["Timelapse Setup:"] %}
	{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}
	{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}
	{% if tl.park.enable %}
	{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}
	{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}
	{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}
	{% endif %}
	{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}
	{% if not tl.extruder.fw_retract %}
	{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}
	{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}
	{% endif %}
	{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}
	{action_respond_info(output_txt|join("\n"))}

[gcode_macro _SET_TIMELAPSE_SETUP]
description = Set user parameters for timelapse
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	{% set park = {'min'   : {'x': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),
	'y': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},
	'max'   : {'x': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),
	'y': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},
	'center': {'x': (max.x-(max.x-min.x)/2)|round(3),
	'y': (max.y-(max.y-min.y)/2)|round(3)}} %}
	
	{% if params.ENABLE %}
	{% if params.ENABLE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == 'true' else False}
	{% else %}
	{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.VERBOSE %}
	{% if params.VERBOSE|lower is in ['true', 'false'] %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == 'true' else False}
	{% else %}
	{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_X %}
	{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}
	{% set _dummy = tl.park.custom.update({'x':params.CUSTOM_POS_X|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_Y %}
	{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}
	{% set _dummy = tl.park.custom.update({'y':params.CUSTOM_POS_Y|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}
	{% endif %}
	{% endif %}
	{% if params.CUSTOM_POS_DZ %}
	{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}
	{% set _dummy = tl.park.custom.update({'dz':params.CUSTOM_POS_DZ|float|round(3)}) %}
	{% else %}
	{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}
	{% endif %}
	{% endif %}
	{% if params.PARK_ENABLE %}
	{% if params.PARK_ENABLE|lower is in ['true', 'false'] %}
	{% set _dummy = tl.park.update({'enable':True if params.PARK_ENABLE|lower == 'true' else False}) %}
	{% else %}
	{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}
	{% endif %}
	{% endif %}
	{% if params.PARK_POS %}
	{% if params.PARK_POS|lower is in ['center','front_left','front_right','back_left','back_right','custom','x_only','y_only'] %}
	{% set dic = {'center'      : {'x': park.center.x   , 'y': park.center.y   , 'dz': 1                },
	'front_left'  : {'x': park.min.x      , 'y': park.min.y      , 'dz': 0                },
	'front_right' : {'x': park.max.x      , 'y': park.min.y      , 'dz': 0                },
	'back_left'   : {'x': park.min.x      , 'y': park.max.y      , 'dz': 0                },
	'back_right'  : {'x': park.max.x      , 'y': park.max.y      , 'dz': 0                },
	'custom'      : {'x': tl.park.custom.x, 'y': tl.park.custom.y, 'dz': tl.park.custom.dz},
	'x_only'      : {'x': tl.park.custom.x, 'y': 'none'          , 'dz': tl.park.custom.dz},
	'y_only'      : {'x': 'none'          , 'y': tl.park.custom.y, 'dz': tl.park.custom.dz}} %}
	{% set _dummy = tl.park.update({'pos':params.PARK_POS|lower}) %}
	{% set _dummy = tl.park.update({'coord':dic[tl.park.pos]}) %}
	{% else %}
	{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"
	% params.PARK_POS|upper)}
	{% endif %}
	{% endif %}
	{% if params.PARK_TIME %}
	{% if params.PARK_TIME|float >= 0.0 %}
	{% set _dummy = tl.park.update({'time':params.PARK_TIME|float|round(3)}) %}
	{% else %}
	{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"
	{% if params.TRAVEL_SPEED %}
	{% if params.TRAVEL_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'travel':params.TRAVEL_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_SPEED %}
	{% if params.RETRACT_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'retract':params.RETRACT_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}
	{% endif %}
	{% endif %}
	{% if params.EXTRUDE_SPEED %}
	{% if params.EXTRUDE_SPEED|float > 0.0 %}
	{% set _dummy = tl.speed.update({'extrude':params.EXTRUDE_SPEED|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"
	{% if params.EXTRUDE_DISTANCE %}
	{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'extrude':params.EXTRUDE_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.RETRACT_DISTANCE %}
	{% if params.RETRACT_DISTANCE|float >= 0.0 %}
	{% set _dummy = tl.extruder.update({'retract':params.RETRACT_DISTANCE|float|round(3)}) %}
	{% else %}
	{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}
	{% endif %}
	{% endif %}
	{% if params.FW_RETRACT %}
	{% if params.FW_RETRACT|lower is in ['true', 'false'] %}
	{% if 'firmware_retraction' in printer.configfile.settings %}
	{% set _dummy = tl.extruder.update({'fw_retract': True if params.FW_RETRACT|lower == 'true' else False}) %}
	{% else %}
	{% set _dummy = tl.extruder.update({'fw_retract':False}) %}
	{% if params.FW_RETRACT|capitalize == 'True' %}
	{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}
	{% endif %}
	{% endif %}
	{% else %}
	{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"
	{% if printer.configfile.settings['gcode_macro pause'] is defined %}
	{% set _dummy = tl.macro.update({'pause': printer.configfile.settings['gcode_macro pause'].rename_existing}) %}
	{% endif %}
	{% if printer.configfile.settings['gcode_macro resume'] is defined %}
	{% set _dummy = tl.macro.update({'resume': printer.configfile.settings['gcode_macro resume'].rename_existing}) %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"

[gcode_macro TIMELAPSE_TAKE_FRAME]
description = Take Timelapse shoot
variable_enable = False
variable_takingframe = False
variable_park = {'enable': False,
	'pos'   : 'center',
	'time'  : 0.1,
	'custom': {'x': 0, 'y': 0, 'dz': 0},
	'coord' : {'x': 0, 'y': 0, 'dz': 0}}
variable_extruder = {'fw_retract': False,
	'retract': 1.0,
	'extrude': 1.0}
variable_speed = {'travel': 100,
	'retract': 15,
	'extrude': 15}
variable_verbose = True
variable_check_time = 0.5
variable_restore = {'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}
variable_macro = {'pause': 'PAUSE', 'resume': 'RESUME'}
variable_is_paused = False
gcode = 
	{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower =='true' else False %}
	{% if enable %}
	{% if (hyperlapse and printer['gcode_macro HYPERLAPSE'].run) or
	(not hyperlapse and not printer['gcode_macro HYPERLAPSE'].run) %}
	{% if park.enable %}
	{% set pos = {'x': 'X' + park.coord.x|string if park.pos != 'y_only' else '',
	'y': 'Y' + park.coord.y|string if park.pos != 'x_only' else '',
	'z': 'Z'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}
	{% set restore = {'absolute': {'coordinates': printer.gcode_move.absolute_coordinates,
	'extrude'    : printer.gcode_move.absolute_extrude},
	'speed'   : printer.gcode_move.speed,
	'e'       : printer.gcode_move.gcode_position.e,
	'factor'  : {'speed'  : printer.gcode_move.speed_factor,
	'extrude': printer.gcode_move.extrude_factor}} %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}
	{% else %}
	{% if extruder.fw_retract %}
	G10
	{% else %}
	M83
	G0 E-{extruder.retract} F{speed.retract * 60}
	{% endif %}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True
	{macro.pause}
	SET_GCODE_OFFSET X=0 Y=0
	G90
	{% if "xyz" not in printer.toolhead.homed_axes %}
	{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}
	{% else %}
	G0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}
	{% endif %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION={check_time}
	M400
	{% endif %}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}
	{% endif %}
	{% else %}
	{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}
	{% endif %}

[gcode_macro _TIMELAPSE_NEW_FRAME]
description = action call for timelapse shoot. must be a seperate macro
gcode = 
	{action_call_remote_method("timelapse_newframe",
	macropark=printer['gcode_macro TIMELAPSE_TAKE_FRAME'].park,
	hyperlapse=params.HYPERLAPSE)}

[delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME]
gcode = 
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% set factor = {'speed': printer.gcode_move.speed_factor, 'extrude': printer.gcode_move.extrude_factor} %}
	{% if tl.takingframe %}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION={tl.check_time}
	{% else %}
	{tl.macro.resume} VELOCITY={tl.speed.travel}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False
	{% if not printer[printer.toolhead.extruder].can_extrude %}
	{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}
	{% else %}
	{% if tl.extruder.fw_retract %}
	G11
	{% else %}
	G0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}
	G0 F{tl.restore.speed}
	{% if tl.restore.absolute.extrude %}
	M82
	G92 E{tl.restore.e}
	{% endif %}
	{% endif %}
	{% endif %}
	{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}
	{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}
	{% if not tl.restore.absolute.coordinates %} G91 {% endif %}
	{% endif %}

[gcode_macro HYPERLAPSE]
description = Start/Stop a hyperlapse recording
variable_cycle = 0
variable_run = False
gcode = 
	{% set cycle = params.CYCLE|default(30)|int %}
	{% if params.ACTION and params.ACTION|lower == 'start' %}
	{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True
	{% elif params.ACTION and params.ACTION|lower == 'stop' %}
	{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}
	SET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0
	{% else %}
	{action_raise_error("Hyperlapse: No valid input parameter
	Use:
	- HYPERLAPSE ACTION=START [CYCLE=time]
	- HYPERLAPSE ACTION=STOP")}
	{% endif %}

[delayed_gcode _HYPERLAPSE_LOOP]
gcode = 
	UPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}
	TIMELAPSE_TAKE_FRAME HYPERLAPSE=True

[gcode_macro TIMELAPSE_RENDER]
description = Render Timelapse video and wait for the result
variable_render = False
variable_run_identifier = 0
gcode = 
	{action_respond_info("Timelapse: Rendering started")}
	{action_call_remote_method("timelapse_render", byrendermacro="True")}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True
	{printer.configfile.settings['gcode_macro pause'].rename_existing}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5

[delayed_gcode _WAIT_TIMELAPSE_RENDER]
gcode = 
	{% set ri = printer['gcode_macro TIMELAPSE_RENDER'].run_identifier % 4 %}
	SET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}
	{% if printer['gcode_macro TIMELAPSE_RENDER'].render %}
	M117 Rendering {['-','\\','|','/'][ri]}
	UPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5
	{% else %}
	{action_respond_info("Timelapse: Rendering finished")}
	M117
	{printer.configfile.settings['gcode_macro resume'].rename_existing}
	{% endif %}

[gcode_macro TEST_STREAM_DELAY]
description = Helper macro to find stream and park delay
gcode = 
	{% set min = printer.toolhead.axis_minimum %}
	{% set max = printer.toolhead.axis_maximum %}
	{% set act = printer.toolhead.position %}
	{% set tl = printer['gcode_macro TIMELAPSE_TAKE_FRAME'] %}
	{% if act.z > 5.0 %}
	G0 X{min.x + 5.0} F{tl.speed.travel|int * 60}
	G0 X{(max.x-min.x)/2}
	G4 P{tl.park.time|float * 1000}
	_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE
	G0 X{max.x - 5.0}
	{% else %}
	{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}
	{% endif %}

[neopixel sb_leds]
pin = PA8
chain_count = 10
color_order = GRB
initial_red = 1.0
initial_green = 0.0
initial_blue = 1.0

[led_effect sb_logo_busy]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (1,0,0)

[led_effect sb_logo_cleaning]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.0, 0.02, 0.5)

[led_effect sb_logo_calibrating_z]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.0, 0.0, 0.35)

[led_effect sb_logo_heating]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (1, 0.18, 0)

[led_effect sb_logo_cooling]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0, 0, 1)

[led_effect sb_logo_homing]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.0, 0.6, 0.2)

[led_effect sb_logo_leveling]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.5, 0.1, 0.4)

[led_effect sb_logo_meshing]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.5, 1.0, 0.0)

[led_effect sb_logo_printing]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	static 3 1 add (1.0, 1.0, 1.0)

[led_effect sb_logo_standby]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.01, 0.01, 0.01)

[led_effect sb_logo_part_ready]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	breathing 3 1 top (0.0, 1.0, 0.0)

[led_effect sb_nozzle_heating]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	breathing 3 1 top (1.0, 0.18, 0.0)

[led_effect sb_nozzle_cooling]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	breathing 3 1 top (0.1, 0.1, 1.0)

[led_effect sb_nozzle_standby]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	breathing 3 1 top (0.6, 0.0, 0.0)

[led_effect sb_nozzle_printing]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	static 3 1 top (1.0, 1.0, 1.0)

[led_effect sb_nozzle_part_ready]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	breathing 3 1 top (0.6, 1.0, 0.1)

[led_effect sb_critical_error]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds
layers = 
	strobe 1 1.5 add (1.0, 1.0, 1.0)
	breathing 2 0 difference (0.95, 0.0, 0.0)
	static 1 0 top (1.0, 0.0, 0.0)
run_on_error = true

[led_effect rainbow]
autostart = true
frame_rate = 24
leds = 
	neopixel:sb_leds
layers = 
	gradient 0.3 1 add (0.3, 0.0, 0.0),(0.0, 9.3, 0.0),(0.0, 0.0, 0.3)

[led_effect set_nozzle_leds]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (9,10)
layers = 
	static 0 0 top (1.0, 1.0, 1.0)

[led_effect set_logo_leds]
autostart = false
frame_rate = 24
leds = 
	neopixel:sb_leds (1-8)
layers = 
	static 0 0 top (1.0, 1.0, 1.0)

[gcode_macro set_logo_leds_off]
gcode = 
	SET_LED_EFFECT EFFECT=set_logo_leds STOP=1

[gcode_macro set_logo_leds_on]
gcode = 
	SET_LED_EFFECT EFFECT=set_logo_leds

[gcode_macro set_nozzle_leds_on]
gcode = 
	SET_LED_EFFECT EFFECT=set_nozzle_leds

[gcode_macro set_nozzle_leds_off]
gcode = 
	SET_LED_EFFECT EFFECT=set_nozzle_leds STOP=1

[gcode_macro status_off]
gcode = 
	STOP_LED_EFFECTS

[gcode_macro status_ready]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=rainbow

[gcode_macro status_part_ready]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_nozzle_part_ready
	SET_LED_EFFECT EFFECT=sb_logo_part_ready

[gcode_macro status_busy]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_nozzle_part_ready
	SET_LED_EFFECT EFFECT=sb_logo_part_ready

[gcode_macro status_heating]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_heating
	SET_LED_EFFECT EFFECT=sb_nozzle_heating

[gcode_macro status_cooling]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_cooling
	SET_LED_EFFECT EFFECT=sb_nozzle_cooling

[gcode_macro status_leveling]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_leveling
	set_nozzle_leds_on

[gcode_macro status_homing]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_homing
	set_nozzle_leds_on

[gcode_macro status_cleaning]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_cleaning
	set_nozzle_leds_on

[gcode_macro status_meshing]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_meshing
	set_nozzle_leds_on

[gcode_macro status_calibrating_z]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_calibrating_z
	set_nozzle_leds_on

[gcode_macro status_printing]
gcode = 
	STOP_LED_EFFECTS
	SET_LED_EFFECT EFFECT=sb_logo_printing
	SET_LED_EFFECT EFFECT=sb_nozzle_printing

[gcode_macro _bot_data]
variable_lapse_video_size = 0
variable_lapse_filename = 'None'
variable_lapse_path = 'None'
gcode = 
	M118 Setting bot lapse variables

[menu __main __octoprint]
type = list
name = Klipper

[menu __main __octoprint __pause]
type = command
enable = {printer.idle_timeout.state == "Printing"}
name = Pause printing
gcode = 
	PAUSE

[menu __main __octoprint __resume]
type = command
enable = {not printer.idle_timeout.state == "Printing"}
name = Resume printing
gcode = 
	RESUME

[menu __main __octoprint __abort]
type = command
enable = {printer.idle_timeout.state == "Printing"}
name = Abort printing
gcode = 
	CANCEL_PRINT

[gcode_macro _KAMP_Settings]
description = This macro contains all adjustable settings for KAMP
variable_verbose_enable = True
variable_mesh_margin = 0
variable_fuzz_amount = 0
variable_probe_dock_enable = False
variable_attach_macro = 'Attach_Probe'
variable_detach_macro = 'Dock_Probe'
variable_purge_height = 0.8
variable_tip_distance = 0
variable_purge_margin = 10
variable_purge_amount = 30
variable_flow_rate = 12
variable_smart_park_height = 10
gcode = 
	
	{action_respond_info(" Running the KAMP_Settings macro does nothing, it is only used for storing KAMP settings. ")}

[gcode_macro BED_MESH_CALIBRATE]
rename_existing = _BED_MESH_CALIBRATE
gcode = 
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set bed_mesh_min = printer.configfile.settings.bed_mesh.mesh_min %}
	{% set bed_mesh_max = printer.configfile.settings.bed_mesh.mesh_max %}
	{% set probe_count = printer.configfile.settings.bed_mesh.probe_count %}
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set probe_dock_enable = kamp_settings.probe_dock_enable | abs %}
	{% set attach_macro = kamp_settings.attach_macro | string %}
	{% set detach_macro = kamp_settings.detach_macro | string %}
	{% set mesh_margin = kamp_settings.mesh_margin | float %}
	{% set fuzz_amount = kamp_settings.fuzz_amount | float %}
	{% set probe_count = probe_count if probe_count|length > 1 else probe_count * 2  %}
	{% set max_probe_point_distance_x = ( bed_mesh_max[0] - bed_mesh_min[0] ) / (probe_count[0] - 1)  %}
	{% set max_probe_point_distance_y = ( bed_mesh_max[1] - bed_mesh_min[1] ) / (probe_count[1] - 1)  %}
	{% set x_min = all_points | map(attribute=0) | min | default(bed_mesh_min[0]) %}
	{% set y_min = all_points | map(attribute=1) | min | default(bed_mesh_min[1]) %}
	{% set x_max = all_points | map(attribute=0) | max | default(bed_mesh_max[0]) %}
	{% set y_max = all_points | map(attribute=1) | max | default(bed_mesh_max[1]) %}
	
	{% set fuzz_range = range((0) | int, (fuzz_amount * 100) | int + 1) %}
	{% set adapted_x_min = x_min - mesh_margin - (fuzz_range | random / 100.0) %}
	{% set adapted_y_min = y_min - mesh_margin - (fuzz_range | random / 100.0) %}
	{% set adapted_x_max = x_max + mesh_margin + (fuzz_range | random / 100.0) %}
	{% set adapted_y_max = y_max + mesh_margin + (fuzz_range | random / 100.0) %}
	
	{% set adapted_x_min = [adapted_x_min , bed_mesh_min[0]] | max %}
	{% set adapted_y_min = [adapted_y_min , bed_mesh_min[1]] | max %}
	{% set adapted_x_max = [adapted_x_max , bed_mesh_max[0]] | min %}
	{% set adapted_y_max = [adapted_y_max , bed_mesh_max[1]] | min %}
	
	{% set points_x = (((adapted_x_max - adapted_x_min) / max_probe_point_distance_x) | round(method='ceil') | int) + 1 %}
	{% set points_y = (((adapted_y_max - adapted_y_min) / max_probe_point_distance_y) | round(method='ceil') | int) + 1 %}
	
	{% if (([points_x, points_y]|max) > 6) %}
	{% set algorithm = "bicubic" %}
	{% set min_points = 4 %}
	{% else %}
	{% set algorithm = "lagrange" %}
	{% set min_points = 3 %}
	{% endif %}
	
	{% set points_x = [points_x , min_points]|max %}
	{% set points_y = [points_y , min_points]|max %}
	{% set points_x = [points_x , probe_count[0]]|min %}
	{% set points_y = [points_y , probe_count[1]]|min %}
	
	{% if verbose_enable == True %}
	{% if printer.exclude_object.objects != [] %}
	
	{ action_respond_info( "Algorithm: {}.".format(
	(algorithm),
	)) }
	
	{ action_respond_info("Default probe count: {},{}.".format(
	(probe_count[0]),
	(probe_count[1]),
	)) }
	
	{ action_respond_info("Adapted probe count: {},{}.".format(
	(points_x),
	(points_y),
	)) }
	
	{action_respond_info("Default mesh bounds: {}, {}.".format(
	(bed_mesh_min[0],bed_mesh_min[1]),
	(bed_mesh_max[0],bed_mesh_max[1]),
	)) }
	
	{% if mesh_margin > 0 %}
	{action_respond_info("Mesh margin is {}, mesh bounds extended by {}mm.".format(
	(mesh_margin),
	(mesh_margin),
	)) }
	{% else %}
	{action_respond_info("Mesh margin is 0, margin not increased.")}
	{% endif %}
	
	{% if fuzz_amount > 0 %}
	{action_respond_info("Mesh point fuzzing enabled, points fuzzed up to {}mm.".format(
	(fuzz_amount),
	)) }
	{% else %}
	{action_respond_info("Fuzz amount is 0, mesh points not fuzzed.")}
	{% endif %}
	
	{ action_respond_info("Adapted mesh bounds: {}, {}.".format(
	(adapted_x_min, adapted_y_min),
	(adapted_x_max, adapted_y_max),
	)) }
	
	{action_respond_info("KAMP adjustments successful. Happy KAMPing!")}
	
	{% else %}
	
	{action_respond_info("No objects detected! Check your gcode and make sure that EXCLUDE_OBJECT_DEFINE is happening before BED_MESH_CALIBRATE is called. Defaulting to regular meshing.")}
	G4 P5000
	{% endif %}
	
	{% endif %}
	
	{% if probe_dock_enable == True %}
	{attach_macro}
	{% endif %}
	
	_BED_MESH_CALIBRATE mesh_min={adapted_x_min},{adapted_y_min} mesh_max={adapted_x_max},{adapted_y_max} ALGORITHM={algorithm} PROBE_COUNT={points_x},{points_y}
	
	{% if probe_dock_enable == True %}
	{detach_macro}
	{% endif %}

[gcode_macro LINE_PURGE]
description = A purge macro that adapts to be near your actual printed objects
gcode = 
	
	{% set travel_speed = (printer.toolhead.max_velocity) * 60 | float %}
	{% set cross_section = printer.configfile.settings.extruder.max_extrude_cross_section | float %}
	
	
	{% if printer.firmware_retraction is defined %}
	{% set RETRACT = G10 | string %}
	{% set UNRETRACT = G11 | string %}
	{% else %}
	{% set RETRACT = 'G1 E-.5 F2100' | string %}
	{% set UNRETRACT = 'G1 E.5 F2100' | string %}
	{% endif %}
	
	
	{% set verbose_enable = printer["gcode_macro _KAMP_Settings"].verbose_enable | abs %}
	{% set purge_height = printer["gcode_macro _KAMP_Settings"].purge_height | float %}
	{% set tip_distance = printer["gcode_macro _KAMP_Settings"].tip_distance | float %}
	{% set purge_margin = printer["gcode_macro _KAMP_Settings"].purge_margin | float %}
	{% set purge_amount = printer["gcode_macro _KAMP_Settings"].purge_amount | float %}
	{% set flow_rate = printer["gcode_macro _KAMP_Settings"].flow_rate | float %}
	
	
	
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set purge_x_min = (all_points | map(attribute=0) | min | default(0)) %}
	{% set purge_x_max = (all_points | map(attribute=0) | max | default(0)) %}
	{% set purge_y_min = (all_points | map(attribute=1) | min | default(0)) %}
	{% set purge_y_max = (all_points | map(attribute=1) | max | default(0)) %}
	
	{% set purge_x_center = ([((purge_x_max + purge_x_min) / 2) - (purge_amount / 2), 0] | max) %}
	{% set purge_y_center = ([((purge_y_max + purge_y_min) / 2) - (purge_amount / 2), 0] | max) %}
	
	{% set purge_x_origin = ([purge_x_min - purge_margin, 0] | max) %}
	{% set purge_y_origin = ([purge_y_min - purge_margin, 0] | max) %}
	
	
	{% set purge_move_speed = (flow_rate / 5.0) * 60 | float %}
	
	{% if cross_section < 5 %}
	
	{action_respond_info("[Extruder] max_extrude_cross_section is insufficient for purge, please set it to 5 or greater. Purge skipped.")}
	
	{% else %}
	
	{% if verbose_enable == True %}
	
	{action_respond_info("Moving filament tip {}mms".format(
	(tip_distance),
	)) }
	{% endif %}
	
	{% if printer.firmware_retraction is defined %}
	{action_respond_info("KAMP purge is using firmware retraction.")}
	{% else %}
	{action_respond_info("KAMP purge is not using firmware retraction, it is recommended to configure it.")}
	{% endif %}
	
	{% if purge_y_origin > 0 %}
	
	{action_respond_info("KAMP purge starting at {}, {} and purging {}mm of filament, requested flow rate is {}mm3/s.".format(
	(purge_x_center),
	(purge_y_origin),
	(purge_amount),
	(flow_rate),
	)) }
	
	{% else %}
	
	{action_respond_info("KAMP purge starting at {}, {} and purging {}mm of filament, requested flow rate is {}mm3/s.".format(
	(purge_x_origin),
	(purge_y_center),
	(purge_amount),
	(flow_rate),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Prepurge_State
	
	{% if purge_y_origin > 0 %}
	
	G92 E0
	G0 F{travel_speed}
	G90
	G0 X{purge_x_center} Y{purge_y_origin}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 X{purge_x_center + purge_amount} E{purge_amount} F{purge_move_speed}
	{RETRACT}
	G0 X{purge_x_center + purge_amount + 10} F{travel_speed}
	G92 E0
	M82
	G0 Z{purge_height * 2} F{travel_speed}
	
	{% else %}
	
	G92 E0
	G0 F{travel_speed}
	G90
	G0 X{purge_x_origin} Y{purge_y_center}
	G0 Z{purge_height}
	M83
	G1 E{tip_distance} F{purge_move_speed}
	G1 Y{purge_y_center + purge_amount} E{purge_amount} F{purge_move_speed}
	{RETRACT}
	G0 Y{purge_y_center + purge_amount + 10} F{travel_speed}
	G92 E0
	M82
	G0 Z{purge_height * 2} F{travel_speed}
	
	{% endif %}
	
	RESTORE_GCODE_STATE NAME=Prepurge_State
	
	{% endif %}

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set kamp_settings = printer["gcode_macro _KAMP_Settings"] %}
	{% set z_height = kamp_settings.smart_park_height | float %}
	{% set purge_margin = kamp_settings.purge_margin | float %}
	{% set verbose_enable = kamp_settings.verbose_enable | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = (printer.toolhead.max_velocity) * 60 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Presmartpark_State
	
	G90
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F{travel_speed}
	G0 Z{z_height}
	
	RESTORE_GCODE_STATE NAME=Presmartpark_State

[exclude_object]

[stepper_x]
step_pin = PB13
dir_pin = !PB12
enable_pin = !PB14
microsteps = 64
rotation_distance = 40
endstop_pin = ^PC0
position_endstop = -27
position_min = -27
position_max = 230
homing_speed = 80

[tmc2209 stepper_x]
uart_pin = PC11
tx_pin = PC10
uart_address = 0
run_current = 0.580
stealthchop_threshold = 999999

[stepper_y]
step_pin = PB10
dir_pin = !PB2
enable_pin = !PB11
microsteps = 64
rotation_distance = 40
endstop_pin = ^PC1
position_endstop = -11
position_min = -11
position_max = 220
homing_speed = 80

[tmc2209 stepper_y]
uart_pin = PC11
tx_pin = PC10
uart_address = 2
run_current = 0.580
stealthchop_threshold = 999999

[stepper_z]
step_pin = PB0
dir_pin = PC5
enable_pin = !PB1
microsteps = 64
rotation_distance = 2
endstop_pin = probe:z_virtual_endstop
position_min = -5
position_max = 250

[tmc2209 stepper_z]
uart_pin = PC11
tx_pin = PC10
uart_address = 1
run_current = 0.580
stealthchop_threshold = 999999

[safe_z_home]
home_xy_position = 149, 120
speed = 80
z_hop = 10
z_hop_speed = 5

[extruder]
max_extrude_only_distance = 350.0
max_extrude_cross_section = 5
step_pin = PB3
dir_pin = !PB4
enable_pin = !PD1
microsteps = 64
rotation_distance = 22.110
nozzle_diameter = 0.600
filament_diameter = 1.750
heater_pin = PC8
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PA0
min_temp = 0
max_temp = 250
control = pid
pid_kp = 23.249
pid_ki = 1.336
pid_kd = 101.134

[tmc2209 extruder]
uart_pin = PC11
tx_pin = PC10
uart_address = 3
run_current = 0.650
stealthchop_threshold = 999999

[heater_bed]
heater_pin = PC9
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PC4
min_temp = 0
max_temp = 130
control = pid
pid_kp = 69.714
pid_ki = 1.260
pid_kd = 964.661

[heater_fan heatbreak_cooling_fan]
pin = PB15
heater = extruder
heater_temp = 50

[controller_fan controller_fan]
pin = PC7
idle_timeout = 60

[fan]
pin = PC6

[mcu]
serial = /dev/ttyS0
restart_method = command
baud = 115200

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 3000
max_z_velocity = 5
max_z_accel = 100

[bltouch]
sensor_pin = ^PC14
control_pin = PA1
x_offset = -39
y_offset = -10
probe_with_touch_mode = True
pin_up_touch_mode_reports_triggered = True
stow_on_each_sample = False
z_offset = 2.220

[display]
lcd_type = uc1701
cs_pin = PB8
a0_pin = PD6
rst_pin = PB9
encoder_pins = ^PA9, ^PA10
click_pin = ^!PB5
contrast = 63
spi_software_sclk_pin = PA5
spi_software_mosi_pin = PA7
spi_software_miso_pin = PA6

[neopixel SKR_screen]
pin = PA15
chain_count = 3
initial_red = 0.4
initial_green = 0.05
initial_blue = 0.0
color_order = RGB

[delayed_gcode welcome]
initial_duration = .1
gcode = 
	SET_LED LED=SKR_screen RED=0.5 GREEN=0.0 BLUE=0.0 TRANSMIT=0
	SET_LED LED=SKR_screen RED=0.0 GREEN=0.0 BLUE=0.5 INDEX=1 TRANSMIT=1

[output_pin relay]
pin = PC13
value = 1
shutdown_value = 0

[board_pins]
aliases = 
	
	EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8, EXP1_9=<GND>,
	EXP1_2=PA15, EXP1_4=<RST>, EXP1_6=PB9,  EXP1_8=PD6, EXP1_10=<5V>

[bed_screws]
screw1 = 23, 24
screw2 = 191, 24
screw3 = 191, 195
screw4 = 23, 195

[screws_tilt_adjust]
screw1 = 62, 34
screw1_name = front left screw
screw2 = 230, 34
screw2_name = front right screw
screw3 = 230, 205
screw3_name = rear left screw
screw4 = 62, 205
screw4_name = rear right screw
horizontal_move_z = 10
speed = 50
screw_thread = CW-M4

[bed_mesh]
speed = 120
horizontal_move_z = 5
mesh_min = 15, 15
mesh_max = 190, 198
probe_count = 6, 6
algorithm = bicubic
bicubic_tension = 0.2
move_check_distance = 6
split_delta_z = .025

[gcode_arcs]

[firmware_retraction]

[gcode_macro M300]
description = Beeper macro
gcode = 
	SET_PIN PIN=beeper Value=1
	G4 P{params.P|default(150)|int}
	SET_PIN PIN=beeper Value=0

[gcode_macro BEEP]
gcode = 
	M300 P100

[gcode_macro BEEP_TWICE]
gcode = 
	M300 P100
	M300 P100

[gcode_macro BEEP_LONG]
gcode = 
	M300 P500

[gcode_macro Heat_to_remove]
gcode = 
	STATUS_HEATING
	M140 S60
	M117 Heating bed to remove print...
	BEEP
	M190 S60
	BEEP_TWICE
	M117 Done heating!!!

[gcode_macro START_PRINT]
gcode = 
	BEEP
	G92 E0
	G28
	STATUS_HEATING
	M104 S{180}
	M140 S{50}
	M190 S{50}
	BED_MESH_CALIBRATE
	
	SMART_PARK
	M104 S{params.EXTRUDER_TEMP}
	M140 S{params.BED_TEMP}
	STATUS_HEATING
	M190 S{params.BED_TEMP}
	LINE_PURGE
	STATUS_PRINTING
	G92 E0
	G1 Z2.0 F3000
	G1 X5 Y20 Z0.3 F5000.0
	M117 Printing...

[gcode_macro END_PRINT]
gcode = 
	BEEP_TWICE
	G91
	G1 E-5 F2700
	G1 E-2 Z0.2 F2400
	G1 X5 Y5 F3000
	G1 Z10
	G90
	G1 X0 Y210
	M106 S0
	M104 S0
	M140 S0
	M84 X Y E
	BED_MESH_CLEAR
	STATUS_PART_READY
	M117 Done!!!

[gcode_macro PURGE]
gcode = 
	M117 PURGING...
	G91
	G1 E45.0 F250
	G90

[gcode_macro LOAD_FILAMENT]
gcode = 
	{% set speed = params.SPEED|default(300) %}
	{% set max_velocity = printer.configfile.settings['extruder'].max_extrude_only_velocity %}
	SAVE_GCODE_STATE NAME = load_state
	G91
	G92 E0
	G1 E350 F{max_velocity}
	G1 E25 F{speed}
	BEEP_TWICE
	RESTORE_GCODE_STATE NAME = load_state

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	{% set speed = params.SPEED|default(300) %}
	{% set max_velocity = printer.configfile.settings['extruder'].max_extrude_only_velocity %}
	SAVE_GCODE_STATE NAME = unload_state
	G91
	BEEP
	G92 E0
	G1 E25 F{speed}
	G1 E-350 F{max_velocity}
	BEEP_TWICE
	RESTORE_GCODE_STATE NAME = unload_state

[gcode_macro T0]
gcode = 

[bed_mesh default]
version = 1
points = 
	0.076562, 0.072656, 0.074844
	0.053906, 0.051875, 0.050781
	0.084219, 0.085312, 0.091094
x_count = 3
y_count = 3
mesh_x_pps = 2
mesh_y_pps = 2
algo = lagrange
tension = 0.2
min_x = 106.97
max_x = 113.03
min_y = 97.3
max_y = 122.69999999999999
=======================
Declaration of '__main __octoprint' hides previous menuitem declaration
Declaration of '__main __octoprint __pause' hides previous menuitem declaration
Declaration of '__main __octoprint __resume' hides previous menuitem declaration
Declaration of '__main __octoprint __abort' hides previous menuitem declaration
Extruder max_extrude_ratio=2.078758
mcu 'mcu': Starting serial connect
mcu 'mcu': got {'oid': 27, 'next_clock': 695999488, 'value': 31391, '#name': 'analog_in_state', '#sent_time': 29.471739804333332, '#receive_time': 29.47376592966667}
mcu 'mcu': got {'oid': 16, 'next_clock': 708159488, 'value': 31398, '#name': 'analog_in_state', '#sent_time': 29.639890096333332, '#receive_time': 29.66368217966667}
mcu 'mcu': got {'oid': 27, 'next_clock': 715199488, 'value': 31416, '#name': 'analog_in_state', '#sent_time': 29.74975626333333, '#receive_time': 29.77369988766667}
Loaded MCU 'mcu' 106 commands (v0.12.0-138-g5e280680 / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1_PA9_PA10=PA9,PA10 BUS_PINS_i2c1_PB6_PB7=PB6,PB7 BUS_PINS_i2c1_PB8_PB9=PB8,PB9 BUS_PINS_i2c2_PB10_PB11=PB10,PB11 BUS_PINS_i2c2_PB13_PB14=PB13,PB14 BUS_PINS_i2c3_PB3_PB4=PB3,PB4 BUS_PINS_i2c3_PC0_PC1=PC0,PC1 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3=PB4,PB5,PB3 CLOCK_FREQ=64000000 MCU=stm32g0b1xx PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_crystal=PF0,PF1 RESERVE_PINS_serial=PA3,PA2 SERIAL_BAUD=115200 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Configured MCU 'mcu' (1024 moves)
Starting heater checks for heater_bed
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (54.0, 25.0)    | (15.0, 15.0)
  1   | (89.0, 25.0)    | (50.0, 15.0)
  2   | (124.0, 25.0)   | (85.0, 15.0)
  3   | (159.0, 25.0)   | (120.0, 15.0)
  4   | (194.0, 25.0)   | (155.0, 15.0)
  5   | (229.0, 25.0)   | (190.0, 15.0)
  6   | (229.0, 61.6)   | (190.0, 51.6)
  7   | (194.0, 61.6)   | (155.0, 51.6)
  8   | (159.0, 61.6)   | (120.0, 51.6)
  9   | (124.0, 61.6)   | (85.0, 51.6)
  10  | (89.0, 61.6)    | (50.0, 51.6)
  11  | (54.0, 61.6)    | (15.0, 51.6)
  12  | (54.0, 98.2)    | (15.0, 88.2)
  13  | (89.0, 98.2)    | (50.0, 88.2)
  14  | (124.0, 98.2)   | (85.0, 88.2)
  15  | (159.0, 98.2)   | (120.0, 88.2)
  16  | (194.0, 98.2)   | (155.0, 88.2)
  17  | (229.0, 98.2)   | (190.0, 88.2)
  18  | (229.0, 134.8)  | (190.0, 124.8)
  19  | (194.0, 134.8)  | (155.0, 124.8)
  20  | (159.0, 134.8)  | (120.0, 124.8)
  21  | (124.0, 134.8)  | (85.0, 124.8)
  22  | (89.0, 134.8)   | (50.0, 124.8)
  23  | (54.0, 134.8)   | (15.0, 124.8)
  24  | (54.0, 171.4)   | (15.0, 161.4)
  25  | (89.0, 171.4)   | (50.0, 161.4)
  26  | (124.0, 171.4)  | (85.0, 161.4)
  27  | (159.0, 171.4)  | (120.0, 161.4)
  28  | (194.0, 171.4)  | (155.0, 161.4)
  29  | (229.0, 171.4)  | (190.0, 161.4)
  30  | (229.0, 208.0)  | (190.0, 198.0)
  31  | (194.0, 208.0)  | (155.0, 198.0)
  32  | (159.0, 208.0)  | (120.0, 198.0)
  33  | (124.0, 208.0)  | (85.0, 198.0)
  34  | (89.0, 208.0)   | (50.0, 198.0)
  35  | (54.0, 208.0)   | (15.0, 198.0)
Starting heater checks for extruder
webhooks client 281473176184096: New connection
webhooks client 281473176184096: Client info {'program': 'Moonraker', 'version': 'v0.8.0-324-ga3e4dac'}
Stats 32.9: gcodein=0  mcu: mcu_awake=0.010 mcu_task_avg=0.000033 mcu_task_stddev=0.000026 bytes_write=7263 bytes_read=6858 bytes_retransmit=17 bytes_invalid=0 send_seq=302 receive_seq=299 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=3 upcoming_bytes=196 freq=63998964  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=4.46 cputime=8.235 memavail=677120 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
webhooks: registering remote method 'shutdown_machine' for connection id: 281473176184096
webhooks: registering remote method 'reboot_machine' for connection id: 281473176184096
webhooks: registering remote method 'pause_job_queue' for connection id: 281473176184096
webhooks: registering remote method 'start_job_queue' for connection id: 281473176184096
webhooks: registering remote method 'set_device_power' for connection id: 281473176184096
Stats 33.9: gcodein=0  mcu: mcu_awake=0.010 mcu_task_avg=0.000033 mcu_task_stddev=0.000026 bytes_write=8586 bytes_read=7450 bytes_retransmit=17 bytes_invalid=0 send_seq=354 receive_seq=354 retransmit_seq=3 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999029  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=4.46 cputime=8.463 memavail=684544 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 34.9: gcodein=0  mcu: mcu_awake=0.010 mcu_task_avg=0.000033 mcu_task_stddev=0.000026 bytes_write=9765 bytes_read=8139 bytes_retransmit=17 bytes_invalid=0 send_seq=411 receive_seq=411 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63998959  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=4.46 cputime=8.641 memavail=674832 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 36.0: gcodein=0  mcu: mcu_awake=0.079 mcu_task_avg=0.000174 mcu_task_stddev=0.000216 bytes_write=10892 bytes_read=8728 bytes_retransmit=17 bytes_invalid=0 send_seq=459 receive_seq=459 retransmit_seq=3 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63998939  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=4.34 cputime=8.799 memavail=677048 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 37.0: gcodein=0  mcu: mcu_awake=0.079 mcu_task_avg=0.000174 mcu_task_stddev=0.000216 bytes_write=12010 bytes_read=9295 bytes_retransmit=17 bytes_invalid=0 send_seq=509 receive_seq=509 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=22 upcoming_bytes=0 freq=63998961  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=4.34 cputime=8.930 memavail=679656 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 38.0: gcodein=0  mcu: mcu_awake=0.079 mcu_task_avg=0.000174 mcu_task_stddev=0.000216 bytes_write=13181 bytes_read=9911 bytes_retransmit=17 bytes_invalid=0 send_seq=561 receive_seq=561 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63998938  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=4.34 cputime=9.065 memavail=682736 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 39.0: gcodein=0  mcu: mcu_awake=0.079 mcu_task_avg=0.000174 mcu_task_stddev=0.000216 bytes_write=14327 bytes_read=10490 bytes_retransmit=17 bytes_invalid=0 send_seq=612 receive_seq=612 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=2 upcoming_bytes=0 freq=63998917  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=4.34 cputime=9.199 memavail=678940 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 40.0: gcodein=0  mcu: mcu_awake=0.079 mcu_task_avg=0.000174 mcu_task_stddev=0.000216 bytes_write=15450 bytes_read=11096 bytes_retransmit=17 bytes_invalid=0 send_seq=665 receive_seq=665 retransmit_seq=3 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63998943  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=4.34 cputime=9.326 memavail=676600 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 41.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000174 bytes_write=16618 bytes_read=11708 bytes_retransmit=17 bytes_invalid=0 send_seq=717 receive_seq=716 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63998945  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=4.40 cputime=9.446 memavail=671556 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 42.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000174 bytes_write=17788 bytes_read=12394 bytes_retransmit=17 bytes_invalid=0 send_seq=774 receive_seq=774 retransmit_seq=3 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63998957  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=4.40 cputime=9.571 memavail=669468 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 43.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000174 bytes_write=18946 bytes_read=13005 bytes_retransmit=17 bytes_invalid=0 send_seq=828 receive_seq=828 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63998981  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=4.40 cputime=9.715 memavail=665264 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 44.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000174 bytes_write=20056 bytes_read=13579 bytes_retransmit=17 bytes_invalid=0 send_seq=878 receive_seq=878 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63998992  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=4.40 cputime=9.849 memavail=662112 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 45.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000174 bytes_write=21248 bytes_read=14205 bytes_retransmit=17 bytes_invalid=0 send_seq=932 receive_seq=932 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999000  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=4.40 cputime=9.974 memavail=659736 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 46.0: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000167 mcu_task_stddev=0.000171 bytes_write=22347 bytes_read=14768 bytes_retransmit=17 bytes_invalid=0 send_seq=981 receive_seq=981 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999014  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=4.20 cputime=10.096 memavail=658540 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Unknown command:"RESTORE"
Stats 47.0: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000167 mcu_task_stddev=0.000171 bytes_write=23490 bytes_read=15360 bytes_retransmit=17 bytes_invalid=0 send_seq=1033 receive_seq=1033 retransmit_seq=3 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999022  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=4.20 cputime=10.238 memavail=657944 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 48.0: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000167 mcu_task_stddev=0.000171 bytes_write=24613 bytes_read=15921 bytes_retransmit=17 bytes_invalid=0 send_seq=1082 receive_seq=1082 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999029  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=4.20 cputime=10.401 memavail=658432 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 49.0: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000167 mcu_task_stddev=0.000171 bytes_write=25792 bytes_read=16545 bytes_retransmit=17 bytes_invalid=0 send_seq=1137 receive_seq=1137 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999029  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=4.20 cputime=10.531 memavail=657796 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.7 pwm=0.000
Stats 50.0: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000167 mcu_task_stddev=0.000171 bytes_write=26931 bytes_read=17111 bytes_retransmit=17 bytes_invalid=0 send_seq=1188 receive_seq=1187 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999069  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=4.20 cputime=10.644 memavail=657692 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 51.0: gcodein=0  mcu: mcu_awake=0.055 mcu_task_avg=0.000162 mcu_task_stddev=0.000172 bytes_write=28036 bytes_read=17702 bytes_retransmit=17 bytes_invalid=0 send_seq=1237 receive_seq=1237 retransmit_seq=3 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999070  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=3.95 cputime=10.764 memavail=657528 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 52.0: gcodein=0  mcu: mcu_awake=0.055 mcu_task_avg=0.000162 mcu_task_stddev=0.000172 bytes_write=29228 bytes_read=18318 bytes_retransmit=17 bytes_invalid=0 send_seq=1292 receive_seq=1292 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999069  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=3.95 cputime=10.884 memavail=658416 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 53.0: gcodein=0  mcu: mcu_awake=0.055 mcu_task_avg=0.000162 mcu_task_stddev=0.000172 bytes_write=30326 bytes_read=18866 bytes_retransmit=17 bytes_invalid=0 send_seq=1340 receive_seq=1340 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=24 upcoming_bytes=0 freq=63999078  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=3.95 cputime=11.010 memavail=637108 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 54.0: gcodein=0  mcu: mcu_awake=0.055 mcu_task_avg=0.000162 mcu_task_stddev=0.000172 bytes_write=31492 bytes_read=19518 bytes_retransmit=17 bytes_invalid=0 send_seq=1396 receive_seq=1396 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999086  heater_bed: target=0 temp=22.9 pwm=0.000 sysload=3.95 cputime=11.143 memavail=653612 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 55.0: gcodein=0  mcu: mcu_awake=0.055 mcu_task_avg=0.000162 mcu_task_stddev=0.000172 bytes_write=32688 bytes_read=20129 bytes_retransmit=17 bytes_invalid=0 send_seq=1450 receive_seq=1450 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999094  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=3.95 cputime=11.283 memavail=624472 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 56.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000170 bytes_write=33801 bytes_read=20733 bytes_retransmit=17 bytes_invalid=0 send_seq=1501 receive_seq=1501 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999096  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=4.11 cputime=11.418 memavail=656284 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 57.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000170 bytes_write=34955 bytes_read=21338 bytes_retransmit=17 bytes_invalid=0 send_seq=1554 receive_seq=1554 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999098  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=4.11 cputime=11.554 memavail=610896 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 58.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000170 bytes_write=36117 bytes_read=21905 bytes_retransmit=17 bytes_invalid=0 send_seq=1605 receive_seq=1604 retransmit_seq=3 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=2 upcoming_bytes=0 freq=63999110  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=4.11 cputime=11.695 memavail=609600 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 59.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000170 bytes_write=37261 bytes_read=22536 bytes_retransmit=17 bytes_invalid=0 send_seq=1659 receive_seq=1659 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999114  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=4.11 cputime=11.825 memavail=608196 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 60.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000170 bytes_write=38395 bytes_read=23115 bytes_retransmit=17 bytes_invalid=0 send_seq=1710 receive_seq=1710 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=2 upcoming_bytes=0 freq=63999113  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=4.11 cputime=11.952 memavail=657080 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 61.0: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000163 mcu_task_stddev=0.000171 bytes_write=39528 bytes_read=23745 bytes_retransmit=17 bytes_invalid=0 send_seq=1763 receive_seq=1763 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999113  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=3.78 cputime=12.058 memavail=656848 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.4 pwm=0.000
Stats 62.0: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000163 mcu_task_stddev=0.000171 bytes_write=40705 bytes_read=24330 bytes_retransmit=17 bytes_invalid=0 send_seq=1815 receive_seq=1815 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999113  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=3.78 cputime=12.164 memavail=656896 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 63.0: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000163 mcu_task_stddev=0.000171 bytes_write=41827 bytes_read=24938 bytes_retransmit=17 bytes_invalid=0 send_seq=1867 receive_seq=1867 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999109  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=3.78 cputime=12.280 memavail=656392 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 64.0: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000163 mcu_task_stddev=0.000171 bytes_write=42962 bytes_read=25517 bytes_retransmit=17 bytes_invalid=0 send_seq=1918 receive_seq=1918 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999122  heater_bed: target=0 temp=23.5 pwm=0.000 sysload=3.78 cputime=12.416 memavail=656392 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 65.0: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000163 mcu_task_stddev=0.000171 bytes_write=44142 bytes_read=26081 bytes_retransmit=17 bytes_invalid=0 send_seq=1970 receive_seq=1969 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999119  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=3.78 cputime=12.520 memavail=656144 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 66.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000171 bytes_write=45297 bytes_read=26776 bytes_retransmit=17 bytes_invalid=0 send_seq=2027 receive_seq=2027 retransmit_seq=3 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999118  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=3.48 cputime=12.651 memavail=656140 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 67.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000171 bytes_write=46446 bytes_read=27376 bytes_retransmit=17 bytes_invalid=0 send_seq=2079 receive_seq=2079 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999125  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=3.48 cputime=12.793 memavail=656140 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 68.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000171 bytes_write=47607 bytes_read=27953 bytes_retransmit=17 bytes_invalid=0 send_seq=2131 receive_seq=2131 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=2 upcoming_bytes=0 freq=63999126  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=3.48 cputime=12.898 memavail=655636 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 69.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000171 bytes_write=48750 bytes_read=28566 bytes_retransmit=17 bytes_invalid=0 send_seq=2184 receive_seq=2184 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999124  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=3.48 cputime=13.017 memavail=655636 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 70.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000171 bytes_write=49888 bytes_read=29145 bytes_retransmit=17 bytes_invalid=0 send_seq=2235 receive_seq=2235 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999124  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=3.48 cputime=13.118 memavail=655396 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 71.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000164 mcu_task_stddev=0.000171 bytes_write=51022 bytes_read=29747 bytes_retransmit=17 bytes_invalid=0 send_seq=2287 receive_seq=2287 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=22 upcoming_bytes=0 freq=63999120  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=3.20 cputime=13.239 memavail=655432 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 72.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000164 mcu_task_stddev=0.000171 bytes_write=52180 bytes_read=30334 bytes_retransmit=17 bytes_invalid=0 send_seq=2338 receive_seq=2338 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999119  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=3.20 cputime=13.344 memavail=655432 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 73.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000164 mcu_task_stddev=0.000171 bytes_write=53347 bytes_read=30952 bytes_retransmit=17 bytes_invalid=0 send_seq=2392 receive_seq=2392 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999119  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=3.20 cputime=13.451 memavail=655432 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 74.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000164 mcu_task_stddev=0.000171 bytes_write=54434 bytes_read=31493 bytes_retransmit=17 bytes_invalid=0 send_seq=2440 receive_seq=2440 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999120  heater_bed: target=0 temp=23.5 pwm=0.000 sysload=3.20 cputime=13.569 memavail=655436 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 75.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000164 mcu_task_stddev=0.000171 bytes_write=55620 bytes_read=32119 bytes_retransmit=17 bytes_invalid=0 send_seq=2494 receive_seq=2494 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999124  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=3.20 cputime=13.675 memavail=655436 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 76.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000170 bytes_write=56803 bytes_read=32754 bytes_retransmit=17 bytes_invalid=0 send_seq=2549 receive_seq=2548 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999125  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=2.94 cputime=13.815 memavail=655452 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 77.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000170 bytes_write=57883 bytes_read=33315 bytes_retransmit=17 bytes_invalid=0 send_seq=2597 receive_seq=2597 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999125  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=2.94 cputime=13.912 memavail=655704 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.4 pwm=0.000
Stats 78.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000170 bytes_write=59038 bytes_read=33887 bytes_retransmit=17 bytes_invalid=0 send_seq=2648 receive_seq=2648 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999126  heater_bed: target=0 temp=22.9 pwm=0.000 sysload=2.94 cputime=14.026 memavail=655368 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 79.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000170 bytes_write=60227 bytes_read=34552 bytes_retransmit=17 bytes_invalid=0 send_seq=2705 receive_seq=2705 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=23 upcoming_bytes=0 freq=63999130  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=2.94 cputime=14.205 memavail=655368 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 80.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000170 bytes_write=61357 bytes_read=35139 bytes_retransmit=17 bytes_invalid=0 send_seq=2756 receive_seq=2756 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999131  heater_bed: target=0 temp=22.7 pwm=0.000 sysload=2.94 cputime=14.327 memavail=655368 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 81.0: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000172 bytes_write=62494 bytes_read=35707 bytes_retransmit=17 bytes_invalid=0 send_seq=2807 receive_seq=2806 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999131  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=2.71 cputime=14.430 memavail=654648 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 82.0: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000172 bytes_write=63615 bytes_read=36268 bytes_retransmit=17 bytes_invalid=0 send_seq=2855 receive_seq=2855 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999135  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=2.71 cputime=14.557 memavail=654648 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 83.0: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000172 bytes_write=64764 bytes_read=36863 bytes_retransmit=17 bytes_invalid=0 send_seq=2906 receive_seq=2906 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999135  heater_bed: target=0 temp=23.6 pwm=0.000 sysload=2.71 cputime=14.663 memavail=654400 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 84.0: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000172 bytes_write=65933 bytes_read=37466 bytes_retransmit=17 bytes_invalid=0 send_seq=2961 receive_seq=2960 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999134  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=2.71 cputime=14.785 memavail=654176 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 85.0: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000172 bytes_write=67076 bytes_read=38102 bytes_retransmit=17 bytes_invalid=0 send_seq=3015 receive_seq=3015 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999133  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=2.71 cputime=14.894 memavail=654432 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 86.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000164 mcu_task_stddev=0.000171 bytes_write=68265 bytes_read=38742 bytes_retransmit=17 bytes_invalid=0 send_seq=3070 receive_seq=3070 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999134  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=2.49 cputime=15.013 memavail=654688 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 87.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000164 mcu_task_stddev=0.000171 bytes_write=69396 bytes_read=39294 bytes_retransmit=17 bytes_invalid=0 send_seq=3120 receive_seq=3120 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=2 upcoming_bytes=0 freq=63999135  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=2.49 cputime=15.119 memavail=654440 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Unknown command:"UNINSTALL_BAK_UTIL"
Stats 88.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000164 mcu_task_stddev=0.000171 bytes_write=70518 bytes_read=39886 bytes_retransmit=17 bytes_invalid=0 send_seq=3172 receive_seq=3172 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999135  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=2.49 cputime=15.225 memavail=653968 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 89.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000164 mcu_task_stddev=0.000171 bytes_write=71681 bytes_read=40446 bytes_retransmit=17 bytes_invalid=0 send_seq=3222 receive_seq=3222 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999138  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=2.49 cputime=15.391 memavail=654928 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 90.0: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000164 mcu_task_stddev=0.000171 bytes_write=72857 bytes_read=41069 bytes_retransmit=17 bytes_invalid=0 send_seq=3277 receive_seq=3277 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=2 upcoming_bytes=0 freq=63999139  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=2.49 cputime=15.502 memavail=654760 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 91.0: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000163 mcu_task_stddev=0.000172 bytes_write=73949 bytes_read=41655 bytes_retransmit=17 bytes_invalid=0 send_seq=3326 receive_seq=3326 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999139  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=2.37 cputime=15.605 memavail=654816 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 92.0: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000163 mcu_task_stddev=0.000172 bytes_write=75146 bytes_read=42286 bytes_retransmit=17 bytes_invalid=0 send_seq=3381 receive_seq=3381 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999139  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=2.37 cputime=15.727 memavail=654828 print_time=1489.822 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Neopixel update did not succeed
Neopixel update did not succeed
Stats 633.7: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000165 mcu_task_stddev=0.000174 bytes_write=695870 bytes_read=367312 bytes_retransmit=17 bytes_invalid=0 send_seq=31613 receive_seq=31613 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999177  heater_bed: target=0 temp=22.9 pwm=0.000 sysload=0.98 cputime=83.761 memavail=680528 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 634.7: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000165 mcu_task_stddev=0.000174 bytes_write=697018 bytes_read=367897 bytes_retransmit=17 bytes_invalid=0 send_seq=31666 receive_seq=31665 retransmit_seq=3 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=22 upcoming_bytes=0 freq=63999176  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.98 cputime=83.868 memavail=680528 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 635.7: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000165 mcu_task_stddev=0.000174 bytes_write=698183 bytes_read=368523 bytes_retransmit=17 bytes_invalid=0 send_seq=31719 receive_seq=31719 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999176  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.98 cputime=83.990 memavail=680536 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 636.7: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000174 bytes_write=699321 bytes_read=369106 bytes_retransmit=17 bytes_invalid=0 send_seq=31770 receive_seq=31769 retransmit_seq=3 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999175  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.98 cputime=84.095 memavail=679780 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 637.7: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000174 bytes_write=700425 bytes_read=369678 bytes_retransmit=17 bytes_invalid=0 send_seq=31820 receive_seq=31820 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999174  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.98 cputime=84.199 memavail=679780 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 638.7: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000174 bytes_write=701632 bytes_read=370322 bytes_retransmit=17 bytes_invalid=0 send_seq=31876 receive_seq=31876 retransmit_seq=3 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999174  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=0.98 cputime=84.339 memavail=679276 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 639.7: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000174 bytes_write=702760 bytes_read=370909 bytes_retransmit=17 bytes_invalid=0 send_seq=31927 receive_seq=31927 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=22 upcoming_bytes=0 freq=63999174  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.98 cputime=84.465 memavail=679792 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 640.7: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000174 bytes_write=703900 bytes_read=371522 bytes_retransmit=17 bytes_invalid=0 send_seq=31980 receive_seq=31980 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999173  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.90 cputime=84.574 memavail=679296 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.6 pwm=0.000
Stats 641.7: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000171 bytes_write=705098 bytes_read=372168 bytes_retransmit=17 bytes_invalid=0 send_seq=32036 receive_seq=32036 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999172  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=0.90 cputime=84.687 memavail=679044 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 642.7: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000171 bytes_write=706221 bytes_read=372729 bytes_retransmit=17 bytes_invalid=0 send_seq=32085 receive_seq=32085 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=22 upcoming_bytes=0 freq=63999173  heater_bed: target=0 temp=22.9 pwm=0.000 sysload=0.90 cputime=84.811 memavail=678792 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 643.7: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000171 bytes_write=707349 bytes_read=373329 bytes_retransmit=17 bytes_invalid=0 send_seq=32137 receive_seq=32137 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999173  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.90 cputime=84.917 memavail=678792 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 644.7: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000171 bytes_write=708518 bytes_read=373914 bytes_retransmit=17 bytes_invalid=0 send_seq=32190 receive_seq=32189 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999171  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.90 cputime=85.045 memavail=677736 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 645.7: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000163 mcu_task_stddev=0.000171 bytes_write=709630 bytes_read=374475 bytes_retransmit=17 bytes_invalid=0 send_seq=32238 receive_seq=32238 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999171  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.83 cputime=85.146 memavail=677840 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 646.7: gcodein=0  mcu: mcu_awake=0.055 mcu_task_avg=0.000162 mcu_task_stddev=0.000174 bytes_write=710758 bytes_read=375045 bytes_retransmit=17 bytes_invalid=0 send_seq=32287 receive_seq=32287 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999170  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.83 cputime=85.250 memavail=677336 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.8 pwm=0.000
Stats 647.7: gcodein=0  mcu: mcu_awake=0.055 mcu_task_avg=0.000162 mcu_task_stddev=0.000174 bytes_write=711911 bytes_read=375638 bytes_retransmit=17 bytes_invalid=0 send_seq=32340 receive_seq=32339 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=2 upcoming_bytes=0 freq=63999170  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.83 cputime=85.375 memavail=677588 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 648.7: gcodein=0  mcu: mcu_awake=0.055 mcu_task_avg=0.000162 mcu_task_stddev=0.000174 bytes_write=713041 bytes_read=376212 bytes_retransmit=17 bytes_invalid=0 send_seq=32389 receive_seq=32389 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999171  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.83 cputime=85.479 memavail=677840 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.8 pwm=0.000
Stats 649.7: gcodein=0  mcu: mcu_awake=0.055 mcu_task_avg=0.000162 mcu_task_stddev=0.000174 bytes_write=714193 bytes_read=376791 bytes_retransmit=17 bytes_invalid=0 send_seq=32441 receive_seq=32440 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999171  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.83 cputime=85.598 memavail=678348 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 650.7: gcodein=0  mcu: mcu_awake=0.055 mcu_task_avg=0.000162 mcu_task_stddev=0.000174 bytes_write=715301 bytes_read=377376 bytes_retransmit=17 bytes_invalid=0 send_seq=32492 receive_seq=32492 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999171  heater_bed: target=0 temp=22.9 pwm=0.000 sysload=0.76 cputime=85.702 memavail=678104 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.8 pwm=0.000
Stats 651.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000174 bytes_write=716460 bytes_read=377988 bytes_retransmit=17 bytes_invalid=0 send_seq=32543 receive_seq=32543 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999172  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.76 cputime=85.837 memavail=677600 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 652.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000174 bytes_write=717642 bytes_read=378593 bytes_retransmit=17 bytes_invalid=0 send_seq=32597 receive_seq=32596 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999171  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.76 cputime=85.945 memavail=677600 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 653.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000174 bytes_write=718739 bytes_read=379165 bytes_retransmit=17 bytes_invalid=0 send_seq=32647 receive_seq=32647 retransmit_seq=3 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999172  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.76 cputime=86.066 memavail=677600 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 654.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000174 bytes_write=719900 bytes_read=379770 bytes_retransmit=17 bytes_invalid=0 send_seq=32700 receive_seq=32700 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999171  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.76 cputime=86.174 memavail=677356 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 655.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000164 mcu_task_stddev=0.000174 bytes_write=721058 bytes_read=380370 bytes_retransmit=17 bytes_invalid=0 send_seq=32752 receive_seq=32752 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=23 upcoming_bytes=0 freq=63999172  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.70 cputime=86.285 memavail=677356 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 656.7: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000174 bytes_write=722189 bytes_read=380962 bytes_retransmit=17 bytes_invalid=0 send_seq=32802 receive_seq=32802 retransmit_seq=3 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999171  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.70 cputime=86.412 memavail=676852 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 657.7: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000174 bytes_write=723313 bytes_read=381549 bytes_retransmit=17 bytes_invalid=0 send_seq=32854 receive_seq=32853 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=22 upcoming_bytes=0 freq=63999170  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.70 cputime=86.522 memavail=676852 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 658.7: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000174 bytes_write=724474 bytes_read=382154 bytes_retransmit=17 bytes_invalid=0 send_seq=32906 receive_seq=32906 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999170  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.70 cputime=86.655 memavail=676984 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 659.7: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000174 bytes_write=725626 bytes_read=382705 bytes_retransmit=17 bytes_invalid=0 send_seq=32957 receive_seq=32956 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999169  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.70 cputime=86.760 memavail=677252 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 660.7: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000166 mcu_task_stddev=0.000174 bytes_write=726729 bytes_read=383305 bytes_retransmit=17 bytes_invalid=0 send_seq=33008 receive_seq=33008 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999169  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.64 cputime=86.887 memavail=677472 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 661.7: gcodein=0  mcu: mcu_awake=0.055 mcu_task_avg=0.000163 mcu_task_stddev=0.000173 bytes_write=727872 bytes_read=383891 bytes_retransmit=17 bytes_invalid=0 send_seq=33057 receive_seq=33057 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999170  heater_bed: target=0 temp=22.9 pwm=0.000 sysload=0.64 cputime=86.993 memavail=677268 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 662.7: gcodein=0  mcu: mcu_awake=0.055 mcu_task_avg=0.000163 mcu_task_stddev=0.000173 bytes_write=728990 bytes_read=384437 bytes_retransmit=17 bytes_invalid=0 send_seq=33106 receive_seq=33106 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999170  heater_bed: target=0 temp=22.9 pwm=0.000 sysload=0.64 cputime=87.111 memavail=677268 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 663.7: gcodein=0  mcu: mcu_awake=0.055 mcu_task_avg=0.000163 mcu_task_stddev=0.000173 bytes_write=730131 bytes_read=385016 bytes_retransmit=17 bytes_invalid=0 send_seq=33157 receive_seq=33157 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999170  heater_bed: target=0 temp=22.9 pwm=0.000 sysload=0.64 cputime=87.215 memavail=677268 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.8 pwm=0.000
Stats 664.7: gcodein=0  mcu: mcu_awake=0.055 mcu_task_avg=0.000163 mcu_task_stddev=0.000173 bytes_write=731291 bytes_read=385621 bytes_retransmit=17 bytes_invalid=0 send_seq=33211 receive_seq=33210 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999169  heater_bed: target=0 temp=22.8 pwm=0.000 sysload=0.64 cputime=87.325 memavail=677024 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 665.7: gcodein=0  mcu: mcu_awake=0.055 mcu_task_avg=0.000163 mcu_task_stddev=0.000173 bytes_write=732434 bytes_read=386214 bytes_retransmit=17 bytes_invalid=0 send_seq=33262 receive_seq=33262 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999170  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.67 cputime=87.500 memavail=676804 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 666.7: gcodein=0  mcu: mcu_awake=0.055 mcu_task_avg=0.000162 mcu_task_stddev=0.000173 bytes_write=733588 bytes_read=386831 bytes_retransmit=17 bytes_invalid=0 send_seq=33314 receive_seq=33314 retransmit_seq=3 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999173  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.67 cputime=87.672 memavail=676552 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 667.7: gcodein=0  mcu: mcu_awake=0.055 mcu_task_avg=0.000162 mcu_task_stddev=0.000173 bytes_write=734684 bytes_read=387400 bytes_retransmit=17 bytes_invalid=0 send_seq=33363 receive_seq=33363 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999173  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.67 cputime=87.818 memavail=676556 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 668.7: gcodein=0  mcu: mcu_awake=0.055 mcu_task_avg=0.000162 mcu_task_stddev=0.000173 bytes_write=735847 bytes_read=387977 bytes_retransmit=17 bytes_invalid=0 send_seq=33415 receive_seq=33415 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999172  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.67 cputime=87.923 memavail=676556 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 669.7: gcodein=0  mcu: mcu_awake=0.055 mcu_task_avg=0.000162 mcu_task_stddev=0.000173 bytes_write=737023 bytes_read=388629 bytes_retransmit=17 bytes_invalid=0 send_seq=33471 receive_seq=33471 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=23 upcoming_bytes=0 freq=63999172  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.67 cputime=88.060 memavail=676816 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 670.7: gcodein=0  mcu: mcu_awake=0.055 mcu_task_avg=0.000162 mcu_task_stddev=0.000173 bytes_write=738149 bytes_read=389224 bytes_retransmit=17 bytes_invalid=0 send_seq=33522 receive_seq=33522 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999172  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.62 cputime=88.169 memavail=677044 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 671.7: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000167 mcu_task_stddev=0.000174 bytes_write=739291 bytes_read=389792 bytes_retransmit=17 bytes_invalid=0 send_seq=33572 receive_seq=33572 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999171  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.62 cputime=88.291 memavail=677016 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 672.7: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000167 mcu_task_stddev=0.000174 bytes_write=740427 bytes_read=390379 bytes_retransmit=17 bytes_invalid=0 send_seq=33623 receive_seq=33623 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999170  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.62 cputime=88.396 memavail=677044 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 673.7: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000167 mcu_task_stddev=0.000174 bytes_write=741594 bytes_read=390997 bytes_retransmit=17 bytes_invalid=0 send_seq=33677 receive_seq=33677 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999170  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=0.62 cputime=88.502 memavail=677084 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 674.7: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000167 mcu_task_stddev=0.000174 bytes_write=742725 bytes_read=391556 bytes_retransmit=17 bytes_invalid=0 send_seq=33727 receive_seq=33727 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999171  heater_bed: target=0 temp=22.7 pwm=0.000 sysload=0.62 cputime=88.637 memavail=676836 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 675.7: gcodein=0  mcu: mcu_awake=0.057 mcu_task_avg=0.000167 mcu_task_stddev=0.000174 bytes_write=743864 bytes_read=392151 bytes_retransmit=17 bytes_invalid=0 send_seq=33778 receive_seq=33778 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999170  heater_bed: target=0 temp=22.9 pwm=0.000 sysload=0.81 cputime=88.744 memavail=677908 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 676.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000165 mcu_task_stddev=0.000172 bytes_write=745020 bytes_read=392760 bytes_retransmit=17 bytes_invalid=0 send_seq=33830 receive_seq=33830 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999170  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.81 cputime=88.867 memavail=677604 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 677.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000165 mcu_task_stddev=0.000172 bytes_write=746201 bytes_read=393389 bytes_retransmit=17 bytes_invalid=0 send_seq=33887 receive_seq=33886 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999169  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.81 cputime=88.977 memavail=677656 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.2 pwm=0.000
Stats 678.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000165 mcu_task_stddev=0.000172 bytes_write=747301 bytes_read=393958 bytes_retransmit=17 bytes_invalid=0 send_seq=33935 receive_seq=33935 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999169  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.81 cputime=89.103 memavail=677656 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 679.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000165 mcu_task_stddev=0.000172 bytes_write=748479 bytes_read=394563 bytes_retransmit=17 bytes_invalid=0 send_seq=33988 receive_seq=33988 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999169  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.81 cputime=89.242 memavail=677208 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 680.7: gcodein=0  mcu: mcu_awake=0.056 mcu_task_avg=0.000165 mcu_task_stddev=0.000172 bytes_write=749610 bytes_read=395153 bytes_retransmit=17 bytes_invalid=0 send_seq=34041 receive_seq=34041 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=24 upcoming_bytes=0 freq=63999168  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.83 cputime=89.353 memavail=677212 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 681.7: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000173 bytes_write=750755 bytes_read=395783 bytes_retransmit=17 bytes_invalid=0 send_seq=34094 receive_seq=34094 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999167  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.83 cputime=89.477 memavail=677216 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 682.7: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000173 bytes_write=751951 bytes_read=396409 bytes_retransmit=17 bytes_invalid=0 send_seq=34148 receive_seq=34148 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999171  heater_bed: target=0 temp=22.9 pwm=0.000 sysload=0.83 cputime=89.586 memavail=677216 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.3 pwm=0.000
Stats 683.7: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000173 bytes_write=753099 bytes_read=397046 bytes_retransmit=17 bytes_invalid=0 send_seq=34204 receive_seq=34204 retransmit_seq=3 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999169  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.83 cputime=89.723 memavail=677216 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 684.7: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000173 bytes_write=754302 bytes_read=397742 bytes_retransmit=17 bytes_invalid=0 send_seq=34264 receive_seq=34264 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999170  heater_bed: target=0 temp=22.9 pwm=0.000 sysload=0.83 cputime=89.864 memavail=676992 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 685.7: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000166 mcu_task_stddev=0.000173 bytes_write=755455 bytes_read=398303 bytes_retransmit=17 bytes_invalid=0 send_seq=34314 receive_seq=34313 retransmit_seq=3 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=2 upcoming_bytes=0 freq=63999170  heater_bed: target=0 temp=23.3 pwm=0.000 sysload=0.84 cputime=89.971 memavail=676992 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 686.7: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000164 mcu_task_stddev=0.000169 bytes_write=756592 bytes_read=398923 bytes_retransmit=17 bytes_invalid=0 send_seq=34367 receive_seq=34367 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999169  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.84 cputime=90.094 memavail=677508 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 687.7: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000164 mcu_task_stddev=0.000169 bytes_write=757734 bytes_read=399526 bytes_retransmit=17 bytes_invalid=0 send_seq=34419 receive_seq=34419 retransmit_seq=3 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=2 upcoming_bytes=0 freq=63999168  heater_bed: target=0 temp=23.4 pwm=0.000 sysload=0.84 cputime=90.200 memavail=677456 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 688.7: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000164 mcu_task_stddev=0.000169 bytes_write=758853 bytes_read=400112 bytes_retransmit=17 bytes_invalid=0 send_seq=34470 receive_seq=34470 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999169  heater_bed: target=0 temp=23.0 pwm=0.000 sysload=0.84 cputime=90.335 memavail=677508 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 689.7: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000164 mcu_task_stddev=0.000169 bytes_write=760035 bytes_read=400695 bytes_retransmit=17 bytes_invalid=0 send_seq=34523 receive_seq=34523 retransmit_seq=3 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999169  heater_bed: target=0 temp=23.2 pwm=0.000 sysload=0.84 cputime=90.471 memavail=677480 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.1 pwm=0.000
Stats 690.7: gcodein=0  mcu: mcu_awake=0.059 mcu_task_avg=0.000164 mcu_task_stddev=0.000169 bytes_write=761159 bytes_read=401274 bytes_retransmit=17 bytes_invalid=0 send_seq=34574 receive_seq=34574 retransmit_seq=3 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=24 upcoming_bytes=0 freq=63999171  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.93 cputime=90.578 memavail=677776 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Stats 691.7: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000165 mcu_task_stddev=0.000173 bytes_write=762334 bytes_read=401961 bytes_retransmit=17 bytes_invalid=0 send_seq=34632 receive_seq=34632 retransmit_seq=3 srtt=0.002 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999170  heater_bed: target=0 temp=23.1 pwm=0.000 sysload=0.93 cputime=90.709 memavail=677272 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=22.9 pwm=0.000
Stats 692.7: gcodein=0  mcu: mcu_awake=0.058 mcu_task_avg=0.000165 mcu_task_stddev=0.000173 bytes_write=763514 bytes_read=402518 bytes_retransmit=17 bytes_invalid=0 send_seq=34684 receive_seq=34683 retransmit_seq=3 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=63999170  heater_bed: target=0 temp=23.9 pwm=0.000 sysload=0.93 cputime=90.814 memavail=677276 print_time=2090.780 buffer_time=0.000 print_stall=0 extruder: target=0 temp=23.0 pwm=0.000
Neopixel update did not succeed
